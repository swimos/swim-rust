// @swim/ux v4.0.0-dev.20220527.3 (c) 2015-2023 Nstream, inc.
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@swim/core"),require("@swim/core"),require("@swim/core"),require("@swim/ui"),require("@swim/ui"),require("@swim/ui"),require("@swim/ui"),require("@swim/ui"),require("@swim/core"),require("@swim/core"),require("@swim/ui"),require("@swim/ui")):"function"==typeof define&&define.amd?define(["exports","@swim/core","@swim/core","@swim/core","@swim/ui","@swim/ui","@swim/ui","@swim/ui","@swim/ui","@swim/core","@swim/core","@swim/ui","@swim/ui"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).swim=e.swim||{},e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim)}(this,(function(e,t,i,l,s,n,r,o,a,h,c,d,u){"use strict";function w(e,t,i,l,s,n){function r(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,a=l.kind,h="getter"===a?"get":"setter"===a?"set":"value",c=!t&&e?l.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,l.name):{}),u=!1,w=i.length-1;w>=0;w--){var v={};for(var p in l)v[p]="access"===p?{}:l[p];for(var p in l.access)v.access[p]=l.access[p];v.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");n.push(r(e||null))};var g=(0,i[w])("accessor"===a?{get:d.get,set:d.set}:d[h],v);if("accessor"===a){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(o=r(g.get))&&(d.get=o),(o=r(g.set))&&(d.set=o),(o=r(g.init))&&s.unshift(o)}else(o=r(g))&&("field"===a?s.unshift(o):d[h]=o)}c&&Object.defineProperty(c,l.name,d),u=!0}function v(e,t,i){for(var l=arguments.length>2,s=0;s<t.length;s++)i=l?t[s].call(e,i):t[s].call(e);return l?i:void 0}"function"==typeof SuppressedError&&SuppressedError;let p=(()=>{var e;let r,o,a=n.HtmlView,h=[],c=[],d=[];return e=class extends a{constructor(e){super(e),this.glowState=void v(this,h),this.left=v(this,c,void 0),this.opacity=v(this,d,void 0),this.glowState="ready",this.glowTimer=0,this.initGlow()}initGlow(){this.setIntrinsic({classList:["button-glow"],style:{position:"absolute",width:l.Length.zero(),height:l.Length.zero(),borderRadius:l.Length.pct(50),pointerEvents:"none"}})}didMount(){if(this.style.backgroundColor.hasAffinity(i.Affinity.Intrinsic)){let e=this.getLookOr(s.Look.highlightColor,null);null!==e&&(e=e.alpha(1)),this.style.backgroundColor.setIntrinsic(e)}super.didMount()}onUnmount(){this.glowState="ready",this.cancelGlow(),this.remove(),super.onUnmount()}onApplyTheme(e,t,l){if(super.onApplyTheme(e,t,l),this.style.backgroundColor.hasAffinity(i.Affinity.Intrinsic)){let i=e.getOr(s.Look.highlightColor,t,null);null!==i&&(i=i.alpha(1)),this.style.backgroundColor.setIntrinsic(i)}}glow(e,i,l,n=0){if("ready"!==this.glowState)return;if(this.cancelGlow(),0!==n){const t=this.glow.bind(this,e,i,l,0);return void(this.glowTimer=setTimeout(t,n))}l=void 0===l||!0===l?this.getLookOr(s.Look.timing,!1):t.Timing.fromLike(l),this.willGlow();const r=this.node.offsetParent;if(null===r)return;const o=r.getBoundingClientRect(),a=e-o.left,h=i-o.top,c=Math.max(a,o.width-a),d=Math.max(h,o.height-h),u=Math.sqrt(c*c+d*d),w=this.getLook(s.Look.highlightColor),v=void 0!==w?w.alpha():.1;this.style.opacity.setIntrinsic(v),!1!==l?(this.style.setIntrinsic({left:a,top:h}),this.style.setIntrinsic({left:a-u,top:h-u,width:2*u,height:2*u},l)):(this.style.setIntrinsic({left:a-u,top:h-u,width:2*u,height:2*u}),this.didGlow()),this.glowState="glowing"}willGlow(){}didGlow(){}cancelGlow(){0!==this.glowTimer&&(clearTimeout(this.glowTimer),this.glowTimer=0)}pulse(e,i,l){l=void 0===l||!0===l?this.getLookOr(s.Look.timing,!1):t.Timing.fromLike(l),"ready"===this.glowState&&this.glow(e,i,l),"glowing"===this.glowState&&(this.willPulse(),!1!==l?this.style.opacity.setIntrinsic(0,l):(this.style.opacity.setIntrinsic(0),this.didPulse()),this.glowState="pulsing")}willPulse(){}didPulse(){this.remove()}fade(e,i,l){"ready"===this.glowState?(this.cancelGlow(),this.didFade()):"glowing"===this.glowState&&(l=void 0===l||!0===l?this.getLookOr(s.Look.timing,!1):t.Timing.fromLike(l),this.willFade(),!1!==l?this.style.opacity.setIntrinsic(0,l):(this.style.opacity.setIntrinsic(0),this.didFade())),this.glowState="fading"}willFade(){}didFade(){this.remove()}},(()=>{var t;const l="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(t=a[Symbol.metadata])&&void 0!==t?t:null):void 0;r=[i.Animator({inherits:!0,get parent(){return this.owner.style.left},didTransition(){this.owner.didGlow()}})],o=[i.Animator({inherits:!0,get parent(){return this.owner.style.opacity},didTransition(e){"pulsing"===this.owner.glowState&&0===e?this.owner.didPulse():"fading"===this.owner.glowState&&0===e&&this.owner.didFade()}})],w(null,null,r,{kind:"field",name:"left",static:!1,private:!1,access:{has:e=>"left"in e,get:e=>e.left,set:(e,t)=>{e.left=t}},metadata:l},c,h),w(null,null,o,{kind:"field",name:"opacity",static:!1,private:!1,access:{has:e=>"opacity"in e,get:e=>e.opacity,set:(e,t)=>{e.opacity=t}},metadata:l},d,h),l&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),e})(),g=(()=>{var e;let t,l,s=n.HtmlView,o=[],a=[],h=[];return e=class extends s{constructor(e){super(e),this.glows=(v(this,o),v(this,a,void 0)),this.gesture=v(this,h,void 0),this.initMembrane(e)}initMembrane(e){this.classList.add("membrane")}glow(e){if(e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0),void 0===e.detail){const t="mouse"===e.inputType?0:100;e.detail=this.prependChild(p),e.detail.glow(e.x,e.y,void 0,t)}}},(()=>{var n;const c="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=s[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[i.Property({valueType:Boolean,value:!0,inherits:!0})],l=[r.PositionGesture({bindsOwner:!0,didBeginPress(e,t){this.owner.glows.value&&this.owner.glow(e)},didMovePress(e,t){e.isRunaway()?this.cancelPress(e,t):this.owner.clientBounds.contains(e.x,e.y)||(e.clearHoldTimer(),this.beginHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0))},didEndPress(e,t){this.owner.clientBounds.contains(e.x,e.y)?e.detail instanceof p&&e.detail.pulse(e.x,e.y):(this.endHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0))},didCancelPress(e,t){this.owner.clientBounds.contains(e.x,e.y)||this.endHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0)}})],w(null,null,t,{kind:"field",name:"glows",static:!1,private:!1,access:{has:e=>"glows"in e,get:e=>e.glows,set:(e,t)=>{e.glows=t}},metadata:c},a,o),w(null,null,l,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}},metadata:c},h,o),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),e})(),b=(()=>{var e;let n,h,c,d,u,p=g,b=[],m=[],y=[],f=[],V=[],T=[];return e=class extends p{constructor(e){super(e),this.buttonType=(v(this,b),v(this,m,void 0)),this.icons=v(this,y,void 0),this.icon=v(this,f,void 0),this.presence=v(this,V,void 0),this.gesture=v(this,T,void 0),this.initButton()}initButton(){this.setIntrinsic({classList:["floating-button"],style:{position:"relative",borderRadius:l.Length.pct(50),overflow:"hidden",userSelect:"none",cursor:"pointer"}})}onApplyTheme(e,t,i){super.onApplyTheme(e,t,i),this.style.backgroundColor.setIntrinsic(e.getOr(s.Look.accentColor,t,null),i);let l=e.getOr(s.Look.shadow,s.Mood.floating,null);if(null!==l){const e=l.color,t=this.presence.getPhaseOr(1);l=l.withColor(e.alpha(e.alpha()*t))}this.style.boxShadow.setIntrinsic(l,i)}onLayout(){super.onLayout();let e=this.getLookOr(s.Look.shadow,s.Mood.floating,null);if(null!==e){const t=e.color,i=this.presence.getPhaseOr(1);e=e.withColor(t.alpha(t.alpha()*i))}this.style.boxShadow.setIntrinsic(e)}},(()=>{var v;const g="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=p[Symbol.metadata])&&void 0!==v?v:null):void 0;n=[i.Property({valueType:String,value:"regular",init(){this.updateButtonType(this.value)},didSetValue(e,t){e!==t&&this.updateButtonType(e)},updateButtonType(e){"regular"===e?this.owner.style.setIntrinsic({width:56,height:56}):"mini"===e&&this.owner.style.setIntrinsic({width:40,height:40})}})],h=[r.ViewSet({viewType:a.HtmlIconView,observes:!0,viewDidApplyTheme(e,t,i,l){const n=e.getOr(s.Look.backgroundColor,t,null);l.iconColor.set(n,i)},viewDidAnimate(e){e.style.opacity.tweening||e===this.owner.icon.view||this.deleteView(e)}})],c=[r.ViewRef({viewType:a.HtmlIconView,createView(){const e=a.HtmlIconView.create().setIntrinsic({style:{position:"absolute",left:0,top:0,width:this.owner.style.width.state,height:this.owner.style.height.state,opacity:0,transform:l.Transform.rotate(l.Angle.deg(-90)),pointerEvents:"none"},iconLayout:{width:24,height:24}});return e.iconColor.setAffinity(i.Affinity.Extrinsic),e},push(e,i){i=(void 0!==i||0!==this.owner.icons.viewCount)&&(void 0===i||!0===i?this.owner.getLookOr(s.Look.timing,!1):t.Timing.fromLike(i));const n=this.view;null!==n&&(!1!==i?n.style.setIntrinsic({opacity:0,transform:l.Transform.rotate(l.Angle.deg(90))},i):this.owner.icons.deleteView(n));const r=this.createView().setIntrinsic({graphics:e});return this.owner.icons.attachView(r),this.insertView(void 0,r),r.style.setIntrinsic({opacity:1,transform:l.Transform.rotate(l.Angle.deg(0))},i),r},pop(e){e=void 0===e||!0===e?this.owner.getLookOr(s.Look.timing,!1):t.Timing.fromLike(e);const i=this.view;let n=null;const r=this.owner.icons.views;for(const e in r){const t=r[e];t!==i&&(n=t)}return null!==i&&(!1!==e?(i.style.setIntrinsic({opacity:0,transform:l.Transform.rotate(l.Angle.deg(-90))},e),this.owner.icons.insertView(void 0,i)):this.owner.icons.deleteView(i)),null!==n&&(this.insertView(void 0,n),n.style.setIntrinsic({opacity:1,transform:l.Transform.rotate(l.Angle.deg(0))},e)),i}})],d=[o.PresenceAnimator({inherits:!0})],u=[r.PositionGesture({extends:!0,didStartHovering(){if(this.owner.modifyMood(s.Feel.default,[[s.Feel.hovering,1]]),this.owner.style.backgroundColor.hasAffinity(i.Affinity.Intrinsic)){const e=this.owner.getLook(s.Look.timing);this.owner.style.backgroundColor.setIntrinsic(this.owner.getLookOr(s.Look.accentColor,null),e)}},didStopHovering(){if(this.owner.modifyMood(s.Feel.default,[[s.Feel.hovering,void 0]]),this.owner.style.backgroundColor.hasAffinity(i.Affinity.Intrinsic)){const e=this.owner.getLook(s.Look.timing);this.owner.style.backgroundColor.setIntrinsic(this.owner.getLookOr(s.Look.accentColor,null),e)}},didMovePress(e,t){}})],w(null,null,n,{kind:"field",name:"buttonType",static:!1,private:!1,access:{has:e=>"buttonType"in e,get:e=>e.buttonType,set:(e,t)=>{e.buttonType=t}},metadata:g},m,b),w(null,null,h,{kind:"field",name:"icons",static:!1,private:!1,access:{has:e=>"icons"in e,get:e=>e.icons,set:(e,t)=>{e.icons=t}},metadata:g},y,b),w(null,null,c,{kind:"field",name:"icon",static:!1,private:!1,access:{has:e=>"icon"in e,get:e=>e.icon,set:(e,t)=>{e.icon=t}},metadata:g},f,b),w(null,null,d,{kind:"field",name:"presence",static:!1,private:!1,access:{has:e=>"presence"in e,get:e=>e.presence,set:(e,t)=>{e.presence=t}},metadata:g},V,b),w(null,null,u,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}},metadata:g},T,b),g&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:g})})(),e})(),m=(()=>{var e;let t,i=n.HtmlView,l=[],r=[];return e=class extends i{constructor(e){super(e),this.presence=(v(this,l),v(this,r,void 0)),this.initButtonItem()}initButtonItem(){this.classList.add("button-item"),this.style.position.setIntrinsic("relative");const e=this.createButton();null!==e&&this.setChild("button",e)}createButton(){const e=b.create();return e.buttonType.setIntrinsic("mini"),e}get button(){const e=this.getChild("button");return e instanceof b?e:null}get icon(){const e=this.button,t=null!==e?e.icon:null;return null!==t?t.view:null}get label(){const e=this.getChild("label");return e instanceof n.HtmlView?e:null}onLayout(){super.onLayout();const e=this.presence.getPhaseOr(1),t=this.button;null!==t&&(this.style.width.setIntrinsic(t.style.width.state),this.style.height.setIntrinsic(t.style.height.state));const i=this.label;null!==i&&i.style.opacity.setIntrinsic(e)}onInsertChild(e,t){super.onInsertChild(e,t);const i=e.key;"button"===i&&e instanceof b?this.onInsertButton(e):"label"===i&&e instanceof n.HtmlView&&this.onInsertLabel(e)}onRemoveChild(e){const t=e.key;"button"===t&&e instanceof b?this.onRemoveButton(e):"label"===t&&e instanceof n.HtmlView&&this.onRemoveLabel(e),super.onRemoveChild(e)}onInsertButton(e){}onRemoveButton(e){}onInsertLabel(e){e.style.setIntrinsic({display:"block",position:"absolute",top:0,right:56,bottom:0,fontSize:17,fontWeight:"500",lineHeight:40,whiteSpace:"nowrap",color:s.Look.labelColor,opacity:this.presence.getPhaseOr(0)})}onRemoveLabel(e){}},(()=>{var s;const n="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(s=i[Symbol.metadata])&&void 0!==s?s:null):void 0;t=[o.PresenceAnimator({inherits:!0})],w(null,null,t,{kind:"field",name:"presence",static:!1,private:!1,access:{has:e=>"presence"in e,get:e=>e.presence,set:(e,t)=>{e.presence=t}},metadata:n},r,l),n&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})})(),e})(),y=(()=>{var e;let l,h,c,d,u,p,g,y,f,V,T,S,C=n.HtmlView,k=[],L=[],D=[],I=[],O=[],A=[],P=[],x=[],B=[],R=[],W=[],H=[],F=[];return e=class extends C{constructor(e){super(e),this.stackHeight=(v(this,L),v(this,D,void 0)),this.buttonSpacing=v(this,I,void 0),this.itemSpacing=v(this,O,void 0),this.opacity=v(this,A,void 0),this.button=v(this,P,void 0),this.items=v(this,x,void 0),this.presence=v(this,B,void 0),this.modality=v(this,R,void 0),this.gesture=v(this,W,void 0),this.click=v(this,H,void 0),this.contextmenu=v(this,F,void 0),this.initButtonStack()}initButtonStack(){this.setIntrinsic({classList:["button-stack"],style:{display:"block",position:"relative",width:56,height:56,opacity:1,userSelect:"none",cursor:"pointer"}}),this.button.insertView()}get closeIcon(){return e.closeIcon}insertItem(e,t,i){void 0===t&&(t=this.node.childNodes.length-1),this.insertChild(e.node,this.node.childNodes[1+t]||null,i)}removeItems(){const e=this.node.childNodes;for(let t=e.length-1;t>=0;t-=1){const i=n.NodeView.get(e[t]);i instanceof m&&this.removeChild(i)}}onLayout(){super.onLayout(),this.layoutStack()}layoutStack(){const e=this.presence.getPhase(),t=this.node.childNodes,i=t.length,l=this.button.view;let s,r=i-1,o=0,a=0;null!==l?(l.style.zIndex.setIntrinsic(i),s=l.style.height.pxValue()):s=0;const h=this.buttonSpacing.value,c=this.itemSpacing.value;for(let l=0;l<i;l+=1){const i=n.NodeView.get(t[l]);if(i instanceof m){0===o?(a+=h,s+=h):(a+=c,s+=c);const t=i.style.height.pxValue();i.style.setIntrinsic({display:0===e?"none":"flex",bottom:e*s,zIndex:r}),s+=t,a+=t,o+=1,r-=1}}this.stackHeight.set(a)}show(e){1!==this.opacity.state&&(e=void 0===e||!0===e?this.getLookOr(s.Look.timing,!1):t.Timing.fromLike(e),this.willShowStack(),!1!==e?this.opacity.setIntrinsic(1,e):(this.opacity.setIntrinsic(1),this.didShowStack()))}willShowStack(){this.callObservers("buttonStackWillShow",this),this.style.display.set("block")}didShowStack(){this.requireUpdate(r.View.NeedsLayout),this.callObservers("buttonStackDidShow",this)}hide(e){0!==this.opacity.state&&(e=void 0===e||!0===e?this.getLookOr(s.Look.timing,!1):t.Timing.fromLike(e),this.willHideStack(),!1!==e?this.opacity.setIntrinsic(0,e):(this.opacity.setIntrinsic(0),this.didHideStack()))}willHideStack(){this.callObservers("buttonStackWillHide",this)}didHideStack(){this.style.display.set("none"),this.requireUpdate(r.View.NeedsLayout),this.callObservers("buttonStackDidHide",this)}static get closeIcon(){return a.VectorIcon.create(24,24,"M19,6.4L17.6,5L12,10.6L6.4,5L5,6.4L10.6,12L5,17.6L6.4,19L12,13.4L17.6,19L19,17.6L13.4,12Z")}},(()=>{var n;const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=C[Symbol.metadata])&&void 0!==n?n:null):void 0;h=[i.Property({valueType:Number,value:0})],c=[s.ThemeAnimator({valueType:Number,value:28,updateFlags:r.View.NeedsLayout})],d=[s.ThemeAnimator({valueType:Number,value:20,updateFlags:r.View.NeedsLayout})],u=[i.Animator({inherits:!0,get parent(){return this.owner.style.opacity},didTransition(e){1===e?this.owner.didShowStack():0===e&&this.owner.didHideStack()}})],p=[r.ViewRef({viewType:b,viewKey:!0,binds:!0,willAttachView(e,t){e.presence.setIntrinsic(o.Presence.presented()),(this.owner.presence.presented||this.owner.presence.presenting)&&e.icon.push(this.owner.closeIcon)},initView(e){e.style.zIndex.setIntrinsic(0)}})],g=[r.ViewSet({viewType:m,binds:!0,willAttachView(e,t){e.style.setIntrinsic({position:"absolute",right:8,bottom:8,left:8,zIndex:0})}})],y=[o.PresenceAnimator({value:o.Presence.dismissed(),updateFlags:r.View.NeedsLayout,get transition(){return this.owner.getLookOr(s.Look.timing,null)},didSetValue(e){this.owner.callObservers("viewDidSetPresence",e,this.owner),this.owner.modality.setIntrinsic(e.phase)},willPresent(){this.owner.callObservers("viewWillPresent",this.owner);const e=this.owner.button.view;if(null!==e){const t=this.timing;e.icon.push(this.owner.closeIcon,null!==t?t:void 0)}this.owner.modal.present()},didPresent(){this.owner.callObservers("viewDidPresent",this.owner)},willDismiss(){this.owner.callObservers("viewWillDismiss",this.owner);const e=this.owner.button.view;if(null!==e&&e.icons.viewCount>1){const t=this.timing;e.icon.pop(null!==t?t:void 0)}},didDismiss(){this.owner.callObservers("viewDidDismiss",this.owner)}})],f=[i.Property({valueType:Number,value:0,didSetValue(e){this.owner.callObservers("viewDidSetModality",e,this.owner)}})],V=[r.PositionGesture({binds:!0,viewKey:"button",didMovePress(e,t){if(e.defaultPrevented||this.owner.presence.presented)return;const i=this.owner.stackHeight.value,l=Math.min(Math.max(0,-(e.y-e.y0)/(.5*i)),1);this.owner.presence.setPhase(l),l>.1&&(e.clearHoldTimer(),this.owner.presence.presenting||this.owner.presence.set(this.owner.presence.value.asPresenting()))},didEndPress(e,t){if(e.defaultPrevented)return;const i=this.owner.presence.getPhase();e.t-e.t0<e.holdDelay?i<.1||this.owner.presence.presented?this.owner.presence.dismiss():this.owner.presence.present():i<.5?this.owner.presence.dismiss():i>=.5&&this.owner.presence.present()},didCancelPress(e,t){if(2===e.buttons)this.owner.presence.toggle();else{this.owner.presence.getPhase()<.1||this.owner.presence.presented?this.owner.presence.dismiss():this.owner.presence.present()}},didLongPress(e){e.preventDefault(),this.owner.presence.toggle()}})],T=[i.EventHandler({eventType:"click",handle(e){var t;e.target===(null===(t=this.owner.button.view)||void 0===t?void 0:t.node)&&e.stopPropagation()}})],S=[i.EventHandler({eventType:"contextmenu",handle(e){e.preventDefault()}})],l=[t.Lazy],w(e,null,l,{kind:"getter",name:"closeIcon",static:!0,private:!1,access:{has:e=>"closeIcon"in e,get:e=>e.closeIcon},metadata:a},null,k),w(null,null,h,{kind:"field",name:"stackHeight",static:!1,private:!1,access:{has:e=>"stackHeight"in e,get:e=>e.stackHeight,set:(e,t)=>{e.stackHeight=t}},metadata:a},D,L),w(null,null,c,{kind:"field",name:"buttonSpacing",static:!1,private:!1,access:{has:e=>"buttonSpacing"in e,get:e=>e.buttonSpacing,set:(e,t)=>{e.buttonSpacing=t}},metadata:a},I,L),w(null,null,d,{kind:"field",name:"itemSpacing",static:!1,private:!1,access:{has:e=>"itemSpacing"in e,get:e=>e.itemSpacing,set:(e,t)=>{e.itemSpacing=t}},metadata:a},O,L),w(null,null,u,{kind:"field",name:"opacity",static:!1,private:!1,access:{has:e=>"opacity"in e,get:e=>e.opacity,set:(e,t)=>{e.opacity=t}},metadata:a},A,L),w(null,null,p,{kind:"field",name:"button",static:!1,private:!1,access:{has:e=>"button"in e,get:e=>e.button,set:(e,t)=>{e.button=t}},metadata:a},P,L),w(null,null,g,{kind:"field",name:"items",static:!1,private:!1,access:{has:e=>"items"in e,get:e=>e.items,set:(e,t)=>{e.items=t}},metadata:a},x,L),w(null,null,y,{kind:"field",name:"presence",static:!1,private:!1,access:{has:e=>"presence"in e,get:e=>e.presence,set:(e,t)=>{e.presence=t}},metadata:a},B,L),w(null,null,f,{kind:"field",name:"modality",static:!1,private:!1,access:{has:e=>"modality"in e,get:e=>e.modality,set:(e,t)=>{e.modality=t}},metadata:a},R,L),w(null,null,V,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}},metadata:a},W,L),w(null,null,T,{kind:"field",name:"click",static:!1,private:!1,access:{has:e=>"click"in e,get:e=>e.click,set:(e,t)=>{e.click=t}},metadata:a},H,L),w(null,null,S,{kind:"field",name:"contextmenu",static:!1,private:!1,access:{has:e=>"contextmenu"in e,get:e=>e.contextmenu,set:(e,t)=>{e.contextmenu=t}},metadata:a},F,L),a&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),v(e,k)})(),e})(),f=(()=>{var e;let n,h,c,d,u,p,b,m,y=g,f=[],V=[],T=[],S=[],C=[],k=[],L=[],D=[],I=[];return e=class extends y{constructor(e){super(e),this.iconLayout=(v(this,f),v(this,V,void 0)),this.iconColor=v(this,T,void 0),this.graphics=v(this,S,void 0),this.icons=v(this,C,void 0),this.icon=v(this,k,void 0),this.hovers=v(this,L,void 0),this.gesture=v(this,D,void 0),this.click=v(this,I,void 0),this.initButton(),this.initTheme()}initButton(){this.setIntrinsic({classList:["icon-button"],style:{position:"relative",width:44,height:44,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:4,overflow:"hidden",userSelect:"none",cursor:"pointer"}})}initTheme(){this.modifyTheme(s.Feel.default,[[s.Feel.translucent,1]])}onApplyTheme(e,t,l){if(super.onApplyTheme(e,t,l),this.style.backgroundColor.hasAffinity(i.Affinity.Intrinsic)){let e=this.getLookOr(s.Look.backgroundColor,null);!this.gesture.hovering&&e instanceof o.Color&&(e=e.alpha(0)),this.style.backgroundColor.setIntrinsic(e,l)}if(!this.graphics.derived){const i=this.graphics.value;if(i instanceof a.Icon){const s=i.withTheme(e,t);this.graphics.setIntrinsic(s,!!i.isThemed()&&l)}}}onResize(){super.onResize(),this.requireUpdate(r.View.NeedsLayout)}},(()=>{var v;const g="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=y[Symbol.metadata])&&void 0!==v?v:null):void 0;n=[i.Animator({valueType:a.IconLayout,initValue:()=>a.IconLayout.of(24,24),updateFlags:r.View.NeedsLayout})],h=[s.ThemeAnimator({valueType:o.Color,value:null,updateFlags:r.View.NeedsLayout,didSetState(e){const t=null!==this.timing&&this.timing;this.owner.graphics.setIntrinsic(this.owner.graphics.state,t)}})],c=[s.ThemeAnimator({extends:a.IconGraphicsAnimator,valueType:a.Graphics,value:null,updateFlags:r.View.NeedsLayout})],d=[r.ViewSet({viewType:a.SvgIconView,observes:!0,viewDidApplyTheme(e,t,i,l){const n=e.getOr(s.Look.backgroundColor,t,null);l.iconColor.set(n,i)},viewDidAnimate(e){e.attributes.opacity.tweening||e===this.owner.icon.view||this.deleteView(e)},viewWillLayout(e){const t=this.owner.style.width.pxValue(),i=this.owner.style.height.pxValue();e.attributes.setIntrinsic({width:t,height:i,viewBox:"0 0 "+t+" "+i})}})],u=[r.ViewRef({viewType:a.SvgIconView,createView(){const e=a.SvgIconView.create().setIntrinsic({attributes:{opacity:0,pointerEvents:"none"},style:{position:"absolute",left:0,top:0,transform:l.Transform.rotate(l.Angle.deg(-90))}});return e.iconLayout.setInherits(!0),e.iconColor.setInherits(!0),e},push(e,i){i=(void 0!==i||0!==this.owner.icons.viewCount)&&(void 0===i||!0===i?this.owner.getLookOr(s.Look.timing,!1):t.Timing.fromLike(i));const n=this.view;null!==n&&(!1!==i?n.attributes.setIntrinsic({opacity:0,transform:l.Transform.rotate(l.Angle.deg(90))},i):this.owner.icons.deleteView(n));const r=this.createView().setIntrinsic({graphics:e});return this.owner.icons.attachView(r),this.insertView(void 0,r),r.attributes.setIntrinsic({opacity:1,transform:l.Transform.rotate(l.Angle.deg(0))},i),r},pop(e){e=void 0===e||!0===e?this.owner.getLookOr(s.Look.timing,!1):t.Timing.fromLike(e);const i=this.view;let n=null;const r=this.owner.icons.views;for(const e in r){const t=r[e];t!==i&&(n=t)}return null!==i&&(!1!==e?(i.attributes.setIntrinsic({opacity:0,transform:l.Transform.rotate(l.Angle.deg(-90))},e),this.owner.icons.insertView(void 0,i)):this.owner.icons.deleteView(i)),null!==n&&(this.insertView(void 0,n),n.attributes.setIntrinsic({opacity:1,transform:l.Transform.rotate(l.Angle.deg(0))},e)),i}})],p=[i.Property({valueType:Boolean,value:!0})],b=[r.PositionGesture({extends:!0,didStartHovering(){if(this.owner.hovers.value){this.owner.modifyMood(s.Feel.default,[[s.Feel.hovering,1]]);const e=this.owner.getLook(s.Look.timing);this.owner.style.backgroundColor.hasAffinity(i.Affinity.Intrinsic)&&this.owner.style.backgroundColor.setIntrinsic(this.owner.getLookOr(s.Look.backgroundColor,null),e)}},didStopHovering(){this.owner.modifyMood(s.Feel.default,[[s.Feel.hovering,void 0]]);const e=this.owner.getLook(s.Look.timing);if(this.owner.style.backgroundColor.hasAffinity(i.Affinity.Intrinsic)){let t=this.owner.getLookOr(s.Look.backgroundColor,null);null!==t&&(t=t.alpha(0)),this.owner.style.backgroundColor.setIntrinsic(t,e)}}})],m=[i.EventHandler({eventType:"click",handle(e){e.stopPropagation(),this.owner.callObservers("buttonDidPress",this.owner)}})],w(null,null,n,{kind:"field",name:"iconLayout",static:!1,private:!1,access:{has:e=>"iconLayout"in e,get:e=>e.iconLayout,set:(e,t)=>{e.iconLayout=t}},metadata:g},V,f),w(null,null,h,{kind:"field",name:"iconColor",static:!1,private:!1,access:{has:e=>"iconColor"in e,get:e=>e.iconColor,set:(e,t)=>{e.iconColor=t}},metadata:g},T,f),w(null,null,c,{kind:"field",name:"graphics",static:!1,private:!1,access:{has:e=>"graphics"in e,get:e=>e.graphics,set:(e,t)=>{e.graphics=t}},metadata:g},S,f),w(null,null,d,{kind:"field",name:"icons",static:!1,private:!1,access:{has:e=>"icons"in e,get:e=>e.icons,set:(e,t)=>{e.icons=t}},metadata:g},C,f),w(null,null,u,{kind:"field",name:"icon",static:!1,private:!1,access:{has:e=>"icon"in e,get:e=>e.icon,set:(e,t)=>{e.icon=t}},metadata:g},k,f),w(null,null,p,{kind:"field",name:"hovers",static:!1,private:!1,access:{has:e=>"hovers"in e,get:e=>e.hovers,set:(e,t)=>{e.hovers=t}},metadata:g},L,f),w(null,null,b,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}},metadata:g},D,f),w(null,null,m,{kind:"field",name:"click",static:!1,private:!1,access:{has:e=>"click"in e,get:e=>e.click,set:(e,t)=>{e.click=t}},metadata:g},I,f),g&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:g})})(),e})(),V=(()=>{var e;let t,a,h,c=n.HtmlView,d=[],u=[],p=[],g=[];return e=class extends c{constructor(e){super(e),this.disclosure=(v(this,d),v(this,u,void 0)),this.collapsedColor=v(this,p,void 0),this.expandedColor=v(this,g,void 0),this.initDisclosureButton()}initDisclosureButton(){this.setIntrinsic({classList:["disclosure-button"],style:{display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1,flexShrink:0,cursor:"pointer"}});this.appendChild(n.SvgView,"icon").attributes.setIntrinsic({width:24,height:24,viewBox:"0 0 24 24"}).appendChild("polygon","arrow").attributes.setIntrinsic({points:"0 4 -6 -2 -4.59 -3.41 0 1.17 4.59 -3.41 6 -2",transform:l.Transform.translate(12,12).rotate(l.Angle.deg(0))})}get icon(){return this.getChild("icon")}get arrow(){return this.icon.getChild("arrow")}needsDisplay(e){return 0==(this.flags&r.View.NeedsLayout)&&(e&=~r.View.NeedsLayout),e}onLayout(){super.onLayout();const e=this.disclosure.getPhaseOr(1),t=this.collapsedColor.value,s=this.expandedColor.value;if(null!==t&&null!==s&&this.arrow.attributes.fill.hasAffinity(i.Affinity.Intrinsic)){const i=t.interpolateTo(s);this.arrow.attributes.fill.setIntrinsic(i(e))}const n=l.Transform.translate(12,12).rotate(l.Angle.deg(-180*e));this.arrow.attributes.transform.setIntrinsic(n)}},(()=>{var i;const l="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(i=c[Symbol.metadata])&&void 0!==i?i:null):void 0;t=[o.ExpansionAnimator({inherits:!0,updateFlags:r.View.NeedsLayout})],a=[s.ThemeAnimator({valueType:o.Color,look:s.Look.textColor,inherits:!0,updateFlags:r.View.NeedsLayout})],h=[s.ThemeAnimator({valueType:o.Color,look:s.Look.accentColor,inherits:!0,updateFlags:r.View.NeedsLayout})],w(null,null,t,{kind:"field",name:"disclosure",static:!1,private:!1,access:{has:e=>"disclosure"in e,get:e=>e.disclosure,set:(e,t)=>{e.disclosure=t}},metadata:l},u,d),w(null,null,a,{kind:"field",name:"collapsedColor",static:!1,private:!1,access:{has:e=>"collapsedColor"in e,get:e=>e.collapsedColor,set:(e,t)=>{e.collapsedColor=t}},metadata:l},p,d),w(null,null,h,{kind:"field",name:"expandedColor",static:!1,private:!1,access:{has:e=>"expandedColor"in e,get:e=>e.expandedColor,set:(e,t)=>{e.expandedColor=t}},metadata:l},g,d),l&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),e})();class T{constructor(e,t,i,l,s,n,r,o,a,h,c,d,u,w,v){this.key=e,this.grow=t,this.shrink=i,this.basis=l,this.align=s,this.inAlign=n,this.outAlign=r,this.overlap=o,this.overpad=a,this.presence=h,this.inPresence=c,this.outPresence=d,this.width=u,this.left=w,this.right=v}withKey(e){return this.copy(e,this.grow,this.shrink,this.basis,this.align,this.inAlign,this.outAlign,this.overlap,this.overpad,this.presence,this.inPresence,this.outPresence,this.width,this.left,this.right)}withFlex(e,t,i){return i=void 0!==i?l.Length.fromLike(i):this.basis,this.copy(this.key,e,t,i,this.align,this.inAlign,this.outAlign,this.overlap,this.overpad,this.presence,this.inPresence,this.outPresence,this.width,this.left,this.right)}withAlign(e,t,i){return void 0===t&&(t=this.inAlign),void 0===i&&(i=this.outAlign),this.copy(this.key,this.grow,this.shrink,this.basis,e,t,i,this.overlap,this.overpad,this.presence,this.inPresence,this.outPresence,this.width,this.left,this.right)}withOverlap(e){return this.copy(this.key,this.grow,this.shrink,this.basis,this.align,this.inAlign,this.outAlign,e,this.overpad,this.presence,this.inPresence,this.outPresence,this.width,this.left,this.right)}withOverpad(e){return e=l.Length.fromLike(e),this.copy(this.key,this.grow,this.shrink,this.basis,this.align,this.inAlign,this.outAlign,this.overlap,e,this.presence,this.inPresence,this.outPresence,this.width,this.left,this.right)}withPresence(e,t,i){return e=void 0===e?this.presence:o.Presence.fromLike(e),t=void 0===t?this.inPresence:o.Presence.fromLike(t),i=void 0===i?this.outPresence:o.Presence.fromLike(i),this.copy(this.key,this.grow,this.shrink,this.basis,this.align,this.inAlign,this.outAlign,this.overlap,this.overpad,e,t,i,this.width,this.left,this.right)}resized(e,t,i){return null!==e&&(e=l.Length.fromLike(e)),null!==t&&(t=l.Length.fromLike(t)),null!==i&&(i=l.Length.fromLike(i)),this.copy(this.key,this.grow,this.shrink,this.basis,this.align,this.inAlign,this.outAlign,this.overlap,this.overpad,this.presence,this.inPresence,this.outPresence,e,t,i)}copy(e,t,i,l,s,n,r,o,a,h,c,d,u,w,v){return new T(e,t,i,l,s,n,r,o,a,h,c,d,u,w,v)}interpolateTo(e){return e instanceof T?S(this,e):null}equivalentTo(e,i){return this===e||e instanceof T&&(this.key===e.key&&t.Equivalent(this.grow,e.grow,i)&&t.Equivalent(this.shrink,e.shrink,i)&&this.basis.equivalentTo(e.basis,i)&&t.Equivalent(this.align,e.align,i)&&t.Equivalent(this.inAlign,e.inAlign,i)&&t.Equivalent(this.outAlign,e.outAlign,i)&&this.overlap===e.overlap&&this.overpad.equivalentTo(e.overpad,i)&&this.presence.equivalentTo(e.presence,i)&&t.Equivalent(this.inPresence,e.inPresence,i)&&t.Equivalent(this.outPresence,e.outPresence,i))}equals(e){return this===e||e instanceof T&&(this.key===e.key&&this.grow===e.grow&&this.shrink===e.shrink&&this.basis.equals(e.basis)&&this.align===e.align&&this.inAlign===e.inAlign&&this.outAlign===e.outAlign&&this.overlap===e.overlap&&this.overpad.equals(e.overpad)&&this.presence.equals(e.presence)&&t.Equals(this.inPresence,e.inPresence)&&t.Equals(this.outPresence,e.outPresence)&&t.Equals(this.width,e.width)&&t.Equals(this.left,e.left)&&t.Equals(this.right,e.right))}debug(e){return e=e.write("ToolLayout").write(46).write("create").write(40).debug(this.key).write(", ").debug(this.grow).write(", ").debug(this.shrink).write(", ").debug(this.basis).write(41),.5===this.align&&this.inAlign===this.align&&this.outAlign===this.align||(e=e.write(46).write("withAlign").write(40).debug(this.align).write(", ").debug(this.inAlign).write(", ").debug(this.outAlign).write(41)),void 0!==this.overlap&&(e=e.write(46).write("withOverlap").write(40).debug(this.overlap).write(41)),this.overpad.equals(l.Length.zero())||(e=e.write(46).write("withOverpad").write(40).debug(this.overpad).write(41)),this.presence.presented&&null!==this.inPresence&&this.inPresence.dismissed&&null!==this.outPresence&&this.outPresence.dismissed||(e=e.write(46).write("withPresence").write(40).debug(this.presence).write(", ").debug(this.inPresence).write(", ").debug(this.outPresence).write(41)),null===this.width&&null===this.left&&null===this.right||(e=e.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(41)),e}toString(){return h.Format.debug(this)}static create(e,t,i,s,n,r,a,h,c,d,u,w){return void 0===t&&(t=0),void 0===i&&(i=1),s=void 0!==s?l.Length.fromLike(s):l.Length.zero(),void 0===n&&(n=.5),void 0===r&&(r=n),void 0===a&&(a=n),c=void 0!==c?l.Length.fromLike(c):l.Length.zero(),d=void 0!==d?o.Presence.fromLike(d):o.Presence.presented(),u=void 0===u?o.Presence.dismissed():o.Presence.fromLike(u),w=void 0===w?o.Presence.dismissed():o.Presence.fromLike(w),new T(e,t,i,s,n,r,a,h,c,d,u,w,null,null,null)}static fromLike(e){if(null==e||e instanceof T)return e;if("object"==typeof e&&null!==e)return T.fromInit(e);throw new TypeError(""+e)}static fromInit(e){let t=e.key;void 0===t&&(t="");let i=e.grow;void 0===i&&(i=0);let s=e.shrink;void 0===s&&(s=1);let n=e.basis;n=void 0!==n?l.Length.fromLike(n):l.Length.zero();let r=e.align;void 0===r&&(r=.5);let a=e.inAlign;void 0===a&&(a=r);let h=e.outAlign;void 0===h&&(h=r);const c=e.overlap;let d=e.overpad;d=void 0!==d?l.Length.fromLike(d):l.Length.zero();let u=e.presence;u=void 0!==u?o.Presence.fromLike(u):o.Presence.presented();let w=e.inPresence;w=void 0===w?o.Presence.presented():o.Presence.fromLike(w);let v=e.outPresence;v=void 0===v?o.Presence.presented():o.Presence.fromLike(v);let p=e.width;p=null!=p?l.Length.fromLike(p):null;let g=e.left;g=null!=g?l.Length.fromLike(g):null;let b=e.right;return b=null!=b?l.Length.fromLike(b):null,new T(t,i,s,n,r,a,h,c,d,u,w,v,p,g,b)}}const S=function(e){const i=function(e,s){const n=function(e){const t=n.key,i=n.growInterpolator(e),l=n.shrinkInterpolator(e),s=n.basisInterpolator(e),r=n.alignInterpolator(e),o=n.inAlignInterpolator(e),a=n.outAlignInterpolator(e),h=n.overlapInterpolator(0===e?0:1),c=n.overpadInterpolator(e),d=n.presenceInterpolator(e),u=n.inPresenceInterpolator(e),w=n.outPresenceInterpolator(e),v=n.widthInterpolator(e),p=n.leftInterpolator(e),g=n.rightInterpolator(e);return new T(t,i,l,s,r,o,a,h,c,d,u,w,v,p,g)};Object.setPrototypeOf(n,i.prototype),n.key=s.key,n.growInterpolator=t.Interpolator(e.grow,s.grow),n.shrinkInterpolator=t.Interpolator(e.shrink,s.shrink),n.basisInterpolator=e.basis.interpolateTo(s.basis),n.alignInterpolator=t.Interpolator(e.align,s.align),n.inAlignInterpolator=t.Interpolator(e.inAlign,s.inAlign),n.outAlignInterpolator=t.Interpolator(e.outAlign,s.outAlign),n.overlapInterpolator=t.Interpolator(e.overlap,s.overlap),n.overpadInterpolator=e.overpad.interpolateTo(s.overpad),n.presenceInterpolator=e.presence.interpolateTo(s.presence),n.inPresenceInterpolator=t.Interpolator(e.inPresence,s.inPresence),n.outPresenceInterpolator=t.Interpolator(e.outPresence,s.outPresence);const r=e.width,o=s.width;if(e.align!==s.align&&r instanceof l.PxLength&&o instanceof l.PxLength){const e=r.value<o.value?0:1;n.widthInterpolator=t.StepInterpolator(r,o,e)}else n.widthInterpolator=t.Interpolator(r,o);return n.leftInterpolator=t.Interpolator(e.left,s.left),n.rightInterpolator=t.Interpolator(e.right,s.right),n};return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,Object.defineProperty(i.prototype,0,{get(){const e=this.key,t=this.growInterpolator[0],i=this.shrinkInterpolator[0],l=this.basisInterpolator[0],s=this.alignInterpolator[0],n=this.inAlignInterpolator[0],r=this.outAlignInterpolator[0],o=this.overlapInterpolator[0],a=this.overpadInterpolator[0],h=this.presenceInterpolator[0],c=this.inPresenceInterpolator[0],d=this.outPresenceInterpolator[0],u=this.widthInterpolator[0],w=this.leftInterpolator[0],v=this.rightInterpolator[0];return new T(e,t,i,l,s,n,r,o,a,h,c,d,u,w,v)},configurable:!0}),Object.defineProperty(i.prototype,1,{get(){const e=this.key,t=this.growInterpolator[1],i=this.shrinkInterpolator[1],l=this.basisInterpolator[1],s=this.alignInterpolator[1],n=this.inAlignInterpolator[1],r=this.outAlignInterpolator[1],o=this.overlapInterpolator[1],a=this.overpadInterpolator[1],h=this.presenceInterpolator[1],c=this.inPresenceInterpolator[1],d=this.outPresenceInterpolator[1],u=this.widthInterpolator[1],w=this.leftInterpolator[1],v=this.rightInterpolator[1];return new T(e,t,i,l,s,n,r,o,a,h,c,d,u,w,v)},configurable:!0}),i.prototype.equals=function(e){return this===e||e instanceof i&&(this.key===e.key&&this.growInterpolator.equals(e.growInterpolator)&&this.shrinkInterpolator.equals(e.shrinkInterpolator)&&this.basisInterpolator.equals(e.basisInterpolator)&&this.alignInterpolator.equals(e.alignInterpolator)&&this.inAlignInterpolator.equals(e.inAlignInterpolator)&&this.outAlignInterpolator.equals(e.outAlignInterpolator)&&this.overlapInterpolator.equals(e.overlapInterpolator)&&this.overpadInterpolator.equals(e.overpadInterpolator)&&this.presenceInterpolator.equals(e.presenceInterpolator)&&this.inPresenceInterpolator.equals(e.inPresenceInterpolator)&&this.outPresenceInterpolator.equals(e.outPresenceInterpolator)&&this.widthInterpolator.equals(e.widthInterpolator)&&this.leftInterpolator.equals(e.leftInterpolator)&&this.rightInterpolator.equals(e.rightInterpolator))},i}(t.Interpolator);class C{constructor(e,t,i,l,s){this.width=e,this.left=t,this.right=i,this.spacing=l,this.tools=s}getTool(e){const t=this.tools;for(let i=0;i<t.length;i+=1){const l=t[i];if(e===l.key)return l}return null}resized(e,i,s,n){if(e=l.Length.fromLike(e),void 0===i?i=this.left:null!==i&&(i=l.Length.fromLike(i)),void 0===s?s=this.right:null!==s&&(s=l.Length.fromLike(s)),void 0===n?n=this.spacing:null!==n&&(n=l.Length.fromLike(n)),t.Equals(this.width,e)&&t.Equals(this.left,i)&&t.Equals(this.right,s)&&t.Equals(this.spacing,n))return this;{const t=this.tools,l=t.length,r=new Array(l),o=e.pxValue(),a=null!==i?i.pxValue(o):0,h=null!==s?s.pxValue(o):0,c=null!==n?n.pxValue(o):0;let d=0,u=0,w=a+h,v=a,p=0;for(let e=0;e<l;e+=1){const i=t[e];0!==p&&(w+=c,v+=c);const l=i.basis.pxValue(o);r[e]=i.resized(l,v,o-l-v),d+=i.grow,u+=i.shrink,w+=l,v+=l,p+=1}if(w<o&&d>0){const e=o-w;let t=a,i=0;for(let s=0;s<l;s+=1){const l=r[s];0!==i&&(t+=c);const n=l.basis.pxValue(o)+e*(l.grow/d);r[s]=l.resized(n,t,o-n-t),t+=n,i+=1}}else if(w>o&&u>0){const e=w-o;let t=a,i=0;for(let s=0;s<l;s+=1){const l=r[s];0!==i&&(t+=c);const n=l.basis.pxValue(o)-e*(l.shrink/u);r[s]=l.resized(n,t,o-n-t),t+=n,i+=1}}return new C(e,i,s,n,r)}}interpolateTo(e){return e instanceof C?k(this,e):null}equivalentTo(e,t){if(this===e)return!0;if(e instanceof C){const i=this.tools,l=e.tools,s=i.length;if(s===l.length){for(let e=0;e<s;e+=1)if(!i[e].equivalentTo(l[e],t))return!1;return!0}}return!1}equals(e){return this===e||e instanceof C&&(t.Equals(this.width,e.width)&&t.Equals(this.left,e.left)&&t.Equals(this.right,e.right)&&t.Equals(this.spacing,e.spacing)&&t.Arrays.equal(this.tools,e.tools))}debug(e){e=e.write("BarLayout").write(46).write("of").write(40);for(let t=0;t<this.tools.length;t+=1)0!==t&&(e=e.write(", ")),e=e.debug(this.tools[t]);return e=e.write(41),null===this.width&&null===this.left&&null===this.right&&null===this.spacing||(e=e.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.spacing).write(41)),e}toString(){return h.Format.debug(this)}static of(...e){const t=e.length,i=new Array(t);for(let l=0;l<t;l+=1)i[l]=T.fromLike(e[l]);return new C(null,null,null,null,i)}static create(e){return new C(null,null,null,null,e)}static fromLike(e){if(null==e||e instanceof C)return e;if("object"==typeof e&&null!==e)return C.fromInit(e);throw new TypeError(""+e)}static fromInit(e){let t=e.width;t=null!=t?l.Length.fromLike(t):null;let i=e.left;i=null!=i?l.Length.fromLike(i):null;let s=e.right;s=null!=s?l.Length.fromLike(s):null;let n=e.spacing;n=null!=n?l.Length.fromLike(n):null;const r=e.tools.length,o=new Array(r);for(let t=0;t<r;t+=1)o[t]=T.fromLike(e.tools[t]);return new C(t,i,s,n,o)}}const k=function(e){const i=function(e,l){const s=function(e){const t=s.widthInterpolator(e),i=s.leftInterpolator(e),l=s.rightInterpolator(e),n=s.spacingInterpolator(e),r=s.toolInterpolators,o=new Array;for(let t=0;t<r.length;t+=1)o.push(r[t](e));return new C(t,i,l,n,o)};Object.setPrototypeOf(s,i.prototype),s.widthInterpolator=t.Interpolator(e.width,l.width),s.leftInterpolator=t.Interpolator(e.left,l.left),s.rightInterpolator=t.Interpolator(e.right,l.right),s.spacingInterpolator=t.Interpolator(e.spacing,l.spacing);const n=e.tools,r=l.tools,a=new Array;for(let e=0;e<n.length;e+=1){let t=n[e],i=l.getTool(t.key);null!==i||t.presence.dismissed||null===t.outPresence?null!==i&&t.presence.dismissed&&(t=t.withPresence(t.presence.asPresenting())):(i=t.withPresence(t.outPresence),i=i.withAlign(i.outAlign),t=t.withPresence(t.presence.asDismissing())),null!==i&&a.push(t.interpolateTo(i))}for(let t=0;t<r.length;t+=1){let i=r[t],l=e.getTool(i.key);if(null===l){const e=null!==i.inPresence?i.inPresence:i.presence;l=i.withPresence(e.asPresenting()),i=i.withPresence(o.Presence.presented()),l=l.withAlign(l.inAlign),a.push(l.interpolateTo(i))}}return s.toolInterpolators=a,s};return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,Object.defineProperty(i.prototype,0,{get(){const e=this.widthInterpolator[0],t=this.leftInterpolator[0],i=this.rightInterpolator[0],l=this.spacingInterpolator[0],s=this.toolInterpolators,n=new Array;for(let e=0;e<s.length;e+=1)n.push(s[e][0]);return new C(e,t,i,l,n)},configurable:!0}),Object.defineProperty(i.prototype,1,{get(){const e=this.widthInterpolator[1],t=this.leftInterpolator[1],i=this.rightInterpolator[1],l=this.spacingInterpolator[1],s=this.toolInterpolators,n=new Array;for(let e=0;e<s.length;e+=1)n.push(s[e][1]);return new C(e,t,i,l,n)},configurable:!0}),i.prototype.equals=function(e){if(this===e)return!0;if(e instanceof i&&this.widthInterpolator.equals(e.widthInterpolator)&&this.leftInterpolator.equals(e.leftInterpolator)&&this.rightInterpolator.equals(e.rightInterpolator)&&this.spacingInterpolator.equals(e.spacingInterpolator)){const t=this.toolInterpolators.length;if(t===e.toolInterpolators.length){for(let i=0;i<t;i+=1)if(!this.toolInterpolators[i].equals(e.toolInterpolators[i]))return!1;return!0}}return!1},i}(t.Interpolator);let L=(()=>{var e;let t,s,o=n.HtmlView,a=[],h=[],d=[];return e=class extends o{constructor(e){super(e),this.xAlign=(v(this,a),v(this,h,void 0)),this.effectiveWidth=v(this,d,void 0),this.initTool()}initTool(){this.classList.add("tool")}},(()=>{var n;const u="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=o[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[i.Animator({valueType:Number,value:.5,updateFlags:r.View.NeedsLayout})],s=[c.ConstraintProperty({valueType:l.Length,value:null})],w(null,null,t,{kind:"field",name:"xAlign",static:!1,private:!1,access:{has:e=>"xAlign"in e,get:e=>e.xAlign,set:(e,t)=>{e.xAlign=t}},metadata:u},h,a),w(null,null,s,{kind:"field",name:"effectiveWidth",static:!1,private:!1,access:{has:e=>"effectiveWidth"in e,get:e=>e.effectiveWidth,set:(e,t)=>{e.effectiveWidth=t}},metadata:u},d,a),u&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})})(),e})(),D=(()=>{var e;let t,i,l=L,s=[],o=[],a=[];return e=class extends l{constructor(){super(...arguments),this.content=(v(this,s),v(this,o,void 0)),this.gesture=v(this,a,void 0)}initTool(){super.initTool(),this.setIntrinsic({classList:["tool-title"],style:{overflowX:"hidden"}})}onLayout(){super.onLayout(),this.layoutTool()}layoutTool(){const e=this.content.view;if(null===e)return;const t=e.style.width.pxValue(),i=this.style.width.pxValue();e.style.setIntrinsic({left:(0!==i?i-t:t)*this.xAlign.value,top:0,height:this.style.height.value,lineHeight:this.style.height.value}),null===this.effectiveWidth.value&&0!==t&&this.effectiveWidth.set(t)}didPress(e,t){this.callObservers("viewDidPress",e,t,this)}didLongPress(e){this.callObservers("viewDidLongPress",e,this)}},(()=>{var h;const c="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(h=l[Symbol.metadata])&&void 0!==h?h:null):void 0;t=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,initView(e){e.style.setIntrinsic({position:"relative",left:0,top:0})},willAttachView(e){this.owner.callObservers("viewWillAttachContent",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachContent",e,this.owner)},fromLike(e){if(void 0===e||"string"==typeof e){let t=this.view;return null===t&&(t=this.createView()),t.text.setState(e),t}return super.fromLike(e)},createView:()=>n.HtmlView.fromTag("span").style.setIntrinsic({display:"block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflowX:"hidden",overflowY:"hidden"})})],i=[r.PositionGesture({bindsOwner:!0,didPress(e,t){!e.defaultPrevented&&this.owner.clientBounds.contains(e.x,e.y)&&this.owner.didPress(e,t)},didLongPress(e){e.defaultPrevented||this.owner.didLongPress(e)}})],w(null,null,t,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}},metadata:c},o,s),w(null,null,i,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}},metadata:c},a,s),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),e})(),I=(()=>{var e;let t,l,n,h,c,d,u,g,b,m=L,y=[],f=[],V=[],T=[],S=[],C=[],k=[],D=[],I=[];return e=class extends m{constructor(){super(...arguments),this.xAlign=(v(this,y),v(this,f,void 0)),this.iconLayout=v(this,V,void 0),this.graphics=v(this,T,void 0),this.svg=v(this,S,void 0),this.hovers=v(this,C,void 0),this.hover=v(this,k,void 0),this.glows=v(this,D,void 0),this.gesture=v(this,I,void 0)}initTool(){super.initTool(),this.setIntrinsic({classList:["tool-button"],style:{boxSizing:"border-box",borderRadius:4,overflow:"hidden",userSelect:"none",cursor:"pointer",backgroundColor:s.Look.backgroundColor}})}get iconColor(){return s.ThemeAnimator.getter()}onApplyTheme(e,t,l){if(super.onApplyTheme(e,t,l),!this.graphics.derived){const s=this.graphics.value;if(s instanceof a.Icon){const n=s.withTheme(e,t);this.graphics.setState(n,!!s.isThemed()&&l,i.Affinity.Reflexive)}}}onResize(){super.onResize(),this.requireUpdate(r.View.NeedsLayout)}needsDisplay(e){return 0==(this.flags&r.View.NeedsLayout)&&(e&=~r.View.NeedsLayout),e}onLayout(){super.onLayout(),this.layoutTool()}layoutTool(){const e=this.svg.view;if(null===e||!e.attributes.width.hasAffinity(i.Affinity.Intrinsic)&&!e.attributes.height.hasAffinity(i.Affinity.Intrinsic)&&!e.attributes.viewBox.hasAffinity(i.Affinity.Intrinsic))return;const t=this.style.width.pxValue(),l=this.style.height.pxValue();e.attributes.setIntrinsic({width:t,height:l,viewBox:"0 0 "+t+" "+l}),this.effectiveWidth.set(t)}glow(e){if(e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0),void 0===e.detail){const t="mouse"===e.inputType?0:100;e.detail=this.prependChild(p),e.detail.glow(e.x,e.y,void 0,t)}}didPress(e,t){this.callObservers("viewDidPress",e,t,this)}didLongPress(e){this.callObservers("viewDidLongPress",e,this)}},(()=>{var v;const L="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=m[Symbol.metadata])&&void 0!==v?v:null):void 0;t=[i.Animator({valueType:Number,value:.5,updateFlags:r.View.NeedsLayout})],l=[i.Animator({valueType:a.IconLayout,value:null,updateFlags:r.View.NeedsLayout})],n=[s.ThemeAnimator({valueType:o.Color,value:null,updateFlags:r.View.NeedsLayout,didSetState(e){const t=null!==this.timing&&this.timing;this.owner.graphics.setState(this.owner.graphics.state,t,i.Affinity.Reflexive)}})],h=[s.ThemeAnimator({extends:a.IconGraphicsAnimator,valueType:a.Graphics,value:null,updateFlags:r.View.NeedsLayout,didSetValue(e,t){this.owner.callObservers("viewDidSetGraphics",e,this.owner)}})],c=[r.ViewRef({viewType:a.SvgIconView,viewKey:!0,binds:!0,init(){this.insertView()},initView(e){e.style.position.set("absolute"),e.iconLayout.setInherits(!0),e.iconColor.setInherits(!0),e.graphics.setInherits(!0)}})],d=[i.Property({valueType:Boolean,value:!0,inherits:!0})],u=[o.FocusAnimator({value:o.Focus.unfocused(),get transition(){return this.owner.getLookOr(s.Look.timing,null)},didSetValue(e,t){this.owner.modifyMood(s.Feel.default,[[s.Feel.transparent,1-e.phase]],!1)},init(){this.owner.modifyMood(s.Feel.default,[[s.Feel.hovering,1],[s.Feel.translucent,1],[s.Feel.transparent,1-this.value.phase]],!1)}})],g=[i.Property({valueType:Boolean,value:!0,inherits:!0})],b=[r.PositionGesture({bindsOwner:!0,observes:!0,viewDidUnmount(){this.owner.hover.unfocus(!1)},didStartHovering(){this.owner.hovers.value&&this.owner.hover.focus(!1)},didStopHovering(){this.owner.hovers.value&&this.owner.hover.unfocus()},didBeginPress(e,t){this.owner.glows.value&&this.owner.glow(e)},didMovePress(e,t){e.isRunaway()?this.cancelPress(e,t):this.owner.clientBounds.contains(e.x,e.y)||(e.clearHoldTimer(),this.beginHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0))},didEndPress(e,t){this.owner.clientBounds.contains(e.x,e.y)?e.detail instanceof p&&e.detail.pulse(e.x,e.y):(this.endHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0))},didCancelPress(e,t){this.owner.clientBounds.contains(e.x,e.y)||this.endHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0)},didPress(e,t){!e.defaultPrevented&&this.owner.clientBounds.contains(e.x,e.y)&&this.owner.didPress(e,t)},didLongPress(e){e.defaultPrevented||this.owner.didLongPress(e)}})],w(e,null,n,{kind:"getter",name:"iconColor",static:!1,private:!1,access:{has:e=>"iconColor"in e,get:e=>e.iconColor},metadata:L},null,y),w(null,null,t,{kind:"field",name:"xAlign",static:!1,private:!1,access:{has:e=>"xAlign"in e,get:e=>e.xAlign,set:(e,t)=>{e.xAlign=t}},metadata:L},f,y),w(null,null,l,{kind:"field",name:"iconLayout",static:!1,private:!1,access:{has:e=>"iconLayout"in e,get:e=>e.iconLayout,set:(e,t)=>{e.iconLayout=t}},metadata:L},V,y),w(null,null,h,{kind:"field",name:"graphics",static:!1,private:!1,access:{has:e=>"graphics"in e,get:e=>e.graphics,set:(e,t)=>{e.graphics=t}},metadata:L},T,y),w(null,null,c,{kind:"field",name:"svg",static:!1,private:!1,access:{has:e=>"svg"in e,get:e=>e.svg,set:(e,t)=>{e.svg=t}},metadata:L},S,y),w(null,null,d,{kind:"field",name:"hovers",static:!1,private:!1,access:{has:e=>"hovers"in e,get:e=>e.hovers,set:(e,t)=>{e.hovers=t}},metadata:L},C,y),w(null,null,u,{kind:"field",name:"hover",static:!1,private:!1,access:{has:e=>"hover"in e,get:e=>e.hover,set:(e,t)=>{e.hover=t}},metadata:L},k,y),w(null,null,g,{kind:"field",name:"glows",static:!1,private:!1,access:{has:e=>"glows"in e,get:e=>e.glows,set:(e,t)=>{e.glows=t}},metadata:L},D,y),w(null,null,b,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}},metadata:L},I,y),L&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:L})})(),e})(),O=(()=>{var e;let t,i,a,h,c,d,u=L,p=[],g=[],b=[],m=[],y=[],f=[],V=[];return e=class extends u{constructor(){super(...arguments),this.input=(v(this,p),v(this,g,void 0)),this.stylesheet=v(this,b,void 0),this.inputRule=v(this,m,void 0),this.inputFocusRule=v(this,y,void 0),this.inputPlaceholderRule=v(this,f,void 0),this.inputSearchCancelButtonRule=v(this,V,void 0)}initTool(){super.initTool(),this.classList.add("tool-search")}onLayout(){super.onLayout(),this.layoutTool()}layoutTool(){const e=this.input.view;if(null===e)return;const t=this.style.width.pxValue(),i=this.style.height.pxValue(),l=e.style.width.pxValue(),s=t-l,n=i-e.style.height.pxValue();e.style.setIntrinsic({left:(0!==t?s:l)*this.xAlign.value,top:.5*n}),this.effectiveWidth.set(l)}},(()=>{var v;const T="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=u[Symbol.metadata])&&void 0!==v?v:null):void 0;t=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,init(){this.onInput=this.onInput.bind(this),this.onKeyDown=this.onKeyDown.bind(this)},initView(e){e.style.setIntrinsic({position:"relative",left:0,top:0,width:l.Length.pct(100),height:30})},willAttachView(e){this.owner.callObservers("viewWillAttachInput",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachInput",e,this.owner)},didAttachView(e){e.addEventListener("input",this.onInput),e.addEventListener("keydown",this.onKeyDown)},willDetachView(e){e.removeEventListener("input",this.onInput),e.removeEventListener("keydown",this.onKeyDown)},onInput(e){const t=this.view;if(null!==t){const e=t.node.value;this.owner.callObservers("viewDidUpdateSearch",e,t,this.owner)}},onKeyDown(e){const t=this.view;if(null!==t)if("Enter"===e.key){const e=t.node.value;this.owner.callObservers("viewDidSubmitSearch",e,t,this.owner)}else"Escape"===e.key&&this.owner.callObservers("viewDidCancelSearch",t,this.owner)},createView:()=>n.HtmlView.fromTag("input").setIntrinsic({attributes:{type:"search"},style:{paddingTop:3,paddingRight:15,paddingBottom:3,paddingLeft:15,userSelect:"none"}})})],i=[r.ViewRef({viewType:n.StyleView,viewKey:!0,binds:!0})],a=[n.StyleRule({inherits:!0,get parent(){const e=this.owner.stylesheet.view;return null!==e?e.sheet:null},selector:"input",init(){this.style.setIntrinsic({appearance:"none",borderWidth:1,borderStyle:"solid",borderColor:s.Look.borderColor,borderRadius:10,outlineWidth:0,outlineStyle:"none",outlineColor:o.Color.transparent(),backgroundColor:o.Color.transparent(),color:s.Look.textColor}),this.setStyle("transition","border 100ms ease-out")}})],h=[n.StyleRule({inherits:!0,get parent(){const e=this.owner.stylesheet.view;return null!==e?e.sheet:null},selector:"input:focus",init(){this.style.setIntrinsic({borderWidth:2,borderColor:s.Look.focusColor}),this.setStyle("transition","border 100ms ease-out")}})],c=[n.StyleRule({inherits:!0,get parent(){const e=this.owner.stylesheet.view;return null!==e?e.sheet:null},selector:"input::placeholder",init(){this.style.color.setIntrinsic(s.Look.placeholderColor)}})],d=[n.StyleRule({inherits:!0,get parent(){const e=this.owner.stylesheet.view;return null!==e?e.sheet:null},selector:"input::-webkit-search-cancel-button",init(){this.setStyle("-webkit-appearance","none")}})],w(null,null,t,{kind:"field",name:"input",static:!1,private:!1,access:{has:e=>"input"in e,get:e=>e.input,set:(e,t)=>{e.input=t}},metadata:T},g,p),w(null,null,i,{kind:"field",name:"stylesheet",static:!1,private:!1,access:{has:e=>"stylesheet"in e,get:e=>e.stylesheet,set:(e,t)=>{e.stylesheet=t}},metadata:T},b,p),w(null,null,a,{kind:"field",name:"inputRule",static:!1,private:!1,access:{has:e=>"inputRule"in e,get:e=>e.inputRule,set:(e,t)=>{e.inputRule=t}},metadata:T},m,p),w(null,null,h,{kind:"field",name:"inputFocusRule",static:!1,private:!1,access:{has:e=>"inputFocusRule"in e,get:e=>e.inputFocusRule,set:(e,t)=>{e.inputFocusRule=t}},metadata:T},y,p),w(null,null,c,{kind:"field",name:"inputPlaceholderRule",static:!1,private:!1,access:{has:e=>"inputPlaceholderRule"in e,get:e=>e.inputPlaceholderRule,set:(e,t)=>{e.inputPlaceholderRule=t}},metadata:T},f,p),w(null,null,d,{kind:"field",name:"inputSearchCancelButtonRule",static:!1,private:!1,access:{has:e=>"inputSearchCancelButtonRule"in e,get:e=>e.inputSearchCancelButtonRule,set:(e,t)=>{e.inputSearchCancelButtonRule=t}},metadata:T},V,p),T&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:T})})(),e})(),A=(()=>{var e;let t,l,s=d.Controller,n=[],r=[],o=[];return e=class extends s{constructor(){super(...arguments),this.tool=(v(this,n),v(this,r,void 0)),this.layout=v(this,o,void 0)}},(()=>{var a;const h="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(a=s[Symbol.metadata])&&void 0!==a?a:null):void 0;t=[d.TraitViewRef({viewType:L,observesView:!0,willAttachView(e){this.owner.callObservers("controllerWillAttachToolView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachToolView",e,this.owner)},viewDidPress(e,t){this.owner.callObservers("controllerDidPressToolView",e,t,this.owner)},viewDidLongPress(e){this.owner.callObservers("controllerDidLongPressToolView",e,this.owner)}})],l=[i.Property({valueType:T,value:null,didSetValue(e){this.owner.callObservers("controllerDidSetToolLayout",e,this.owner)}})],w(null,null,t,{kind:"field",name:"tool",static:!1,private:!1,access:{has:e=>"tool"in e,get:e=>e.tool,set:(e,t)=>{e.tool=t}},metadata:h},r,n),w(null,null,l,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}},metadata:h},o,n),h&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h})})(),e})(),P=(()=>{var e;let t,i,l=A,s=[],o=[],a=[];return e=class extends l{constructor(){super(...arguments),this.tool=(v(this,s),v(this,o,void 0)),this.content=v(this,a,void 0)}},(()=>{var h;const c="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(h=l[Symbol.metadata])&&void 0!==h?h:null):void 0;t=[d.TraitViewRef({extends:!0,viewType:D,observesView:!0,initView(e){this.owner.content.setView(e.content.view)},deinitView(e){this.owner.content.setView(null)},viewWillAttachContent(e){this.owner.content.setView(e)},viewDidDetachContent(e){this.owner.content.setView(null)}})],i=[r.ViewRef({viewType:n.HtmlView,willAttachView(e){this.owner.callObservers("controllerWillAttachToolContentView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachToolContentView",e,this.owner)}})],w(null,null,t,{kind:"field",name:"tool",static:!1,private:!1,access:{has:e=>"tool"in e,get:e=>e.tool,set:(e,t)=>{e.tool=t}},metadata:c},o,s),w(null,null,i,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}},metadata:c},a,s),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),e})(),x=(()=>{var e;let t,i=A,l=[],s=[];return e=class extends i{constructor(){super(...arguments),this.tool=(v(this,l),v(this,s,void 0))}},(()=>{var n;const r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=i[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[d.TraitViewRef({extends:!0,viewType:I,observesView:!0,viewDidSetGraphics(e){this.owner.callObservers("controllerDidSetToolIcon",e,this.owner)}})],w(null,null,t,{kind:"field",name:"tool",static:!1,private:!1,access:{has:e=>"tool"in e,get:e=>e.tool,set:(e,t)=>{e.tool=t}},metadata:r},s,l),r&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),e})(),B=(()=>{var e;let t,i,l=A,s=[],o=[],a=[];return e=class extends l{constructor(){super(...arguments),this.tool=(v(this,s),v(this,o,void 0)),this.input=v(this,a,void 0)}},(()=>{var h;const c="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(h=l[Symbol.metadata])&&void 0!==h?h:null):void 0;t=[d.TraitViewRef({extends:!0,viewType:O,observesView:!0,initView(e){this.owner.input.setView(e.input.view)},deinitView(e){this.owner.input.setView(null)},viewWillAttachInput(e){this.owner.input.setView(e)},viewDidDetachInput(e){this.owner.input.setView(null)},viewDidUpdateSearch(e,t){this.owner.callObservers("controllerDidUpdateSearch",e,t,this.owner)},viewDidSubmitSearch(e,t){this.owner.callObservers("controllerDidSubmitSearch",e,t,this.owner)},viewDidCancelSearch(e){this.owner.callObservers("controllerDidCancelSearch",e,this.owner)}})],i=[r.ViewRef({viewType:n.HtmlView,willAttachView(e){this.owner.callObservers("controllerWillAttachToolInputView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachToolInputView",e,this.owner)}})],w(null,null,t,{kind:"field",name:"tool",static:!1,private:!1,access:{has:e=>"tool"in e,get:e=>e.tool,set:(e,t)=>{e.tool=t}},metadata:c},o,s),w(null,null,i,{kind:"field",name:"input",static:!1,private:!1,access:{has:e=>"input"in e,get:e=>e.input,set:(e,t)=>{e.input=t}},metadata:c},a,s),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),e})(),R=(()=>{var e;let t,o,a,h,c,d,u=n.HtmlView,p=[],g=[],b=[],m=[],y=[],f=[];return e=class extends u{constructor(e){super(e),this.placement=(v(this,p),v(this,g,void 0)),this.layout=v(this,b,void 0),this.barHeight=v(this,m,void 0),this.toolSpacing=v(this,y,void 0),this.tools=v(this,f,void 0),this.initBar()}initBar(){this.setIntrinsic({classList:["bar"],style:{position:"relative",overflow:"hidden",userSelect:"none"}}),this.modifyMood(s.Feel.default,[[s.Feel.primary,1]])}get edgeInsets(){return i.Property.getter()}getTool(e,t){void 0===t&&(t=L);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateTool(e,t){let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setTool(e,t){this.setChild(e,t)}onResize(){super.onResize(),this.resizeBar()}resizeBar(){const e=this.placement.value;"top"===e?this.resizeBarTop():"bottom"===e?this.resizeBarBottom():"none"===e&&this.resizeBarNone()}resizeBarTop(){this.classList.remove("bar-bottom"),this.classList.add("bar-top");const e=this.edgeInsets.value;let t=this.barHeight.value;null!==t&&(t=t.plus(e.insetTop),this.style.height.setIntrinsic(t));const i=this.layout.derived?null:this.layout.state;if(null!=i){const t=this.style.width.pxState(),l=e.insetLeft,s=e.insetRight,n=this.toolSpacing.getValue().pxValue(t),r=i.resized(t,l,s,n);this.layout.set(r)}}resizeBarBottom(){this.classList.remove("bar-top"),this.classList.add("bar-bottom");const e=this.edgeInsets.value;let t=this.barHeight.value;null!==t&&(t=t.plus(e.insetBottom),this.style.height.setIntrinsic(t));const i=this.layout.derived?null:this.layout.state;if(null!=i){const t=this.style.width.pxState(),l=e.insetLeft,s=e.insetRight,n=this.toolSpacing.getValue().pxValue(t),r=i.resized(t,l,s,n);this.layout.set(r)}}resizeBarNone(){this.classList.remove("bar-top"),this.classList.remove("bar-bottom");const e=this.layout.derived?null:this.layout.state;if(null!=e){const t=this.style.width.pxState(),i=this.toolSpacing.getValue().pxValue(t),l=e.resized(t,0,0,i);this.layout.set(l)}}displayChildren(e,t){0!=(e&r.View.NeedsLayout)?this.layoutChildren(e,t):super.displayChildren(e,t)}layoutChildren(e,t){const s=this.placement.value,n=this.edgeInsets.value,r="top"===s?l.Length.px(n.insetTop):null,o="bottom"===s?l.Length.px(n.insetBottom):null,a=this.barHeight.value,h=this.layout.value;super.displayChildren(e,(function(e,l){if(e instanceof L){const t=e.key,l=null!==h&&void 0!==t?h.getTool(t):null;null!==l?(e.xAlign.setIntrinsic(l.align),e.style.setIntrinsic({display:l.presence.dismissed?"none":"flex",left:l.left,top:r,bottom:o,width:null!==l.width&&0!==l.width.value?l.width:null,height:a,opacity:1!==l.presence.phase?l.presence.phase:void 0}),e.style.pointerEvents.setState(l.presence.dismissing?"none":void 0,i.Affinity.Transient),l.presence.dismissed&&this.callObservers("viewDidDismissTool",e,l,this)):(e.style.setIntrinsic({display:"none",left:null,top:null,bottom:null,width:null,height:null,opacity:void 0}),e.style.pointerEvents.setState(void 0,i.Affinity.Transient))}t.call(this,e,l)}))}didLayout(){this.layoutTools(),super.didLayout()}layoutTools(){const e=this.layout.value,t=null!==e?e.tools:null,i=null!==t?t.length:0;for(let e=0;e<i;e+=1){const i=t[e],l=this.getChild(i.key);if(l instanceof L)if(void 0!==i.overlap){const e=this.getChild(i.overlap);if(e instanceof L){const t=l.node.offsetLeft,s=l.node.offsetLeft;let n=e.effectiveWidth.value;null!==n&&(n=n.plus(i.overpad)),t<=s?l.style.setIntrinsic({paddingLeft:null,paddingRight:n}):l.style.setIntrinsic({paddingLeft:n,paddingRight:null})}else l.style.setIntrinsic({paddingLeft:null,paddingRight:null})}else l.style.setIntrinsic({paddingLeft:null,paddingRight:null})}}},(()=>{var n;const v="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=u[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[i.Property({valueType:String,value:"none",updateFlags:r.View.NeedsResize|r.View.NeedsLayout,didSetValue(e){this.owner.callObservers("viewDidSetPlacement",e,this.owner),this.owner.barHeight.applyEdgeInsets(this.owner.edgeInsets.value),this.owner.edgeInsets.decohereOutlets()}})],o=[i.Animator({valueType:C,value:null,inherits:!0,updateFlags:r.View.NeedsLayout,didSetValue(e,t){null!==e&&null===e.width&&this.owner.requireUpdate(r.View.NeedsResize),this.owner.callObservers("viewDidSetBarLayout",e,this.owner)},transformState(e){return null!==e&&null===e.width&&(e=this.resized(e)),e},resized(e){const t=this.value;return null!==t&&null!==t.width&&(e=e.resized(t.width,t.left,t.right,t.spacing)),e}})],a=[s.ThemeConstraintAnimator({valueType:l.Length,value:null,updateFlags:r.View.NeedsResize,didSetValue(e){this.owner.callObservers("viewDidSetBarHeight",e,this.owner),this.applyEdgeInsets(this.owner.edgeInsets.value)},applyEdgeInsets(e){let t=this.value;if(null!==t){const i=this.owner.placement.value;"top"===i?t=t.plus(e.insetTop):"bottom"===i&&(t=t.plus(e.insetBottom)),this.owner.style.height.setIntrinsic(t)}}})],h=[i.Property({valueType:l.Length,value:l.Length.zero(),updateFlags:r.View.NeedsResize})],c=[i.Property({extends:!0,didSetValue(e){this.owner.barHeight.applyEdgeInsets(e)},getOutletValue(e){let t=this.value,i=t.insetTop;const l=t.insetRight;let s=t.insetBottom;const n=t.insetLeft,r=this.owner.placement.value;return"top"===r&&0!==s?(s=0,t={insetTop:i,insetRight:l,insetBottom:s,insetLeft:n}):"bottom"===r&&0!==i&&(i=0,t={insetTop:i,insetRight:l,insetBottom:s,insetLeft:n}),t}})],d=[r.ViewSet({viewType:L,binds:!0,initView(e){e.style.setIntrinsic({display:"none",position:"absolute",left:0,width:0,height:this.owner.barHeight.value})},willAttachView(e,t){this.owner.callObservers("viewWillAttachTool",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachTool",e,this.owner)}})],w(e,null,c,{kind:"getter",name:"edgeInsets",static:!1,private:!1,access:{has:e=>"edgeInsets"in e,get:e=>e.edgeInsets},metadata:v},null,p),w(null,null,t,{kind:"field",name:"placement",static:!1,private:!1,access:{has:e=>"placement"in e,get:e=>e.placement,set:(e,t)=>{e.placement=t}},metadata:v},g,p),w(null,null,o,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}},metadata:v},b,p),w(null,null,a,{kind:"field",name:"barHeight",static:!1,private:!1,access:{has:e=>"barHeight"in e,get:e=>e.barHeight,set:(e,t)=>{e.barHeight=t}},metadata:v},m,p),w(null,null,h,{kind:"field",name:"toolSpacing",static:!1,private:!1,access:{has:e=>"toolSpacing"in e,get:e=>e.toolSpacing,set:(e,t)=>{e.toolSpacing=t}},metadata:v},y,p),w(null,null,d,{kind:"field",name:"tools",static:!1,private:!1,access:{has:e=>"tools"in e,get:e=>e.tools,set:(e,t)=>{e.tools=t}},metadata:v},f,p),v&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:v})})(),e})(),W=(()=>{var e;let t,i,l=d.Controller,n=[],o=[],a=[];return e=class extends l{constructor(){super(...arguments),this.bar=(v(this,n),v(this,o,void 0)),this.tools=v(this,a,void 0)}createLayout(){const e=new Array,t=this.tools.controllers;for(const i in t){const l=t[i].layout.value;null!==l&&e.push(l)}return C.create(e)}updateLayout(){const e=this.bar.view;if(null===e)return;const t=this.createLayout();if(null===t)return;const i=e.getLookOr(s.Look.timing,s.Mood.navigating,!1);e.layout.set(t,i),e.requireUpdate(r.View.NeedsResize,!0)}getTool(e,t){void 0===t&&(t=A);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateTool(e,t){let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setTool(e,t){this.setChild(e,t)}getToolView(e,t){const i=this.bar.view;return null!==i?i.getTool(e,t):null}getOrCreateToolView(e,t){let i=this.bar.view;if(null===i){if(i=this.bar.createView(),null===i)throw new Error("no bar view");this.bar.setView(i)}return i.getOrCreateTool(e,t)}setToolView(e,t){let i=this.bar.view;if(null===i){if(i=this.bar.createView(),null===i)throw new Error("no bar view");this.bar.setView(i)}i.setTool(e,t)}onAssemble(){super.onAssemble(),this.updateLayout()}},(()=>{var s;const r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(s=l[Symbol.metadata])&&void 0!==s?s:null):void 0;t=[d.TraitViewRef({viewType:R,observesView:!0,initView(e){const t=this.owner.tools.controllers;for(const i in t){const l=t[i],s=l.tool.view;null!==s&&null===s.parent&&l.tool.insertView(e)}},willAttachView(e){this.owner.callObservers("controllerWillAttachBarView",e,this.owner)},didAttachView(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},didDetachView(e){this.owner.callObservers("controllerDidDetachBarView",e,this.owner)},viewDidSetBarLayout(e){this.owner.callObservers("controllerDidSetBarLayout",e,this.owner)},viewDidDismissTool(e,t,i){e.remove()}})],i=[d.TraitViewControllerSet({controllerType:A,binds:!0,observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,willAttachController(e){this.owner.callObservers("controllerWillAttachTool",e,this.owner)},didAttachController(e){const t=e.tool.view;null!==t&&this.attachToolView(t,e),this.owner.requireUpdate(d.Controller.NeedsAssemble)},willDetachController(e){const t=e.tool.view;null!==t&&this.detachToolView(t,e)},didDetachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble),this.owner.callObservers("controllerDidDetachTool",e,this.owner)},controllerWillAttachToolView(e,t){this.owner.callObservers("controllerWillAttachToolView",e,t,this.owner),this.attachToolView(e,t)},controllerDidDetachToolView(e,t){this.detachToolView(e,t),this.owner.callObservers("controllerDidDetachToolView",e,t,this.owner)},attachToolView(e,t){if(e instanceof D){const i=e.content.view;null!==i&&this.attachToolContentView(i,t)}},detachToolView(e,t){if(e instanceof D){const i=e.content.view;null!==i&&this.detachToolContentView(i,t)}e.remove()},controllerDidSetToolLayout(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble),this.owner.callObservers("controllerDidSetToolLayout",e,t,this.owner)},controllerWillAttachToolContentView(e,t){this.attachToolContentView(e,t),this.owner.callObservers("controllerWillAttachToolContentView",e,t,this.owner)},controllerDidDetachToolContentView(e,t){this.owner.callObservers("controllerDidDetachToolContentView",e,t,this.owner),this.detachToolContentView(e,t)},attachToolContentView(e,t){},detachToolContentView(e,t){},controllerDidSetToolIcon(e,t){this.owner.callObservers("controllerDidSetToolIcon",e,t,this.owner)},controllerDidUpdateSearch(e,t,i){this.owner.callObservers("controllerDidUpdateSearchTool",e,t,i,this.owner)},controllerDidSubmitSearch(e,t,i){this.owner.callObservers("controllerDidSubmitSearchTool",e,t,i,this.owner)},controllerDidCancelSearch(e,t){this.owner.callObservers("controllerDidCancelSearchTool",e,t,this.owner)},controllerDidPressToolView(e,t,i){this.owner.callObservers("controllerDidPressToolView",e,t,i,this.owner)},controllerDidLongPressToolView(e,t){this.owner.callObservers("controllerDidLongPressToolView",e,t,this.owner)}})],w(null,null,t,{kind:"field",name:"bar",static:!1,private:!1,access:{has:e=>"bar"in e,get:e=>e.bar,set:(e,t)=>{e.bar=t}},metadata:r},o,n),w(null,null,i,{kind:"field",name:"tools",static:!1,private:!1,access:{has:e=>"tools"in e,get:e=>e.tools,set:(e,t)=>{e.tools=t}},metadata:r},a,n),r&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),e})(),H=(()=>{var e;let o,h,c,d,u,p,g,b,m,y,f,V,T,S,C=n.HtmlView,k=[],L=[],D=[],I=[],O=[],A=[],P=[],x=[],B=[],R=[],W=[],H=[],F=[],M=[],N=[];return e=class extends C{constructor(e){super(e),this.tokenState=void v(this,k),this.expandedPhase=v(this,L,void 0),this.shape=v(this,D,void 0),this.head=v(this,I,void 0),this.headGesture=v(this,O,void 0),this.headIcon=v(this,A,void 0),this.icon=v(this,P,void 0),this.body=v(this,x,void 0),this.bodyGesture=v(this,B,void 0),this.foot=v(this,R,void 0),this.footGesture=v(this,W,void 0),this.footIcon=v(this,H,void 0),this.accessory=v(this,F,void 0),this.labelContainer=v(this,M,void 0),this.label=v(this,N,void 0),this.tokenState="expanded",this.onClickHead=this.onClickHead.bind(this),this.onClickBody=this.onClickBody.bind(this),this.onClickFoot=this.onClickFoot.bind(this),this.initToken()}initToken(){this.setIntrinsic({classList:["token"],style:{position:"relative",height:32,boxSizing:"content-box",userSelect:"none"}}),this.shape.insertView()}initShape(e){e.set({classList:["shape"],style:{position:"absolute",left:0,top:0}}),this.head.insertView(e),this.headIcon.attachView(),this.body.insertView(e),this.foot.insertView(e),this.footIcon.attachView()}initHead(e){e.setIntrinsic({classList:["head"],attributes:{fillRule:"evenodd",cursor:"pointer",pointerEvents:"bounding-box"}})}initHeadIcon(e){e.setIntrinsic({classList:["head-icon"],attributes:{pointerEvents:"none"}})}initBody(e){e.setIntrinsic({classList:["body"],attributes:{cursor:"pointer",pointerEvents:"fill"}})}initFoot(e){e.setIntrinsic({classList:["foot"],attributes:{fillRule:"evenodd",cursor:"pointer",pointerEvents:"bounding-box"}})}initFootIcon(e){e.setIntrinsic({classList:["foot-icon"],attributes:{pointerEvents:"none"}})}initLabelContainer(e){e.setIntrinsic({classList:["label"],style:{display:"block",position:"absolute",left:0,top:0,overflow:"hidden",pointerEvents:"none"}})}initLabel(e){e.style.setIntrinsic({position:"absolute",top:0,bottom:0,left:0})}get expanded(){return"expanded"===this.tokenState||"expanding"===this.tokenState}get collapsed(){return"collapsed"===this.tokenState||"collapsing"===this.tokenState}get fillLook(){return s.Look.accentColor}needsProcess(e){return 0!=(e&r.View.NeedsLayout)&&(e|=r.View.NeedsAnimate),e}onLayout(){super.onLayout(),this.layoutToken()}layoutToken(){const e=this.style.paddingTop.getStateOr(l.Length.zero()).pxValue(),t=this.style.paddingRight.getStateOr(l.Length.zero()).pxValue(),i=this.style.paddingBottom.getStateOr(l.Length.zero()).pxValue(),s=this.style.paddingLeft.getStateOr(l.Length.zero()).pxValue(),n=this.node.clientHeight,r=n-e-i,o=r/2,h=Math.sqrt(4+2*o*2),c=Math.asin(h/(o+2)),d=o/2,u=o,w=o/2,v=this.expandedPhase.value,p=this.icon.value,g=this.accessory.value;let b=0,m=0;const y=this.label.view;null!==y&&(b=y.node.clientWidth,m+=d+b+u);let f=0,V=0;null!==g&&(f=2*o,V+=f+w);let T=r;0!==v&&0!==m&&(T+=2+v*m);const S=T;0!==v&&0!==V&&(T+=2+v*V);const C=T+s+t,k=n;this.style.width.setIntrinsic(T);const L=this.labelContainer.view;null!==L&&L.style.setIntrinsic({display:0!==v?"block":"none",left:s+r+2+d,top:e,width:v*b,height:r});const D=this.shape.view;null!==D&&D.attributes.setIntrinsic({width:C,height:k,viewBox:"0 0 "+C+" "+k});const I=this.head.view;if(null!==I){const t=new a.PathContext;if(t.setPrecision(3),t.arc(s+o,e+o,o,-Math.PI/2,Math.PI/2*3),t.closePath(),null!==p&&!this.icon.embossed){const i=new a.PathRenderer(t),n=new l.R2Box(s,e,s+r,e+r);p.render(i,n),this.headIcon.removeView()}I.attributes.d.setIntrinsic(t.toString())}const O=this.headIcon.view;if(null!==O)if(null!==p&&this.icon.embossed){const t=new a.PathContext;t.setPrecision(3);const i=new a.PathRenderer(t),n=new l.R2Box(s,e,s+r,e+r);p.render(i,n),O.attributes.d.setIntrinsic(t.toString()),this.headIcon.insertView()}else this.headIcon.removeView();const A=this.body.view;if(null!==A){const t=new a.PathContext;if(t.setPrecision(3),0!==v){const i=1-v;t.arc(s+o,e+o,o+2,-Math.PI/2+c,Math.PI/2-c),t.arc(s+S-o-2*i,e+o,o+2*i,Math.PI/2-i*c,-Math.PI/2+i*c,!0),t.closePath()}A.attributes.d.setIntrinsic(t.toString())}const P=this.foot.view;if(null!==P&&null!==g){const t=new a.PathContext;if(t.setPrecision(3),0!==v){const i=1-v;if(t.arc(s+S-o,e+o,o+2,-Math.PI/2+c,Math.PI/2-c),t.arc(s+T-o-2*i,e+o,o+2*i,Math.PI/2-i*c,-Math.PI/2+i*c,!0),t.closePath(),null!==g&&!this.accessory.embossed){const i=new a.PathRenderer(t),n=new l.R2Box(s+S+2,e,s+S+2+2*o,e+2*o);g.render(i,n),this.headIcon.removeView()}}P.attributes.d.setIntrinsic(t.toString())}const x=this.footIcon.view;if(null!==x)if(null!==g&&this.accessory.embossed){const t=new a.PathContext;if(t.setPrecision(3),0!==v){const i=new a.PathRenderer(t),n=new l.R2Box(s+S+2,e,s+S+2+r,e+r);g.render(i,n)}x.attributes.d.setIntrinsic(t.toString()),this.footIcon.insertView()}else this.footIcon.removeView()}expand(e){"expanded"===this.tokenState&&1===this.expandedPhase.value||(e=void 0===e||!0===e?this.getLookOr(s.Look.timing,!1):t.Timing.fromLike(e),"expanding"!==this.tokenState&&(this.willExpand(),this.onExpand()),!1!==e?1!==this.expandedPhase.value?this.expandedPhase.setIntrinsic(1,e):setTimeout(this.didExpand.bind(this)):(this.expandedPhase.setIntrinsic(1),this.didExpand()))}willExpand(){this.tokenState="expanding";const e=this.labelContainer.view;null!==e&&e.style.display.setIntrinsic("block"),this.callObservers("tokenWillExpand",this)}onExpand(){}didExpand(){this.tokenState="expanded",this.requireUpdate(r.View.NeedsLayout),this.callObservers("tokenDidExpand",this)}collapse(e){"collapsed"===this.tokenState&&0===this.expandedPhase.value||(e=void 0===e||!0===e?this.getLookOr(s.Look.timing,!1):t.Timing.fromLike(e),"collapsing"!==this.tokenState&&(this.willCollapse(),this.onCollapse()),!1!==e?0!==this.expandedPhase.value?this.expandedPhase.setIntrinsic(0,e):setTimeout(this.didCollapse.bind(this)):(this.expandedPhase.setIntrinsic(0),this.didCollapse()))}willCollapse(){this.tokenState="collapsing",this.callObservers("tokenWillCollapse",this)}onCollapse(){const e=this.label.view;null!==e&&e.node.blur()}didCollapse(){this.tokenState="collapsed",this.requireUpdate(r.View.NeedsLayout),this.callObservers("tokenDidCollapse",this)}toggle(e){const t=this.tokenState;"collapsed"===t||"collapsing"===t?this.expand(e):"expanded"!==t&&"expanding"!==t||this.collapse(e)}onClickHead(e){this.toggle();const t=this.label.view;null!==t&&this.expanded&&t.node.focus(),this.didPressHead()}didPressHead(){this.callObservers("tokenDidPressHead",this)}onClickBody(e){this.didPressBody()}didPressBody(){this.callObservers("tokenDidPressBody",this)}onClickFoot(e){this.didPressFoot()}didPressFoot(){this.callObservers("tokenDidPressFoot",this)}},(()=>{var t;const l="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(t=C[Symbol.metadata])&&void 0!==t?t:null):void 0;o=[i.Animator({valueType:Number,value:1,updateFlags:r.View.NeedsLayout,didTransition(e){const t=this.owner.tokenState;"expanding"===t&&1===e?this.owner.didExpand():"collapsing"===t&&0===e&&this.owner.didCollapse()}})],h=[r.ViewRef({viewType:n.SvgView,viewKey:!0,binds:!0,didAttachView(e){this.owner.initShape(e)}})],c=[r.ViewRef({viewType:n.SvgView.forTag("path"),viewKey:!0,observes:!0,didAttachView(e){this.owner.initHead(e),this.owner.headGesture.setView(e)},willDetachView(e){this.owner.headGesture.setView(null)},viewDidMount(e){e.addEventListener("click",this.owner.onClickHead)},viewWillUnmount(e){e.removeEventListener("click",this.owner.onClickHead)},viewDidApplyTheme(e,t,l,n){n.attributes.fill.setIntrinsic(e.getOr(this.owner.fillLook,t,null),l);const r=this.owner.headIcon.view;if(null!==r&&r.attributes.fill.hasAffinity(i.Affinity.Intrinsic)){const i=e.getOr(this.owner.fillLook,t.updated(s.Feel.embossed,1),null);r.attributes.fill.setIntrinsic(i,l)}}})],d=[r.PositionGesture({didStartHovering(){const e=this.view;e.modifyMood(s.Feel.default,[[s.Feel.hovering,1]]);const t=e.getLook(s.Look.timing);e.attributes.fill.setIntrinsic(e.getLookOr(this.owner.fillLook,null),t);const l=this.owner.headIcon.view;if(null!==l&&l.attributes.fill.hasAffinity(i.Affinity.Intrinsic)){const i=e.getLookOr(this.owner.fillLook,e.mood.getValue().updated(s.Feel.embossed,1),null);l.attributes.fill.setIntrinsic(i,t)}},didStopHovering(){const e=this.view;e.modifyMood(s.Feel.default,[[s.Feel.hovering,void 0]]);const t=e.getLook(s.Look.timing);e.attributes.fill.setIntrinsic(e.getLookOr(this.owner.fillLook,null),t);const l=this.owner.headIcon.view;if(null!==l&&l.attributes.fill.hasAffinity(i.Affinity.Intrinsic)){const i=e.getLookOr(this.owner.fillLook,e.mood.getValue().updated(s.Feel.embossed,1),null);l.attributes.fill.setIntrinsic(i,t)}},didBeginPress(e,t){"mouse"!==e.inputType&&this.beginHover(e,t)},didMovePress(e,t){e.isRunaway()&&this.cancelPress(e,t)},didEndPress(e,t){"mouse"===e.inputType&&this.view.clientBounds.contains(e.x,e.y)||this.endHover(e,t)},didCancelPress(e,t){"mouse"===e.inputType&&this.view.clientBounds.contains(e.x,e.y)||this.endHover(e,t)}})],u=[r.ViewRef({viewType:n.SvgView.forTag("path"),viewKey:!0,didAttachView(e){this.owner.initHeadIcon(e)},insertChild(e,t,i,l){const s=this.owner.shape.view;null!==s&&s.insertChild(t,this.owner.body.view,l)}})],p=[i.Property({valueType:a.Graphics,value:null,updateFlags:r.View.NeedsLayout,init(){this.embossed=!0}})],g=[r.ViewRef({viewType:n.SvgView.forTag("path"),viewKey:!0,observes:!0,didAttachView(e){this.owner.initBody(e),this.owner.bodyGesture.setView(e)},willDetachView(e){this.owner.bodyGesture.setView(null)},viewDidMount(e){e.addEventListener("click",this.owner.onClickBody)},viewWillUnmount(e){e.removeEventListener("click",this.owner.onClickBody)},viewDidApplyTheme(e,t,l,n){n.attributes.fill.setIntrinsic(e.getOr(this.owner.fillLook,t,null),l);const r=this.owner.label.view;null!==r&&r.style.color.hasAffinity(i.Affinity.Intrinsic)&&r.style.color.setIntrinsic(e.getOr(s.Look.backgroundColor,t,null),l)}})],b=[r.PositionGesture({didStartHovering(){const e=this.view;e.modifyMood(s.Feel.default,[[s.Feel.hovering,1]]);const t=e.getLook(s.Look.timing);e.attributes.fill.setIntrinsic(e.getLookOr(this.owner.fillLook,null),t);const l=this.owner.label.view;null!==l&&l.style.color.hasAffinity(i.Affinity.Intrinsic)&&l.style.color.setIntrinsic(e.getLookOr(s.Look.backgroundColor,null),t)},didStopHovering(){const e=this.view;e.modifyMood(s.Feel.default,[[s.Feel.hovering,void 0]]);const t=e.getLook(s.Look.timing);e.attributes.fill.setIntrinsic(e.getLookOr(this.owner.fillLook,null),t);const l=this.owner.label.view;null!==l&&l.style.color.hasAffinity(i.Affinity.Intrinsic)&&l.style.color.setIntrinsic(e.getLookOr(s.Look.backgroundColor,null),t)},didBeginPress(e,t){"mouse"!==e.inputType&&this.beginHover(e,t)},didMovePress(e,t){e.isRunaway()&&this.cancelPress(e,t)},didEndPress(e,t){"mouse"===e.inputType&&this.view.clientBounds.contains(e.x,e.y)||this.endHover(e,t)},didCancelPress(e,t){"mouse"===e.inputType&&this.view.clientBounds.contains(e.x,e.y)||this.endHover(e,t)}})],m=[r.ViewRef({viewType:n.SvgView.forTag("path"),viewKey:!0,observes:!0,didAttachView(e){this.owner.initFoot(e),this.owner.footGesture.setView(e)},willDetachView(e){this.owner.footGesture.setView(null)},viewDidMount(e){e.addEventListener("click",this.owner.onClickFoot)},viewWillUnmount(e){e.removeEventListener("click",this.owner.onClickFoot)},viewDidApplyTheme(e,t,l,n){n.attributes.fill.setIntrinsic(e.getOr(this.owner.fillLook,t,null),l);const r=this.owner.footIcon.view;if(null!==r&&r.attributes.fill.hasAffinity(i.Affinity.Intrinsic)){const i=e.getOr(this.owner.fillLook,t.updated(s.Feel.embossed,1),null);r.attributes.fill.setIntrinsic(i,l)}}})],y=[r.PositionGesture({didStartHovering(){const e=this.view;e.modifyMood(s.Feel.default,[[s.Feel.hovering,1]]);const t=e.getLook(s.Look.timing);e.attributes.fill.setIntrinsic(e.getLookOr(this.owner.fillLook,null),t);const l=this.owner.footIcon.view;if(null!==l&&l.attributes.fill.hasAffinity(i.Affinity.Intrinsic)){const i=e.getLookOr(this.owner.fillLook,e.mood.getValue().updated(s.Feel.embossed,1),null);l.attributes.fill.setIntrinsic(i,t)}},didStopHovering(){const e=this.view;e.modifyMood(s.Feel.default,[[s.Feel.hovering,void 0]]);const t=e.getLook(s.Look.timing);e.attributes.fill.setIntrinsic(e.getLookOr(this.owner.fillLook,null),t);const l=this.owner.footIcon.view;if(null!==l&&l.attributes.fill.hasAffinity(i.Affinity.Intrinsic)){const i=e.getLookOr(this.owner.fillLook,e.mood.getValue().updated(s.Feel.embossed,1),null);l.attributes.fill.setIntrinsic(i,t)}},didBeginPress(e,t){"mouse"!==e.inputType&&this.beginHover(e,t)},didMovePress(e,t){e.isRunaway()&&this.cancelPress(e,t)},didEndPress(e,t){"mouse"===e.inputType&&this.view.clientBounds.contains(e.x,e.y)||this.endHover(e,t)},didCancelPress(e,t){"mouse"===e.inputType&&this.view.clientBounds.contains(e.x,e.y)||this.endHover(e,t)}})],f=[r.ViewRef({viewType:n.SvgView.forTag("path"),viewKey:!0,didAttachView(e){this.owner.initFootIcon(e)},insertChild(e,t,i,l){const s=this.owner.shape.view;null!==s&&s.appendChild(t,l)}})],V=[i.Property({valueType:a.Graphics,value:null,updateFlags:r.View.NeedsLayout,init(){this.embossed=!0}})],T=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,didAttachView(e){this.owner.initLabelContainer(e)}})],S=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,didAttachView(e){if(null===e.parent){this.owner.labelContainer.insertView();const t=this.owner.labelContainer.view;null!==t&&t.appendChild(e)}this.owner.initLabel(e)}})],w(null,null,o,{kind:"field",name:"expandedPhase",static:!1,private:!1,access:{has:e=>"expandedPhase"in e,get:e=>e.expandedPhase,set:(e,t)=>{e.expandedPhase=t}},metadata:l},L,k),w(null,null,h,{kind:"field",name:"shape",static:!1,private:!1,access:{has:e=>"shape"in e,get:e=>e.shape,set:(e,t)=>{e.shape=t}},metadata:l},D,k),w(null,null,c,{kind:"field",name:"head",static:!1,private:!1,access:{has:e=>"head"in e,get:e=>e.head,set:(e,t)=>{e.head=t}},metadata:l},I,k),w(null,null,d,{kind:"field",name:"headGesture",static:!1,private:!1,access:{has:e=>"headGesture"in e,get:e=>e.headGesture,set:(e,t)=>{e.headGesture=t}},metadata:l},O,k),w(null,null,u,{kind:"field",name:"headIcon",static:!1,private:!1,access:{has:e=>"headIcon"in e,get:e=>e.headIcon,set:(e,t)=>{e.headIcon=t}},metadata:l},A,k),w(null,null,p,{kind:"field",name:"icon",static:!1,private:!1,access:{has:e=>"icon"in e,get:e=>e.icon,set:(e,t)=>{e.icon=t}},metadata:l},P,k),w(null,null,g,{kind:"field",name:"body",static:!1,private:!1,access:{has:e=>"body"in e,get:e=>e.body,set:(e,t)=>{e.body=t}},metadata:l},x,k),w(null,null,b,{kind:"field",name:"bodyGesture",static:!1,private:!1,access:{has:e=>"bodyGesture"in e,get:e=>e.bodyGesture,set:(e,t)=>{e.bodyGesture=t}},metadata:l},B,k),w(null,null,m,{kind:"field",name:"foot",static:!1,private:!1,access:{has:e=>"foot"in e,get:e=>e.foot,set:(e,t)=>{e.foot=t}},metadata:l},R,k),w(null,null,y,{kind:"field",name:"footGesture",static:!1,private:!1,access:{has:e=>"footGesture"in e,get:e=>e.footGesture,set:(e,t)=>{e.footGesture=t}},metadata:l},W,k),w(null,null,f,{kind:"field",name:"footIcon",static:!1,private:!1,access:{has:e=>"footIcon"in e,get:e=>e.footIcon,set:(e,t)=>{e.footIcon=t}},metadata:l},H,k),w(null,null,V,{kind:"field",name:"accessory",static:!1,private:!1,access:{has:e=>"accessory"in e,get:e=>e.accessory,set:(e,t)=>{e.accessory=t}},metadata:l},F,k),w(null,null,T,{kind:"field",name:"labelContainer",static:!1,private:!1,access:{has:e=>"labelContainer"in e,get:e=>e.labelContainer,set:(e,t)=>{e.labelContainer=t}},metadata:l},M,k),w(null,null,S,{kind:"field",name:"label",static:!1,private:!1,access:{has:e=>"label"in e,get:e=>e.label,set:(e,t)=>{e.label=t}},metadata:l},N,k),l&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),e})(),F=(()=>{var e;let t,i,l,a=H,h=[],c=[],d=[],u=[];return e=class extends a{constructor(e){super(e),this.stylesheet=(v(this,h),v(this,c,void 0)),this.placeholderRule=v(this,d,void 0),this.label=v(this,u,void 0),this.onInputUpdate=this.onInputUpdate.bind(this),this.onInputChange=this.onInputChange.bind(this),this.onInputKey=this.onInputKey.bind(this)}initToken(){super.initToken(),this.classList.add("input-token"),this.label.attachView()}initLabel(e){super.initLabel(e),e.style.setIntrinsic({padding:0,borderStyle:"none",boxSizing:"border-box",backgroundColor:o.Color.transparent(),appearance:"none",outlineStyle:"none",pointerEvents:"auto"})}get placeholderLook(){return s.Look.placeholderColor}onApplyTheme(e,t,i){super.onApplyTheme(e,t,i),this.placeholderRule.style.color.setIntrinsic(e.getOr(this.placeholderLook,t,null),i);const l=this.label.view;null!==l&&l.style.font.setIntrinsic(e.getOr(s.Look.font,t,null),!1)}onInputUpdate(e){const t=this.label.view;null!==t&&this.didUpdateInput(t)}didUpdateInput(e){this.callObservers("tokenDidUpdateInput",e,this)}onInputChange(e){const t=this.label.view;null!==t&&this.didChangeInput(t)}didChangeInput(e){this.callObservers("tokenDidChangeInput",e,this)}onInputKey(e){const t=this.label.view;null!==t&&"Enter"===e.key&&this.didAcceptInput(t)}didAcceptInput(e){this.callObservers("tokenDidAcceptInput",e,this)}},(()=>{var s;const o="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(s=a[Symbol.metadata])&&void 0!==s?s:null):void 0;t=[r.ViewRef({viewType:n.StyleView,viewKey:!0,binds:!0,init(){this.insertView()}})],i=[n.StyleRule({inherits:!0,get parent(){const e=this.owner.stylesheet.view;return null!==e?e.sheet:null},selector:"::placeholder"})],l=[r.ViewRef({viewType:n.HtmlView.forTag("input"),observes:!0,didAttachView(e){if(null===e.parent){this.owner.labelContainer.insertView();const t=this.owner.labelContainer.view;null!==t&&t.appendChild(e)}this.owner.initLabel(e)},viewDidMount(e){e.addEventListener("input",this.owner.onInputUpdate),e.addEventListener("change",this.owner.onInputChange),e.addEventListener("keydown",this.owner.onInputKey)},viewWillUnmount(e){e.removeEventListener("input",this.owner.onInputUpdate),e.removeEventListener("change",this.owner.onInputChange),e.removeEventListener("keydown",this.owner.onInputKey)}})],w(null,null,t,{kind:"field",name:"stylesheet",static:!1,private:!1,access:{has:e=>"stylesheet"in e,get:e=>e.stylesheet,set:(e,t)=>{e.stylesheet=t}},metadata:o},c,h),w(null,null,i,{kind:"field",name:"placeholderRule",static:!1,private:!1,access:{has:e=>"placeholderRule"in e,get:e=>e.placeholderRule,set:(e,t)=>{e.placeholderRule=t}},metadata:o},d,h),w(null,null,l,{kind:"field",name:"label",static:!1,private:!1,access:{has:e=>"label"in e,get:e=>e.label,set:(e,t)=>{e.label=t}},metadata:o},u,h),o&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o})})(),e})();class M{constructor(e,t,i,l,s,n,r,o,a,h,c){this.key=e,this.grow=t,this.shrink=i,this.basis=l,this.optional=s,this.persistent=n,this.textColor=r,this.width=o,this.left=a,this.right=h,this.hidden=c}withKey(e){return this.copy(e,this.grow,this.shrink,this.basis,this.optional,this.persistent,this.textColor,this.width,this.left,this.right,this.hidden)}withFlex(e,t,i){return i=void 0!==i?l.Length.fromLike(i):this.basis,this.copy(this.key,e,t,i,this.optional,this.persistent,this.textColor,this.width,this.left,this.right,this.hidden)}asOptional(e){return this.copy(this.key,this.grow,this.shrink,this.basis,e,this.persistent,this.textColor,this.width,this.left,this.right,this.hidden)}asPersistent(e){return this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,e,this.textColor,this.width,this.left,this.right,this.hidden)}withTextColor(e){return e=s.ColorLook.fromLike(e),this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.persistent,e,this.width,this.left,this.right,this.hidden)}asHidden(e){return this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.persistent,this.textColor,this.width,this.left,this.right,e)}resized(e,t,i,s){return null!==e&&(e=l.Length.fromLike(e)),null!==t&&(t=l.Length.fromLike(t)),null!==i&&(i=l.Length.fromLike(i)),void 0===s&&(s=this.hidden),this.copy(this.key,this.grow,this.shrink,this.basis,this.optional,this.persistent,this.textColor,e,t,i,s)}copy(e,t,i,l,s,n,r,o,a,h,c){return new M(e,t,i,l,s,n,r,o,a,h,c)}equivalentTo(e,i){return this===e||e instanceof M&&(this.key===e.key&&this.grow===e.grow&&this.shrink===e.shrink&&this.basis.equivalentTo(e.basis,i)&&this.optional===e.optional&&this.persistent===e.persistent&&t.Equivalent(this.textColor,e.textColor,i))}equals(e){return this===e||e instanceof M&&(this.key===e.key&&this.grow===e.grow&&this.shrink===e.shrink&&this.basis.equals(e.basis)&&this.optional===e.optional&&this.persistent===e.persistent&&t.Equals(this.textColor,e.textColor)&&t.Equals(this.width,e.width)&&t.Equals(this.left,e.left)&&t.Equals(this.right,e.right)&&this.hidden===e.hidden)}debug(e){return e=e.write("ColLayout").write(46).write("create").write(40).debug(this.key).write(", ").debug(this.grow).write(", ").debug(this.shrink).write(", ").debug(this.basis).write(41),this.optional&&(e=e.write(46).write("asOptional").write(40).debug(this.optional).write(41)),this.persistent&&(e=e.write(46).write("asPersistent").write(40).debug(this.persistent).write(41)),this.textColor&&(e=e.write(46).write("withTextColor").write(40).debug(this.textColor).write(41)),(null!==this.width||null!==this.left||null!==this.right||this.hidden)&&(e=e.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.hidden).write(41)),e}toString(){return h.Format.debug(this)}static create(e,t,i,n,r,o,a){return void 0===t&&(t=0),void 0===i&&(i=1),n=void 0!==n?l.Length.fromLike(n):l.Length.zero(),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===a&&(a=null),null!==a&&(a=s.ColorLook.fromLike(a)),new M(e,t,i,n,r,o,a,null,null,null,!1)}static fromLike(e){if(null==e||e instanceof M)return e;if("object"==typeof e&&null!==e)return M.fromInit(e);throw new TypeError(""+e)}static fromInit(e){let t=e.key;void 0===t&&(t="");let i=e.grow;void 0===i&&(i=0);let n=e.shrink;void 0===n&&(n=1);let r=e.basis;r=void 0!==r?l.Length.fromLike(r):l.Length.zero();let o=e.optional;void 0===o&&(o=!1);let a=e.persistent;void 0===a&&(a=!1);let h=e.textColor;void 0===h&&(h=null),null!==h&&(h=s.ColorLook.fromLike(h));let c=e.width;c=null!=c?l.Length.fromLike(c):null;let d=e.left;d=null!=d?l.Length.fromLike(d):null;let u=e.right;u=null!=u?l.Length.fromLike(u):null;let w=e.hidden;return void 0===w&&(w=!1),new M(t,i,n,r,o,a,h,c,d,u,w)}}class N{constructor(e,t,i,l,s){this.width=e,this.left=t,this.right=i,this.colSpacing=l,this.cols=s}getCol(e){const t=this.cols;for(let i=0;i<t.length;i+=1){const l=t[i];if(e===l.key)return l}return null}resized(e,i,s,n){if(e=l.Length.fromLike(e),void 0===i?i=this.left:null!==i&&(i=l.Length.fromLike(i)),void 0===s?s=this.right:null!==s&&(s=l.Length.fromLike(s)),void 0===n?n=this.colSpacing:null!==n&&(n=l.Length.fromLike(n)),t.Equals(this.width,e)&&t.Equals(this.left,i)&&t.Equals(this.right,s)&&t.Equals(this.colSpacing,n))return this;{const t=this.cols,l=t.length,r=new Array(l),o=e.pxValue(),a=null!==i?i.pxValue(o):0,h=null!==s?s.pxValue(o):0,c=null!==n?n.pxValue(o):0;let d=0,u=0,w=0,v=a+h,p=a;for(let e=0;e<l;e+=1){0!==e&&(v+=c,p+=c);const i=t[e],l=i.basis.pxValue(o);r[e]=i.resized(l,p,o-l-p,!1),d+=i.grow,u+=i.shrink,i.optional&&(w+=1),v+=l,p+=l}if(v>o&&w>0){let e=l-1;for(;e>=0&&w>0;){const t=r[e],i=t.width.pxValue();if(t.optional&&(r[e]=t.resized(0,p,o-p,!0),d-=t.grow,u-=t.shrink,w-=1,v-=i),p-=i,0!==e&&(v-=c,p-=c),v<=o)break;e-=1}for(e+=1;e<l;){const t=r[e];if(!t.optional){v+=c,p+=c;const i=t.basis.pxValue(o);r[e]=t.resized(i,p,o-i-p),p+=i}e+=1}}if(v<o&&d>0){const e=o-v;let t=a,i=0;for(let s=0;s<l;s+=1){const l=r[s];if(l.hidden)r[s]=l.resized(0,t+c,o-t-c);else{0!==i&&(t+=c);const n=l.basis.pxValue(o)+e*(l.grow/d);r[s]=l.resized(n,t,o-n-t),t+=n,i+=1}}}else if(v>o&&u>0){const e=v-o;let t=a,i=0;for(let s=0;s<l;s+=1){const l=r[s];if(l.hidden)r[s]=l.resized(0,t+c,o-t-c);else{0!==i&&(t+=c);const n=l.basis.pxValue(o)-e*(l.shrink/u);r[s]=l.resized(n,t,o-n-t),t+=n,i+=1}}}return new N(e,i,s,n,r)}}equivalentTo(e,t){if(this===e)return!0;if(e instanceof N){const i=this.cols,l=e.cols,s=i.length;if(s===l.length){for(let e=0;e<s;e+=1)if(!i[e].equivalentTo(l[e],t))return!1;return!0}}return!1}equals(e){return this===e||e instanceof N&&(t.Equals(this.width,e.width)&&t.Equals(this.left,e.left)&&t.Equals(this.right,e.right)&&t.Equals(this.colSpacing,e.colSpacing)&&t.Arrays.equal(this.cols,e.cols))}debug(e){e=e.write("TableLayout").write(46).write("of").write(40);for(let t=0;t<this.cols.length;t+=1)0!==t&&(e=e.write(", ")),e=e.debug(this.cols[t]);return e=e.write(41),null===this.width&&null===this.left&&null===this.right&&null===this.colSpacing||(e=e.write(46).write("resized").write(40).debug(this.width).write(", ").debug(this.left).write(", ").debug(this.right).write(", ").debug(this.colSpacing).write(41)),e}toString(){return h.Format.debug(this)}static of(...e){const t=e.length,i=new Array(t);for(let l=0;l<t;l+=1)i[l]=M.fromLike(e[l]);return new N(null,null,null,null,i)}static create(e){return new N(null,null,null,null,e)}static fromLike(e){if(null==e||e instanceof N)return e;if("object"==typeof e&&null!==e)return N.fromInit(e);throw new TypeError(""+e)}static fromInit(e){let t=e.width;t=null!=t?l.Length.fromLike(t):null;let i=e.left;i=null!=i?l.Length.fromLike(i):null;let s=e.right;s=null!=s?l.Length.fromLike(s):null;let n=e.colSpacing;n=null!=n?l.Length.fromLike(n):null;const r=e.cols.length,o=new Array(r);for(let t=0;t<r;t+=1)o[t]=M.fromLike(e.cols[t]);return new N(t,i,s,n,o)}}let E=(()=>{var e;let t,l=n.HtmlView,s=[];return e=class extends l{constructor(e){super(e),v(this,s),this.initCell()}initCell(){this.setIntrinsic({classList:["cell"],style:{overflow:"hidden"}})}get hyperlink(){return i.Property.getter()}didPress(e,t){this.callObservers("viewDidPress",e,t,this);const l=i.Property.tryValue(this,"hyperlink");null===l||e.defaultPrevented||(e.preventDefault(),l.activate(t))}didLongPress(e){this.callObservers("viewDidLongPress",e,this)}},(()=>{var n;const r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=l[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[i.Property({valueType:d.Hyperlink,value:null,didSetValue(e){null!==e?this.owner.setIntrinsic({attributes:{href:e.href,title:e.title},style:{textDecorationLine:"underline",cursor:"pointer"}}):this.owner.setIntrinsic({attributes:{href:void 0,title:void 0},style:{textDecorationLine:void 0,cursor:void 0}})}})],w(e,null,t,{kind:"getter",name:"hyperlink",static:!1,private:!1,access:{has:e=>"hyperlink"in e,get:e=>e.hyperlink},metadata:r},null,s),r&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),e})(),z=(()=>{var e;let t,i=E,l=[],s=[];return e=class extends i{constructor(){super(...arguments),this.content=(v(this,l),v(this,s,void 0))}initCell(){super.initCell(),this.classList.add("cell-text")}},(()=>{var o;const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(o=i[Symbol.metadata])&&void 0!==o?o:null):void 0;t=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,willAttachView(e){this.owner.callObservers("viewWillAttachContent",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachContent",e,this.owner)},fromLike(e){if(void 0===e||"string"==typeof e){let t=this.view;return null===t&&(t=this.createView()),t.text.setState(e),t}return super.fromLike(e)},createView:()=>n.HtmlView.fromTag("span").style.setIntrinsic({alignSelf:"center",whiteSpace:"nowrap",textOverflow:"ellipsis",overflowX:"hidden",overflowY:"hidden"})})],w(null,null,t,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}},metadata:a},s,l),a&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),e})(),j=(()=>{var e;let t,l,n,h,c=E,d=[],u=[],p=[],g=[];return e=class extends c{constructor(){super(...arguments),this.iconLayout=(v(this,d),v(this,u,void 0)),this.graphics=v(this,p,void 0),this.svg=v(this,g,void 0)}initCell(){super.initCell(),this.classList.add("cell-icon")}get iconColor(){return s.ThemeAnimator.getter()}onApplyTheme(e,t,l){if(super.onApplyTheme(e,t,l),!this.graphics.derived){const s=this.graphics.value;if(s instanceof a.Icon){const n=s.withTheme(e,t);this.graphics.setState(n,!!s.isThemed()&&l,i.Affinity.Reflexive)}}}onResize(){super.onResize(),this.requireUpdate(r.View.NeedsLayout)}needsDisplay(e){return 0==(this.flags&r.View.NeedsLayout)&&(e&=~r.View.NeedsLayout),e}onLayout(){super.onLayout(),this.layoutIcon()}layoutIcon(){const e=this.svg.view;if(null===e||!e.attributes.width.hasAffinity(i.Affinity.Intrinsic)&&!e.attributes.height.hasAffinity(i.Affinity.Intrinsic)&&!e.attributes.viewBox.hasAffinity(i.Affinity.Intrinsic))return;const t=this.style.width.pxValue(),l=this.style.height.pxValue();e.attributes.setIntrinsic({width:t,height:l,viewBox:"0 0 "+t+" "+l})}},(()=>{var v;const b="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=c[Symbol.metadata])&&void 0!==v?v:null):void 0;t=[i.Animator({valueType:a.IconLayout,value:null,updateFlags:r.View.NeedsLayout})],l=[s.ThemeAnimator({valueType:o.Color,value:null,updateFlags:r.View.NeedsLayout,didSetState(e){const t=null!==this.timing&&this.timing;this.owner.graphics.setState(this.owner.graphics.state,t,i.Affinity.Reflexive)}})],n=[s.ThemeAnimator({extends:a.IconGraphicsAnimator,valueType:a.Graphics,value:null,updateFlags:r.View.NeedsLayout,didSetValue(e,t){this.owner.callObservers("viewDidSetGraphics",e,this.owner)}})],h=[r.ViewRef({viewType:a.SvgIconView,viewKey:!0,binds:!0,init(){this.insertView()},initView(e){e.style.position.set("absolute"),e.iconLayout.setInherits(!0),e.iconColor.setInherits(!0),e.graphics.setInherits(!0)}})],w(e,null,l,{kind:"getter",name:"iconColor",static:!1,private:!1,access:{has:e=>"iconColor"in e,get:e=>e.iconColor},metadata:b},null,d),w(null,null,t,{kind:"field",name:"iconLayout",static:!1,private:!1,access:{has:e=>"iconLayout"in e,get:e=>e.iconLayout,set:(e,t)=>{e.iconLayout=t}},metadata:b},u,d),w(null,null,n,{kind:"field",name:"graphics",static:!1,private:!1,access:{has:e=>"graphics"in e,get:e=>e.graphics,set:(e,t)=>{e.graphics=t}},metadata:b},p,d),w(null,null,h,{kind:"field",name:"svg",static:!1,private:!1,access:{has:e=>"svg"in e,get:e=>e.svg,set:(e,t)=>{e.svg=t}},metadata:b},g,d),b&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:b})})(),e})(),q=(()=>{var e;let t,i,l=E,s=[],n=[],a=[];return e=class extends l{constructor(){super(...arguments),this.disclosure=(v(this,s),v(this,n,void 0)),this.button=v(this,a,void 0)}initCell(){super.initCell(),this.classList.add("cell-disclosure")}didPress(e,t){e.preventDefault();const i=this.disclosure.inlet;i instanceof o.ExpansionAnimator&&i.toggle(),super.didPress(e,t)}},(()=>{var h;const c="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(h=l[Symbol.metadata])&&void 0!==h?h:null):void 0;t=[o.ExpansionAnimator({value:null,inherits:!0})],i=[r.ViewRef({viewType:V,viewKey:!0,binds:!0,init(){this.insertView()}})],w(null,null,t,{kind:"field",name:"disclosure",static:!1,private:!1,access:{has:e=>"disclosure"in e,get:e=>e.disclosure,set:(e,t)=>{e.disclosure=t}},metadata:c},n,s),w(null,null,i,{kind:"field",name:"button",static:!1,private:!1,access:{has:e=>"button"in e,get:e=>e.button,set:(e,t)=>{e.button=t}},metadata:c},a,s),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),e})(),U=(()=>{var e;let t,l=u.Trait,s=[];return e=class extends l{get hyperlink(){return i.Property.getter()}createCellController(){return new Y}constructor(){super(...arguments),v(this,s)}},(()=>{var n;const r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=l[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[i.Property({valueType:d.Hyperlink,value:null})],w(e,null,t,{kind:"getter",name:"hyperlink",static:!1,private:!1,access:{has:e=>"hyperlink"in e,get:e=>e.hyperlink},metadata:r},null,s),r&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),e})(),G=(()=>{var e;let t,l=U,s=[],n=[];return e=class extends l{constructor(){super(...arguments),this.content=(v(this,s),v(this,n,void 0))}createCellController(){return new Z}},(()=>{var r;const o="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(r=l[Symbol.metadata])&&void 0!==r?r:null):void 0;t=[i.Property({valueType:String,didSetValue(e){this.owner.callObservers("traitDidSetContent",e,this.owner)}})],w(null,null,t,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}},metadata:o},n,s),o&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o})})(),e})(),K=(()=>{var e;let t,l=U,s=[],n=[];return e=class extends l{constructor(){super(...arguments),this.icon=(v(this,s),v(this,n,void 0))}createCellController(){return new X}},(()=>{var r;const o="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(r=l[Symbol.metadata])&&void 0!==r?r:null):void 0;t=[i.Property({valueType:a.Graphics,value:null,didSetValue(e){this.owner.callObservers("traitDidSetIcon",e,this.owner)}})],w(null,null,t,{kind:"field",name:"icon",static:!1,private:!1,access:{has:e=>"icon"in e,get:e=>e.icon,set:(e,t)=>{e.icon=t}},metadata:o},n,s),o&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o})})(),e})(),Y=(()=>{var e;let t,l,s=d.Controller,n=[],r=[];return e=class extends s{constructor(){super(...arguments),this.cell=(v(this,n),v(this,r,void 0))}get hyperlink(){return i.Property.getter()}},(()=>{var o;const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(o=s[Symbol.metadata])&&void 0!==o?o:null):void 0;t=[i.Property({valueType:d.Hyperlink,value:null})],l=[d.TraitViewRef({traitType:U,willAttachTrait(e){this.owner.callObservers("controllerWillAttachCellTrait",e,this.owner)},initTrait(e){this.owner.hyperlink.bindInlet(e.hyperlink)},deinitTrait(e){this.owner.hyperlink.unbindInlet(e.hyperlink)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachCellTrait",e,this.owner)},viewType:E,observesView:!0,initView(e){e.hyperlink.bindInlet(this.owner.hyperlink)},willAttachView(e){this.owner.callObservers("controllerWillAttachCellView",e,this.owner)},deinitView(e){e.hyperlink.unbindInlet(this.owner.hyperlink)},didDetachView(e){this.owner.callObservers("controllerDidDetachCellView",e,this.owner)},viewDidPress(e,t,l){this.owner.callObservers("controllerDidPressCellView",e,t,l,this.owner);const s=i.Property.tryValue(this.owner,"hyperlink");null===s||e.defaultPrevented||(e.preventDefault(),s.activate(t))},viewDidLongPress(e,t){this.owner.callObservers("controllerDidLongPressCellView",e,t,this.owner)}})],w(e,null,t,{kind:"getter",name:"hyperlink",static:!1,private:!1,access:{has:e=>"hyperlink"in e,get:e=>e.hyperlink},metadata:a},null,n),w(null,null,l,{kind:"field",name:"cell",static:!1,private:!1,access:{has:e=>"cell"in e,get:e=>e.cell,set:(e,t)=>{e.cell=t}},metadata:a},r,n),a&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),e})(),Z=(()=>{var e;let t,i,l=Y,s=[],o=[],a=[];return e=class extends l{constructor(){super(...arguments),this.cell=(v(this,s),v(this,o,void 0)),this.content=v(this,a,void 0)}setContentView(e){const t=this.cell.view;null!==t&&t.content.set(e)}},(()=>{var h;const c="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(h=l[Symbol.metadata])&&void 0!==h?h:null):void 0;t=[d.TraitViewRef({extends:!0,traitType:G,observesTrait:!0,initTrait(e){this.owner.setContentView(e.content.value)},deinitTrait(e){this.owner.setContentView(void 0)},traitDidSetContent(e){this.owner.setContentView(e)},viewType:z,observesView:!0,initView(e){this.owner.content.setView(e.content.view);const t=this.trait;null!==t&&this.owner.setContentView(t.content.value)},deinitView(e){this.owner.content.setView(null)},viewWillAttachContent(e){this.owner.content.setView(e)},viewDidDetachContent(e){this.owner.content.setView(null)}})],i=[r.ViewRef({viewType:n.HtmlView,willAttachView(e){this.owner.callObservers("controllerWillAttachCellContentView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachCellContentView",e,this.owner)}})],w(null,null,t,{kind:"field",name:"cell",static:!1,private:!1,access:{has:e=>"cell"in e,get:e=>e.cell,set:(e,t)=>{e.cell=t}},metadata:c},o,s),w(null,null,i,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}},metadata:c},a,s),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),e})(),X=(()=>{var e;let t,i=Y,l=[],s=[];return e=class extends i{constructor(){super(...arguments),this.cell=(v(this,l),v(this,s,void 0))}setIcon(e){const t=this.cell.view;null!==t&&t.graphics.set(e)}},(()=>{var n;const r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=i[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[d.TraitViewRef({extends:!0,traitType:K,observesTrait:!0,initTrait(e){this.owner.setIcon(e.icon.value)},deinitTrait(e){this.owner.setIcon(null)},traitDidSetIcon(e){this.owner.setIcon(e)},viewType:j,observesView:!0,initView(e){const t=this.trait;null!==t&&this.owner.setIcon(t.icon.value)},viewDidSetGraphics(e){this.owner.callObservers("controllerDidSetCellIcon",e,this.owner)}})],w(null,null,t,{kind:"field",name:"cell",static:!1,private:!1,access:{has:e=>"cell"in e,get:e=>e.cell,set:(e,t)=>{e.cell=t}},metadata:r},s,l),r&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),e})(),J=(()=>{var e;let t,a,h,c,u,g,b,m,y,f,V,T,S=n.HtmlView,C=[],k=[],L=[],D=[],I=[],O=[],A=[],P=[],x=[],B=[],R=[],W=[];return e=class extends S{constructor(e){super(e),this.layout=(v(this,C),v(this,k,void 0)),this.depth=v(this,L,void 0),this.rowSpacing=v(this,D,void 0),this.rowHeight=v(this,I,void 0),this.stretch=v(this,O,void 0),this.hovers=v(this,A,void 0),this.hover=v(this,P,void 0),this.highlight=v(this,x,void 0),this.cells=v(this,B,void 0),this.glows=v(this,R,void 0),this.gesture=v(this,W,void 0),this.initLeaf()}initLeaf(){this.setIntrinsic({classList:["leaf"],style:{position:"relative",overflow:"hidden",backgroundColor:s.Look.backgroundColor}}),this.modifyMood(s.Feel.default,[[s.Feel.transparent,1],[s.Feel.hovering,0]],!1)}getCell(e,t){void 0===t&&(t=E);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateCell(e,t){let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setCell(e,t){this.setChild(e,t)}onLayout(){this.rowHeight.recohere(this.updateTime),super.onLayout(),this.layoutLeaf()}layoutLeaf(){const e=this.rowHeight.value;null!==e&&this.style.height.setIntrinsic(e)}displayChildren(e,t){0!=(e&r.View.NeedsLayout)?this.layoutChildren(e,t):super.displayChildren(e,t)}layoutChildren(e,t){const i=this.layout.value,l=this.style.height.state,s=this.stretch.getPhaseOr(1);super.displayChildren(e,(function(e,n){if(e instanceof E){const t=e.key,n=null!==i&&void 0!==t?i.getCol(t):null;null!==n?e.style.setIntrinsic({display:n.hidden||null===n.width?"none":"flex",left:n.left,width:n.width,height:l,color:n.textColor,opacity:n.persistent?void 0:s}):e.style.setIntrinsic({display:"none",left:null,width:null,height:null,color:null,opacity:void 0})}t.call(this,e,n)}))}glow(e){if(e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0),void 0===e.detail){const t="mouse"===e.inputType?0:100;e.detail=this.prependChild(p),e.detail.glow(e.x,e.y,void 0,t)}}get hyperlink(){return i.Property.getter()}didPress(e,t){if(e.defaultPrevented)return;this.callObservers("viewDidPress",e,t,this);const l=i.Property.tryValue(this,"hyperlink");null===l||e.defaultPrevented||(e.preventDefault(),l.activate(t))}didLongPress(e){e.defaultPrevented||this.callObservers("viewDidLongPress",e,this)}},(()=>{var v;const H="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=S[Symbol.metadata])&&void 0!==v?v:null):void 0;t=[i.Property({valueType:N,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],a=[i.Property({valueType:Number,value:0,inherits:!0,updateFlags:r.View.NeedsLayout})],h=[s.ThemeConstraintAnimator({valueType:l.Length,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],c=[s.ThemeConstraintAnimator({valueType:l.Length,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],u=[o.ExpansionAnimator({value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],g=[i.Property({valueType:Boolean,value:!1,inherits:!0})],b=[o.FocusAnimator({value:o.Focus.unfocused(),get transition(){return this.owner.getLookOr(s.Look.timing,null)},willFocus(){this.owner.modifyMood(s.Feel.default,[[s.Feel.transparent,0],[s.Feel.hovering,1]],!1)},willUnfocus(){this.owner.modifyMood(s.Feel.default,[[s.Feel.transparent,1-this.owner.hover.state.phase],[s.Feel.hovering,0]],!1)}})],m=[o.FocusAnimator({value:o.Focus.unfocused(),get transition(){return this.owner.getLookOr(s.Look.timing,null)},willFocus(){this.owner.callObservers("viewWillHighlight",this.owner);const e=this.owner.getLook(s.Look.timing);this.owner.modifyMood(s.Feel.default,[[s.Feel.transparent,0]],e),this.owner.style.backgroundColor.setIntrinsic(s.Look.selectionColor,e)},didFocus(){this.owner.callObservers("viewDidHighlight",this.owner)},willUnfocus(){this.owner.callObservers("viewWillUnhighlight",this.owner);const e=this.owner.getLook(s.Look.timing);this.owner.modifyMood(s.Feel.default,[[s.Feel.transparent,1-this.owner.hover.state.phase]],e),this.owner.style.backgroundColor.setIntrinsic(s.Look.backgroundColor,e)},didUnfocus(){this.owner.callObservers("viewDidUnhighlight",this.owner)}})],y=[r.ViewSet({viewType:E,binds:!0,initView(e){e.style.setIntrinsic({display:"none",position:"absolute",left:0,top:0,width:0,height:this.owner.style.height.state})},willAttachView(e,t){this.owner.callObservers("viewWillAttachCell",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachCell",e,this.owner)}})],f=[i.Property({valueType:Boolean,value:!0,inherits:!0})],V=[i.Property({valueType:d.Hyperlink,value:null,didSetValue(e){null!==e?this.owner.setIntrinsic({attributes:{href:e.href,title:e.title},style:{cursor:"pointer"}}):this.owner.setIntrinsic({attributes:{href:void 0,title:void 0},style:{cursor:void 0}})}})],T=[r.PositionGesture({bindsOwner:!0,didBeginPress(e,t){this.owner.glows.value&&this.owner.glow(e)},didMovePress(e,t){e.isRunaway()?this.cancelPress(e,t):this.owner.clientBounds.contains(e.x,e.y)||(e.clearHoldTimer(),this.beginHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0))},didEndPress(e,t){this.owner.clientBounds.contains(e.x,e.y)?e.detail instanceof p&&e.detail.pulse(e.x,e.y):(this.endHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0))},didCancelPress(e,t){this.owner.clientBounds.contains(e.x,e.y)||this.endHover(e,t),e.detail instanceof p&&(e.detail.fade(e.x,e.y),e.detail=void 0)},didStartHovering(){this.owner.hovers.value&&this.owner.hover.focus(!1),this.owner.callObservers("viewDidEnter",this.owner)},didStopHovering(){this.owner.hovers.value&&this.owner.hover.unfocus(),this.owner.callObservers("viewDidLeave",this.owner)},didPress(e,t){if(e.defaultPrevented||!this.owner.clientBounds.contains(e.x,e.y))return;let i=e.target;for(;i instanceof Node&&i!==this.owner.node;){const l=n.NodeView.get(i);if(l instanceof E){l.didPress(e,t);break}i=i.parentNode}this.owner.didPress(e,t)},didLongPress(e){if(e.defaultPrevented)return;let t=e.target;for(;t instanceof Node&&t!==this.owner.node;){const i=n.NodeView.get(t);if(i instanceof E){i.didLongPress(e);break}t=t.parentNode}this.owner.didLongPress(e)}})],w(e,null,V,{kind:"getter",name:"hyperlink",static:!1,private:!1,access:{has:e=>"hyperlink"in e,get:e=>e.hyperlink},metadata:H},null,C),w(null,null,t,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}},metadata:H},k,C),w(null,null,a,{kind:"field",name:"depth",static:!1,private:!1,access:{has:e=>"depth"in e,get:e=>e.depth,set:(e,t)=>{e.depth=t}},metadata:H},L,C),w(null,null,h,{kind:"field",name:"rowSpacing",static:!1,private:!1,access:{has:e=>"rowSpacing"in e,get:e=>e.rowSpacing,set:(e,t)=>{e.rowSpacing=t}},metadata:H},D,C),w(null,null,c,{kind:"field",name:"rowHeight",static:!1,private:!1,access:{has:e=>"rowHeight"in e,get:e=>e.rowHeight,set:(e,t)=>{e.rowHeight=t}},metadata:H},I,C),w(null,null,u,{kind:"field",name:"stretch",static:!1,private:!1,access:{has:e=>"stretch"in e,get:e=>e.stretch,set:(e,t)=>{e.stretch=t}},metadata:H},O,C),w(null,null,g,{kind:"field",name:"hovers",static:!1,private:!1,access:{has:e=>"hovers"in e,get:e=>e.hovers,set:(e,t)=>{e.hovers=t}},metadata:H},A,C),w(null,null,b,{kind:"field",name:"hover",static:!1,private:!1,access:{has:e=>"hover"in e,get:e=>e.hover,set:(e,t)=>{e.hover=t}},metadata:H},P,C),w(null,null,m,{kind:"field",name:"highlight",static:!1,private:!1,access:{has:e=>"highlight"in e,get:e=>e.highlight,set:(e,t)=>{e.highlight=t}},metadata:H},x,C),w(null,null,y,{kind:"field",name:"cells",static:!1,private:!1,access:{has:e=>"cells"in e,get:e=>e.cells,set:(e,t)=>{e.cells=t}},metadata:H},B,C),w(null,null,f,{kind:"field",name:"glows",static:!1,private:!1,access:{has:e=>"glows"in e,get:e=>e.glows,set:(e,t)=>{e.glows=t}},metadata:H},R,C),w(null,null,T,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}},metadata:H},W,C),H&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:H})})(),e})(),Q=(()=>{var e;let t,l,s=u.Trait,n=[],r=[];return e=class extends s{constructor(){super(...arguments),this.cells=(v(this,n),v(this,r,void 0))}get hyperlink(){return i.Property.getter()}getCell(e,t){void 0===t&&(t=U);const i=this.getTrait(e);return i instanceof t?i:null}getOrCreateCell(e,t){let i=this.getTrait(e,t);return null===i&&(i=t.create(),this.setTrait(e,i)),i}setCell(e,t){this.setTrait(e,t)}onStartConsuming(){super.onStartConsuming(),this.cells.consumeTraits(this)}onStopConsuming(){super.onStopConsuming(),this.cells.unconsumeTraits(this)}},(()=>{var o;const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(o=s[Symbol.metadata])&&void 0!==o?o:null):void 0;t=[i.Property({valueType:d.Hyperlink,value:null})],l=[u.TraitSet({traitType:U,binds:!0,willAttachTrait(e,t){this.owner.callObservers("traitWillAttachCell",e,t,this.owner)},didAttachTrait(e,t){this.owner.consuming&&e.consume(this.owner)},willDetachTrait(e){this.owner.consuming&&e.unconsume(this.owner)},didDetachTrait(e){this.owner.callObservers("traitDidDetachCell",e,this.owner)},detectModel:e=>e.getTrait(U)})],w(e,null,t,{kind:"getter",name:"hyperlink",static:!1,private:!1,access:{has:e=>"hyperlink"in e,get:e=>e.hyperlink},metadata:a},null,n),w(null,null,l,{kind:"field",name:"cells",static:!1,private:!1,access:{has:e=>"cells"in e,get:e=>e.cells,set:(e,t)=>{e.cells=t}},metadata:a},r,n),a&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),e})(),$=(()=>{var e;let t,l,s,n=d.Controller,r=[],o=[],a=[];return e=class extends n{constructor(){super(...arguments),this.leaf=(v(this,r),v(this,o,void 0)),this.cells=v(this,a,void 0)}get hyperlink(){return i.Property.getter()}getCell(e,t){void 0===t&&(t=Y);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateCell(e,t){let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setCell(e,t){this.setChild(e,t)}getCellTrait(e,t){const i=this.leaf.trait;return null!==i?i.getCell(e,t):null}getOrCreateCellTrait(e,t){const i=this.leaf.trait;if(null===i)throw new Error("no leaf trait");return i.getOrCreateCell(e,t)}setCellTrait(e,t){const i=this.leaf.trait;if(null===i)throw new Error("no leaf trait");i.setCell(e,t)}getCellView(e,t){const i=this.leaf.view;return null!==i?i.getCell(e,t):null}getOrCreateCellView(e,t){let i=this.leaf.view;if(null===i){if(i=this.leaf.createView(),null===i)throw new Error("no leaf view");this.leaf.setView(i)}return i.getOrCreateCell(e,t)}setCellView(e,t){let i=this.leaf.view;if(null===i){if(i=this.leaf.createView(),null===i)throw new Error("no leaf view");this.leaf.setView(i)}i.setCell(e,t)}},(()=>{var h;const c="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(h=n[Symbol.metadata])&&void 0!==h?h:null):void 0;t=[i.Property({valueType:d.Hyperlink,value:null})],l=[d.TraitViewRef({traitType:Q,observesTrait:!0,willAttachTrait(e){this.owner.callObservers("controllerWillAttachLeafTrait",e,this.owner)},didAttachTrait(e){this.owner.cells.addTraits(e.cells.traits)},initTrait(e){this.owner.hyperlink.bindInlet(e.hyperlink)},deinitTrait(e){this.owner.hyperlink.unbindInlet(e.hyperlink)},willDetachTrait(e){this.owner.cells.deleteTraits(e.cells.traits)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachLeafTrait",e,this.owner)},traitWillAttachCell(e,t){this.owner.cells.addTrait(e,t)},traitDidDetachCell(e){this.owner.cells.deleteTrait(e)},viewType:J,observesView:!0,initView(e){const t=this.owner.cells.controllers;for(const i in t){const l=t[i],s=l.cell.view;if(null!==s&&null===s.parent){const t=l.cell.trait;null!==t&&l.cell.insertView(e,void 0,void 0,t.key)}}},willAttachView(e){this.owner.callObservers("controllerWillAttachLeafView",e,this.owner),e.hyperlink.bindInlet(this.owner.hyperlink)},didDetachView(e){e.hyperlink.unbindInlet(this.owner.hyperlink),this.owner.callObservers("controllerDidDetachLeafView",e,this.owner)},viewWillHighlight(e){this.owner.callObservers("controllerWillHighlightLeafView",e,this.owner)},viewDidHighlight(e){this.owner.callObservers("controllerDidHighlightLeafView",e,this.owner)},viewWillUnhighlight(e){this.owner.callObservers("controllerWillUnhighlightLeafView",e,this.owner)},viewDidUnhighlight(e){this.owner.callObservers("controllerDidUnhighlightLeafView",e,this.owner)},viewDidEnter(e){this.owner.callObservers("controllerDidEnterLeafView",e,this.owner)},viewDidLeave(e){this.owner.callObservers("controllerDidLeaveLeafView",e,this.owner)},viewDidPress(e,t,i){this.owner.callObservers("controllerDidPressLeafView",e,t,i,this.owner)},viewDidLongPress(e,t){this.owner.callObservers("controllerDidLongPressLeafView",e,t,this.owner)}})],s=[d.TraitViewControllerSet({controllerType:Y,binds:!0,observes:!0,get parentView(){return this.owner.leaf.view},getTraitViewRef:e=>e.cell,willAttachController(e){this.owner.callObservers("controllerWillAttachCell",e,this.owner)},didAttachController(e){const t=e.cell.trait;null!==t&&this.attachCellTrait(t,e);const i=e.cell.view;null!==i&&this.attachCellView(i,e)},willDetachController(e){const t=e.cell.view;null!==t&&this.detachCellView(t,e);const i=e.cell.trait;null!==i&&this.detachCellTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachCell",e,this.owner)},controllerWillAttachCellTrait(e,t){this.owner.callObservers("controllerWillAttachCellTrait",e,t,this.owner),this.attachCellTrait(e,t)},controllerDidDetachCellTrait(e,t){this.detachCellTrait(e,t),this.owner.callObservers("controllerDidDetachCellTrait",e,t,this.owner)},attachCellTrait(e,t){},detachCellTrait(e,t){},controllerWillAttachCellView(e,t){this.owner.callObservers("controllerWillAttachCellView",e,t,this.owner),this.attachCellView(e,t)},controllerDidDetachCellView(e,t){this.detachCellView(e,t),this.owner.callObservers("controllerDidDetachCellView",e,t,this.owner)},attachCellView(e,t){if(e instanceof z){const i=e.content.view;null!==i&&this.attachCellContentView(i,t)}},detachCellView(e,t){if(e instanceof z){const i=e.content.view;null!==i&&this.detachCellContentView(i,t)}e.remove()},controllerDidPressCellView(e,t,i,l){this.owner.callObservers("controllerDidPressCellView",e,t,i,l,this.owner)},controllerDidLongPressCellView(e,t,i){this.owner.callObservers("controllerDidLongPressCellView",e,t,i,this.owner)},controllerWillAttachCellContentView(e,t){this.attachCellContentView(e,t),this.owner.callObservers("controllerWillAttachCellContentView",e,t,this.owner)},controllerDidDetachCellContentView(e,t){this.owner.callObservers("controllerDidDetachCellContentView",e,t,this.owner),this.detachCellContentView(e,t)},attachCellContentView(e,t){},detachCellContentView(e,t){},controllerDidSetCellIcon(e,t){this.owner.callObservers("controllerDidSetCellIcon",e,t,this.owner)},createController(e){return void 0!==e?e.createCellController():super.createController()}})],w(e,null,t,{kind:"getter",name:"hyperlink",static:!1,private:!1,access:{has:e=>"hyperlink"in e,get:e=>e.hyperlink},metadata:c},null,r),w(null,null,l,{kind:"field",name:"leaf",static:!1,private:!1,access:{has:e=>"leaf"in e,get:e=>e.leaf,set:(e,t)=>{e.leaf=t}},metadata:c},o,r),w(null,null,s,{kind:"field",name:"cells",static:!1,private:!1,access:{has:e=>"cells"in e,get:e=>e.cells,set:(e,t)=>{e.cells=t}},metadata:c},a,r),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),e})(),_=(()=>{var e;let t,a,h,c,d,u,p,g,b,m,y,f,V,T,S,C=n.HtmlView,k=[],L=[],D=[],I=[],O=[],A=[],P=[],x=[],B=[],R=[],W=[],H=[],F=[],M=[],E=[],z=[];return e=class extends C{constructor(e){super(e),this.layout=(v(this,k),v(this,L,void 0)),this.depth=v(this,D,void 0),this.rowSpacing=v(this,I,void 0),this.rowHeight=v(this,O,void 0),this.hovers=v(this,A,void 0),this.glows=v(this,P,void 0),this.leaf=v(this,x,void 0),this.head=v(this,B,void 0),this.tree=v(this,R,void 0),this.foot=v(this,W,void 0),this.expansion=v(this,H,void 0),this.expanding=v(this,F,void 0),this.disclosure=v(this,M,void 0),this.disclosing=v(this,E,void 0),this.visibleFrame=v(this,z,void 0),this.initRow()}initRow(){this.setIntrinsic({classList:["row"],style:{position:"relative"}})}getCell(e,t){const i=this.leaf.view;return null!==i?i.getCell(e,t):null}getOrCreateCell(e,t){const i=this.leaf.insertView();if(null===i)throw new Error("no leaf view");return i.getOrCreateCell(e,t)}setCell(e,t){const i=this.leaf.insertView();if(null===i)throw new Error("no leaf view");i.setCell(e,t)}detectVisibleFrame(){const e=this.rowHeight.getValueOr(l.Length.zero()).pxValue(),t=this.visibleFrame.value;if(null!==t){const i=this.style.left.pxState(),s=this.style.top.pxState();return new l.R2Box(t.xMin-i-0,t.yMin-s-e,t.xMax-i+0,t.yMax-s+e)}{const t=this.node.getBoundingClientRect(),i=-t.x-0,s=-t.y-e,n=window.innerWidth-t.x+0,r=window.innerHeight-t.y+e;return new l.R2Box(i,s,n,r)}}onProcess(e){super.onProcess(e);const t=this.detectVisibleFrame();this.visibleFrame.setOutletValue(t)}needsProcess(e){return 0!=(e&r.View.NeedsResize)&&(e|=r.View.NeedsScroll),e}onDisplay(e){super.onDisplay(e);const t=this.detectVisibleFrame();this.visibleFrame.setOutletValue(t)}onLayout(){this.rowHeight.recohere(this.updateTime),super.onLayout(),this.resizeRow();const e=this.leaf.view;null!==e&&this.layoutLeaf(e)}resizeRow(){const e=this.layout.derived?null:this.layout.value;if(null===e)return;const t=this.layout.inletValue;let i;i=null!=t&&null!==t.width?t.width.pxValue():this.style.width.pxState();const l=e.resized(i,0,0);this.layout.set(l)}layoutLeaf(e){const t=this.layout.value,i=null!==t?t.width:null,l=this.getLook(s.Look.timing);e.style.top.setIntrinsic(0,l),e.style.width.setIntrinsic(i)}didLayout(){this.layoutRow(),super.didLayout()}layoutRow(){const e=this.layout.value,t=null!==e?e.width:null,s=this.rowSpacing.getValueOr(l.Length.zero()).pxValue(),n=this.disclosure.getValue(),r=this.disclosing.getPhaseOr(1)*this.expanding.getPhaseOr(1);let o=0,a=0;const h=this.leaf.view;null!==h&&(h.style.width.setIntrinsic(t),h.style.display.setIntrinsic("flex"),o=h.style.height.pxValue(),a=h.style.height.pxState());const c=this.head.view;null!==c&&(n.collapsed?c.style.display.setIntrinsic("none"):(c.style.top.setIntrinsic(o),c.style.width.setIntrinsic(t),c.style.height.setIntrinsic(s),c.style.opacity.setIntrinsic(r),c.style.display.setIntrinsic("block")));let d=0,u=0;const w=this.tree.view;null!==w&&(n.collapsed?w.style.display.setIntrinsic("none"):(w.style.top.setIntrinsic(o+s*r),w.style.width.setIntrinsic(t),w.style.display.setIntrinsic("block"),d=w.style.height.pxValue(),d+=s*r,u=w.style.height.pxState(),u+=s));const v=this.foot.view;if(null!==v&&(n.collapsed?v.style.display.setIntrinsic("none"):(v.style.top.setIntrinsic(o+d),v.style.width.setIntrinsic(t),v.style.height.setIntrinsic(s),v.style.opacity.setIntrinsic(r),v.style.display.setIntrinsic("block"))),this.style.height.hasAffinity(i.Affinity.Intrinsic)){const e=o+d,t=a+u;this.style.height.setInterpolatedValue(l.Length.px(e),l.Length.px(t))}}onCull(){super.onCull(),this.style.display.setIntrinsic("none")}onUncull(){super.onUncull(),this.style.display.setIntrinsic("block")}},(()=>{var v;const j="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=C[Symbol.metadata])&&void 0!==v?v:null):void 0;t=[i.Property({valueType:N,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],a=[i.Property({valueType:Number,value:0,inherits:!0,updateFlags:r.View.NeedsLayout,didSetValue(e,t){const i=this.owner.tree.view;null!==i&&i.depth.setIntrinsic(e+1)}})],h=[s.ThemeConstraintAnimator({valueType:l.Length,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],c=[s.ThemeConstraintAnimator({valueType:l.Length,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],d=[i.Property({valueType:Boolean,value:!1,inherits:!0})],u=[i.Property({valueType:Boolean,value:!0,inherits:!0})],p=[r.ViewRef({viewType:J,viewKey:!0,binds:!0,observes:!0,initView(e){const t=this.owner.layout.value;e.style.setIntrinsic({display:"none",position:"absolute",left:0,top:0,width:null!==t?t.width:null,zIndex:1})},willAttachView(e){this.owner.callObservers("viewWillAttachLeaf",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachLeaf",e,this.owner)},viewWillHighlight(e){this.owner.callObservers("viewWillHighlightLeaf",e,this.owner)},viewDidHighlight(e){this.owner.callObservers("viewDidHighlightLeaf",e,this.owner)},viewWillUnhighlight(e){this.owner.callObservers("viewWillUnhighlightLeaf",e,this.owner)},viewDidUnhighlight(e){this.owner.callObservers("viewDidUnhighlightLeaf",e,this.owner)},viewDidEnter(e){this.owner.callObservers("viewDidEnterLeaf",e,this.owner)},viewDidLeave(e){this.owner.callObservers("viewDidLeaveLeaf",e,this.owner)},viewDidPress(e,t,i){this.owner.callObservers("viewDidPressLeaf",e,t,i,this.owner)},viewDidLongPress(e,t){this.owner.callObservers("viewDidLongPressLeaf",e,t,this.owner)}})],g=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,initView(e){const t=this.owner.layout.value;e.setIntrinsic({classList:["head"],style:{display:"none",position:"absolute",left:0,top:this.owner.rowHeight.state,width:null!==t?t.width:null,height:this.owner.rowSpacing.state,backgroundColor:s.Look.accentColor,opacity:this.owner.disclosing.getPhaseOr(1)*this.owner.expanding.getPhaseOr(1),zIndex:1}})}})],b=[r.ViewRef({get viewType(){return pe},viewKey:!0,binds:!0,initView(e){const t=this.owner.layout.value;e.setIntrinsic({classList:["tree"],style:{display:this.owner.disclosure.collapsed?"none":"block",position:"absolute",left:0,width:null!==t?t.width:null,zIndex:0}}),e.depth.setIntrinsic(this.owner.depth.value+1)},willAttachView(e){this.owner.callObservers("viewWillAttachTree",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachTree",e,this.owner)}})],m=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,initView(e){const t=this.owner.layout.value;e.setIntrinsic({classList:["foot"],style:{display:"none",position:"absolute",left:0,top:this.owner.rowHeight.state,width:null!==t?t.width:null,height:this.owner.rowSpacing.state,backgroundColor:s.Look.borderColor,opacity:this.owner.disclosing.getPhaseOr(1)*this.owner.expanding.getPhaseOr(1),zIndex:1}})}})],y=[o.ExpansionAnimator({value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],f=[o.ExpansionAnimator({value:o.Expansion.expanded(),inherits:!0,updateFlags:r.View.NeedsLayout})],V=[o.ExpansionAnimator({value:o.Expansion.collapsed(),get transition(){return this.owner.getLookOr(s.Look.timing,null)},willExpand(){this.owner.callObservers("viewWillExpand",this.owner);const e=this.owner.tree.view;null!==e&&e.style.display.setIntrinsic("block")},didExpand(){this.owner.callObservers("viewDidExpand",this.owner)},willCollapse(){this.owner.callObservers("viewWillCollapse",this.owner)},didCollapse(){const e=this.owner.tree.view;null!==e&&e.style.display.setIntrinsic("none"),this.owner.callObservers("viewDidCollapse",this.owner)},didSetValue(e,t){0!==e.direction?this.owner.disclosing.setIntrinsic(e):this.owner.disclosing.setAffinity(i.Affinity.Transient);const l=this.owner.getRoot(pe);null!==l&&l.requireUpdate(r.View.NeedsLayout)}})],T=[o.ExpansionAnimator({value:o.Expansion.collapsed(),inherits:!0,updateFlags:r.View.NeedsLayout})],S=[i.Property({valueType:l.R2Box,value:null,inherits:!0,init(){this.outletValue=null},getOutletValue(e){return this.outletValue},setOutletValue(e){const t=this.outletValue;this.equalValues(e,t)||(this.outletValue=e,this.decohereOutlets())}})],w(null,null,t,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}},metadata:j},L,k),w(null,null,a,{kind:"field",name:"depth",static:!1,private:!1,access:{has:e=>"depth"in e,get:e=>e.depth,set:(e,t)=>{e.depth=t}},metadata:j},D,k),w(null,null,h,{kind:"field",name:"rowSpacing",static:!1,private:!1,access:{has:e=>"rowSpacing"in e,get:e=>e.rowSpacing,set:(e,t)=>{e.rowSpacing=t}},metadata:j},I,k),w(null,null,c,{kind:"field",name:"rowHeight",static:!1,private:!1,access:{has:e=>"rowHeight"in e,get:e=>e.rowHeight,set:(e,t)=>{e.rowHeight=t}},metadata:j},O,k),w(null,null,d,{kind:"field",name:"hovers",static:!1,private:!1,access:{has:e=>"hovers"in e,get:e=>e.hovers,set:(e,t)=>{e.hovers=t}},metadata:j},A,k),w(null,null,u,{kind:"field",name:"glows",static:!1,private:!1,access:{has:e=>"glows"in e,get:e=>e.glows,set:(e,t)=>{e.glows=t}},metadata:j},P,k),w(null,null,p,{kind:"field",name:"leaf",static:!1,private:!1,access:{has:e=>"leaf"in e,get:e=>e.leaf,set:(e,t)=>{e.leaf=t}},metadata:j},x,k),w(null,null,g,{kind:"field",name:"head",static:!1,private:!1,access:{has:e=>"head"in e,get:e=>e.head,set:(e,t)=>{e.head=t}},metadata:j},B,k),w(null,null,b,{kind:"field",name:"tree",static:!1,private:!1,access:{has:e=>"tree"in e,get:e=>e.tree,set:(e,t)=>{e.tree=t}},metadata:j},R,k),w(null,null,m,{kind:"field",name:"foot",static:!1,private:!1,access:{has:e=>"foot"in e,get:e=>e.foot,set:(e,t)=>{e.foot=t}},metadata:j},W,k),w(null,null,y,{kind:"field",name:"expansion",static:!1,private:!1,access:{has:e=>"expansion"in e,get:e=>e.expansion,set:(e,t)=>{e.expansion=t}},metadata:j},H,k),w(null,null,f,{kind:"field",name:"expanding",static:!1,private:!1,access:{has:e=>"expanding"in e,get:e=>e.expanding,set:(e,t)=>{e.expanding=t}},metadata:j},F,k),w(null,null,V,{kind:"field",name:"disclosure",static:!1,private:!1,access:{has:e=>"disclosure"in e,get:e=>e.disclosure,set:(e,t)=>{e.disclosure=t}},metadata:j},M,k),w(null,null,T,{kind:"field",name:"disclosing",static:!1,private:!1,access:{has:e=>"disclosing"in e,get:e=>e.disclosing,set:(e,t)=>{e.disclosing=t}},metadata:j},E,k),w(null,null,S,{kind:"field",name:"visibleFrame",static:!1,private:!1,access:{has:e=>"visibleFrame"in e,get:e=>e.visibleFrame,set:(e,t)=>{e.visibleFrame=t}},metadata:j},z,k),j&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:j})})(),e})(),ee=(()=>{var e;let t,i=Q,l=[],s=[];return e=class extends i{constructor(){super(...arguments),this.tree=(v(this,l),v(this,s,void 0))}},(()=>{var n;const r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=i[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[u.TraitRef({get traitType(){return ge},binds:!0,willAttachTrait(e){this.owner.callObservers("traitWillAttachTree",e,this.owner)},didDetachTrait(e){this.owner.callObservers("traitDidDetachTree",e,this.owner)},detectModel:e=>e.getTrait(ge),detectTrait:e=>e instanceof ge?e:null})],w(null,null,t,{kind:"field",name:"tree",static:!1,private:!1,access:{has:e=>"tree"in e,get:e=>e.tree,set:(e,t)=>{e.tree=t}},metadata:r},s,l),r&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),e})(),te=(()=>{var e;let t,i,l=$,s=[],n=[],r=[];return e=class extends l{constructor(){super(...arguments),this.row=(v(this,s),v(this,n,void 0)),this.tree=v(this,r,void 0)}},(()=>{var o;const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(o=l[Symbol.metadata])&&void 0!==o?o:null):void 0;t=[d.TraitViewRef({traitType:ee,observesTrait:!0,initTrait(e){null===this.owner.leaf.trait&&this.owner.leaf.setTrait(e);const t=e.tree.trait;null!==t&&this.owner.tree.setTrait(t)},deinitTrait(e){const t=e.tree.trait;null!==t&&this.owner.tree.deleteTrait(t),this.owner.leaf.trait===e&&this.owner.leaf.setTrait(null)},willAttachTrait(e){this.owner.callObservers("controllerWillAttachRowTrait",e,this.owner)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachRowTrait",e,this.owner)},traitWillAttachTree(e){this.owner.tree.setTrait(e)},traitDidDetachTree(e){this.owner.tree.deleteTrait(e)},viewType:_,observesView:!0,initView(e){if(null===this.owner.leaf.view){const t=e.leaf.insertView();this.owner.leaf.setView(t)}const t=this.owner.tree.controller;null!==t&&t.table.insertView(e)},willAttachView(e){this.owner.callObservers("controllerWillAttachRowView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachRowView",e,this.owner)},viewWillExpand(e){this.owner.callObservers("controllerWillExpandRowView",e,this.owner)},viewDidExpand(e){this.owner.callObservers("controllerDidExpandRowView",e,this.owner)},viewWillCollapse(e){this.owner.callObservers("controllerWillCollapseRowView",e,this.owner)},viewDidCollapse(e){this.owner.callObservers("controllerDidCollapseRowView",e,this.owner)},viewWillAttachTree(e){const t=this.owner.tree.controller;null!==t&&t.table.setView(e)}})],i=[d.TraitViewControllerRef({get controllerType(){return be},binds:!0,observes:!0,get parentView(){return this.owner.row.view},getTraitViewRef:e=>e.table,initController(e){const t=e.table.trait;null!==t&&this.attachTreeTrait(t,e);const i=e.table.view;null!==i&&this.attachTreeView(i,e);const l=this.owner.row.trait;if(null!==l){const t=l.tree.trait;null!==t&&e.table.setTrait(t)}},deinitController(e){const t=e.table.trait;null!==t&&this.detachTreeTrait(t,e);const i=e.table.view;null!==i&&this.detachTreeView(i,e)},willAttachController(e){this.owner.callObservers("controllerWillAttachTree",e,this.owner)},didDetachController(e){this.owner.callObservers("controllerDidDetachTree",e,this.owner)},controllerWillAttachTreeTrait(e,t){this.owner.callObservers("controllerWillAttachTreeTrait",e,t,this.owner),this.attachTreeTrait(e,t)},controllerDidDetachTreeTrait(e,t){this.detachTreeTrait(e,t),this.owner.callObservers("controllerDidDetachTreeTrait",e,t,this.owner)},attachTreeTrait(e,t){},detachTreeTrait(e,t){},controllerWillAttachTableView(e,t){this.owner.callObservers("controllerWillAttachTreeView",e,t,this.owner),this.attachTreeView(e,t)},controllerDidDetachTableView(e,t){this.detachTreeView(e,t),this.owner.callObservers("controllerDidDetachTreeView",e,t,this.owner)},attachTreeView(e,t){},detachTreeView(e,t){e.remove()},detectController:e=>e instanceof be?e:null})],w(null,null,t,{kind:"field",name:"row",static:!1,private:!1,access:{has:e=>"row"in e,get:e=>e.row,set:(e,t)=>{e.row=t}},metadata:a},n,s),w(null,null,i,{kind:"field",name:"tree",static:!1,private:!1,access:{has:e=>"tree"in e,get:e=>e.tree,set:(e,t)=>{e.tree=t}},metadata:a},r,s),a&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),e})();class ie extends n.HtmlView{constructor(e){super(e),this.initCol()}initCol(){this.setIntrinsic({classList:["col"],style:{overflow:"hidden"}})}didPress(e,t){this.callObservers("viewDidPress",e,t,this)}didLongPress(e){this.callObservers("viewDidLongPress",e,this)}}let le=(()=>{var e;let t,i=ie,l=[],o=[];return e=class extends i{constructor(){super(...arguments),this.label=(v(this,l),v(this,o,void 0))}initCol(){super.initCol(),this.classList.add("col-text")}},(()=>{var a;const h="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(a=i[Symbol.metadata])&&void 0!==a?a:null):void 0;t=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,willAttachView(e){this.owner.callObservers("viewWillAttachLabel",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachLabel",e,this.owner)},fromLike(e){if(void 0===e||"string"==typeof e){let t=this.view;return null===t&&(t=this.createView()),t.text.setState(e),t}return super.fromLike(e)},createView:()=>n.HtmlView.fromTag("span").style.setIntrinsic({alignSelf:"center",whiteSpace:"nowrap",textOverflow:"ellipsis",overflowX:"hidden",overflowY:"hidden",color:s.Look.legendColor})})],w(null,null,t,{kind:"field",name:"label",static:!1,private:!1,access:{has:e=>"label"in e,get:e=>e.label,set:(e,t)=>{e.label=t}},metadata:h},o,l),h&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h})})(),e})(),se=(()=>{var e;let t,l,n,h,c=ie,d=[],u=[],p=[],g=[];return e=class extends c{constructor(){super(...arguments),this.iconLayout=(v(this,d),v(this,u,void 0)),this.graphics=v(this,p,void 0),this.svg=v(this,g,void 0)}initCol(){super.initCol(),this.classList.add("col-icon")}get iconColor(){return s.ThemeAnimator.getter()}onApplyTheme(e,t,l){if(super.onApplyTheme(e,t,l),!this.graphics.derived){const s=this.graphics.value;if(s instanceof a.Icon){const n=s.withTheme(e,t);this.graphics.setState(n,!!s.isThemed()&&l,i.Affinity.Reflexive)}}}onResize(){super.onResize(),this.requireUpdate(r.View.NeedsLayout)}needsDisplay(e){return 0==(this.flags&r.View.NeedsLayout)&&(e&=~r.View.NeedsLayout),e}onLayout(){super.onLayout(),this.layoutIcon()}layoutIcon(){const e=this.svg.view;if(null===e||!e.attributes.width.hasAffinity(i.Affinity.Intrinsic)&&!e.attributes.height.hasAffinity(i.Affinity.Intrinsic)&&!e.attributes.viewBox.hasAffinity(i.Affinity.Intrinsic))return;const t=this.style.width.pxValue(),l=this.style.height.pxValue();e.attributes.setIntrinsic({width:t,height:l,viewBox:"0 0 "+t+" "+l})}},(()=>{var v;const b="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=c[Symbol.metadata])&&void 0!==v?v:null):void 0;t=[i.Animator({valueType:a.IconLayout,value:null,updateFlags:r.View.NeedsLayout})],l=[s.ThemeAnimator({valueType:o.Color,value:null,updateFlags:r.View.NeedsLayout,didSetState(e){const t=null!==this.timing&&this.timing;this.owner.graphics.setState(this.owner.graphics.state,t,i.Affinity.Reflexive)}})],n=[s.ThemeAnimator({extends:a.IconGraphicsAnimator,valueType:a.Graphics,value:null,updateFlags:r.View.NeedsLayout,didSetValue(e,t){this.owner.callObservers("viewDidSetGraphics",e,this.owner)}})],h=[r.ViewRef({viewType:a.SvgIconView,viewKey:!0,binds:!0,init(){this.insertView()},initView(e){e.style.position.set("absolute"),e.iconLayout.setInherits(!0),e.iconColor.setInherits(!0),e.graphics.setInherits(!0)}})],w(e,null,l,{kind:"getter",name:"iconColor",static:!1,private:!1,access:{has:e=>"iconColor"in e,get:e=>e.iconColor},metadata:b},null,d),w(null,null,t,{kind:"field",name:"iconLayout",static:!1,private:!1,access:{has:e=>"iconLayout"in e,get:e=>e.iconLayout,set:(e,t)=>{e.iconLayout=t}},metadata:b},u,d),w(null,null,n,{kind:"field",name:"graphics",static:!1,private:!1,access:{has:e=>"graphics"in e,get:e=>e.graphics,set:(e,t)=>{e.graphics=t}},metadata:b},p,d),w(null,null,h,{kind:"field",name:"svg",static:!1,private:!1,access:{has:e=>"svg"in e,get:e=>e.svg,set:(e,t)=>{e.svg=t}},metadata:b},g,d),b&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:b})})(),e})(),ne=(()=>{var e;let t,i,l=ie,s=[],n=[],a=[];return e=class extends l{constructor(){super(...arguments),this.disclosure=(v(this,s),v(this,n,void 0)),this.button=v(this,a,void 0)}initCol(){super.initCol(),this.classList.add("col-disclosure")}didPress(e,t){e.preventDefault();const i=this.disclosure.inlet;i instanceof o.ExpansionAnimator&&i.toggle(),super.didPress(e,t)}},(()=>{var h;const c="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(h=l[Symbol.metadata])&&void 0!==h?h:null):void 0;t=[o.ExpansionAnimator({value:null,inherits:!0,inheritName:"expansion"})],i=[r.ViewRef({viewType:V,viewKey:!0,binds:!0,init(){this.insertView()}})],w(null,null,t,{kind:"field",name:"disclosure",static:!1,private:!1,access:{has:e=>"disclosure"in e,get:e=>e.disclosure,set:(e,t)=>{e.disclosure=t}},metadata:c},n,s),w(null,null,i,{kind:"field",name:"button",static:!1,private:!1,access:{has:e=>"button"in e,get:e=>e.button,set:(e,t)=>{e.button=t}},metadata:c},a,s),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),e})(),re=(()=>{var e;let t,l=u.Trait,s=[],n=[];return e=class extends l{constructor(){super(...arguments),this.layout=(v(this,s),v(this,n,void 0))}createColController(){return new he}},(()=>{var r;const o="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(r=l[Symbol.metadata])&&void 0!==r?r:null):void 0;t=[i.Property({valueType:M,value:null,didSetValue(e){this.owner.callObservers("traitDidSetLayout",e,this.owner)}})],w(null,null,t,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}},metadata:o},n,s),o&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o})})(),e})(),oe=(()=>{var e;let t,l=re,s=[],n=[];return e=class extends l{constructor(){super(...arguments),this.label=(v(this,s),v(this,n,void 0))}createColController(){return new ce}},(()=>{var r;const o="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(r=l[Symbol.metadata])&&void 0!==r?r:null):void 0;t=[i.Property({valueType:String,didSetValue(e){this.owner.callObservers("traitDidSetLabel",e,this.owner)}})],w(null,null,t,{kind:"field",name:"label",static:!1,private:!1,access:{has:e=>"label"in e,get:e=>e.label,set:(e,t)=>{e.label=t}},metadata:o},n,s),o&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o})})(),e})(),ae=(()=>{var e;let t,l=re,s=[],n=[];return e=class extends l{constructor(){super(...arguments),this.icon=(v(this,s),v(this,n,void 0))}createColController(){return new de}},(()=>{var r;const o="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(r=l[Symbol.metadata])&&void 0!==r?r:null):void 0;t=[i.Property({valueType:a.Graphics,value:null,didSetValue(e){this.owner.callObservers("traitDidSetIcon",e,this.owner)}})],w(null,null,t,{kind:"field",name:"icon",static:!1,private:!1,access:{has:e=>"icon"in e,get:e=>e.icon,set:(e,t)=>{e.icon=t}},metadata:o},n,s),o&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o})})(),e})(),he=(()=>{var e;let t,i=d.Controller,l=[],s=[];return e=class extends i{constructor(){super(...arguments),this.col=(v(this,l),v(this,s,void 0))}},(()=>{var n;const r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=i[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[d.TraitViewRef({traitType:re,observesTrait:!0,willAttachTrait(e){this.owner.callObservers("controllerWillAttachColTrait",e,this.owner)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachColTrait",e,this.owner)},traitDidSetLayout(e){this.owner.callObservers("controllerDidSetColLayout",e,this.owner)},viewType:ie,observesView:!0,willAttachView(e){this.owner.callObservers("controllerWillAttachColView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachColView",e,this.owner)},viewDidPress(e,t,i){this.owner.callObservers("controllerDidPressColView",e,t,i,this.owner)},viewDidLongPress(e,t){this.owner.callObservers("controllerDidLongPressColView",e,t,this.owner)}})],w(null,null,t,{kind:"field",name:"col",static:!1,private:!1,access:{has:e=>"col"in e,get:e=>e.col,set:(e,t)=>{e.col=t}},metadata:r},s,l),r&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),e})(),ce=(()=>{var e;let t,i,l=he,s=[],o=[],a=[];return e=class extends l{constructor(){super(...arguments),this.col=(v(this,s),v(this,o,void 0)),this.label=v(this,a,void 0)}setLabelView(e){const t=this.col.view;null!==t&&t.label.set(e)}},(()=>{var h;const c="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(h=l[Symbol.metadata])&&void 0!==h?h:null):void 0;t=[d.TraitViewRef({extends:!0,traitType:oe,observesTrait:!0,initTrait(e){this.owner.setLabelView(e.label.value)},deinitTrait(e){this.owner.setLabelView(void 0)},traitDidSetLabel(e){this.owner.setLabelView(e)},viewType:le,observesView:!0,initView(e){this.owner.label.setView(e.label.view);const t=this.trait;null!==t&&this.owner.setLabelView(t.label.value)},deinitView(e){this.owner.label.setView(null)},viewWillAttachLabel(e){this.owner.label.setView(e)},viewDidDetachLabel(e){this.owner.label.setView(null)}})],i=[r.ViewRef({viewType:n.HtmlView,willAttachView(e){this.owner.callObservers("controllerWillAttachColLabelView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachColLabelView",e,this.owner)}})],w(null,null,t,{kind:"field",name:"col",static:!1,private:!1,access:{has:e=>"col"in e,get:e=>e.col,set:(e,t)=>{e.col=t}},metadata:c},o,s),w(null,null,i,{kind:"field",name:"label",static:!1,private:!1,access:{has:e=>"label"in e,get:e=>e.label,set:(e,t)=>{e.label=t}},metadata:c},a,s),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),e})(),de=(()=>{var e;let t,i=he,l=[],s=[];return e=class extends i{constructor(){super(...arguments),this.col=(v(this,l),v(this,s,void 0))}setIcon(e){const t=this.col.view;null!==t&&t.graphics.set(e)}},(()=>{var n;const r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=i[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[d.TraitViewRef({extends:!0,traitType:ae,observesTrait:!0,initTrait(e){this.owner.setIcon(e.icon.value)},deinitTrait(e){this.owner.setIcon(null)},traitDidSetIcon(e){this.owner.setIcon(e)},viewType:se,observesView:!0,initView(e){const t=this.trait;null!==t&&this.owner.setIcon(t.icon.value)},viewDidSetGraphics(e){this.owner.callObservers("controllerDidSetColIcon",e,this.owner)}})],w(null,null,t,{kind:"field",name:"col",static:!1,private:!1,access:{has:e=>"col"in e,get:e=>e.col,set:(e,t)=>{e.col=t}},metadata:r},s,l),r&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),e})(),ue=(()=>{var e;let t,a,h,c,d,u,p,g=n.HtmlView,b=[],m=[],y=[],f=[],V=[],T=[],S=[],C=[];return e=class extends g{constructor(e){super(e),this.layout=(v(this,b),v(this,m,void 0)),this.depth=v(this,y,void 0),this.rowSpacing=v(this,f,void 0),this.rowHeight=v(this,V,void 0),this.stretch=v(this,T,void 0),this.cols=v(this,S,void 0),this.gesture=v(this,C,void 0),this.initHeader()}initHeader(){this.setIntrinsic({classList:["header"],style:{position:"relative",overflow:"hidden"}})}getCol(e,t){void 0===t&&(t=ie);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateCol(e,t){let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setCol(e,t){this.setChild(e,t)}onLayout(){super.onLayout(),this.layoutHeader()}layoutHeader(){this.rowHeight.recohere(this.updateTime);const e=this.rowHeight.value;null!==e&&this.style.height.setIntrinsic(e)}displayChildren(e,t){0!=(e&r.View.NeedsLayout)?this.layoutChildren(e,t):super.displayChildren(e,t)}layoutChildren(e,t){const i=this.layout.value,l=this.style.height.state,s=this.stretch.getPhaseOr(1);super.displayChildren(e,(function(e,n){if(e instanceof ie){const t=e.key,n=null!==i&&void 0!==t?i.getCol(t):null;null!==n?e.style.setIntrinsic({display:n.hidden||null===n.width?"none":"flex",left:n.left,width:n.width,height:l,color:n.textColor,opacity:n.persistent?void 0:s}):e.style.setIntrinsic({display:"none",left:null,width:null,height:null,color:null,opacity:void 0})}t.call(this,e,n)}))}},(()=>{var v;const k="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=g[Symbol.metadata])&&void 0!==v?v:null):void 0;t=[i.Property({valueType:N,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],a=[i.Property({valueType:Number,value:0,inherits:!0,updateFlags:r.View.NeedsLayout})],h=[s.ThemeConstraintAnimator({valueType:l.Length,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],c=[s.ThemeConstraintAnimator({valueType:l.Length,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],d=[o.ExpansionAnimator({value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],u=[r.ViewSet({viewType:ie,binds:!0,initView(e){e.style.setIntrinsic({display:"none",position:"absolute",left:0,top:0,width:0,height:this.owner.style.height.state})},willAttachView(e,t){this.owner.callObservers("viewWillAttachCol",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachCol",e,this.owner)}})],p=[r.PositionGesture({bindsOwner:!0,didPress(e,t){if(this.owner.clientBounds.contains(e.x,e.y)){if(!e.defaultPrevented){let i=e.target;for(;i instanceof Node&&i!==this.owner.node;){const l=n.NodeView.get(i);if(l instanceof ie){l.didPress(e,t);break}i=i.parentNode}}e.defaultPrevented||this.owner.callObservers("viewDidPress",e,t,this.owner)}},didLongPress(e){if(!e.defaultPrevented){let t=e.target;for(;t instanceof Node&&t!==this.owner.node;){const i=n.NodeView.get(t);if(i instanceof ie){i.didLongPress(e);break}t=t.parentNode}}e.defaultPrevented||this.owner.callObservers("viewDidLongPress",e,this.owner)}})],w(null,null,t,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}},metadata:k},m,b),w(null,null,a,{kind:"field",name:"depth",static:!1,private:!1,access:{has:e=>"depth"in e,get:e=>e.depth,set:(e,t)=>{e.depth=t}},metadata:k},y,b),w(null,null,h,{kind:"field",name:"rowSpacing",static:!1,private:!1,access:{has:e=>"rowSpacing"in e,get:e=>e.rowSpacing,set:(e,t)=>{e.rowSpacing=t}},metadata:k},f,b),w(null,null,c,{kind:"field",name:"rowHeight",static:!1,private:!1,access:{has:e=>"rowHeight"in e,get:e=>e.rowHeight,set:(e,t)=>{e.rowHeight=t}},metadata:k},V,b),w(null,null,d,{kind:"field",name:"stretch",static:!1,private:!1,access:{has:e=>"stretch"in e,get:e=>e.stretch,set:(e,t)=>{e.stretch=t}},metadata:k},T,b),w(null,null,u,{kind:"field",name:"cols",static:!1,private:!1,access:{has:e=>"cols"in e,get:e=>e.cols,set:(e,t)=>{e.cols=t}},metadata:k},S,b),w(null,null,p,{kind:"field",name:"gesture",static:!1,private:!1,access:{has:e=>"gesture"in e,get:e=>e.gesture,set:(e,t)=>{e.gesture=t}},metadata:k},C,b),k&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:k})})(),e})(),we=(()=>{var e;let t,i=u.Trait,l=[],s=[];return e=class extends i{constructor(){super(...arguments),this.cols=(v(this,l),v(this,s,void 0))}getCol(e,t){void 0===t&&(t=re);const i=this.getTrait(e);return i instanceof t?i:null}getOrCreateCol(e,t){let i=this.getTrait(e,t);return null===i&&(i=t.create(),this.setTrait(e,i)),i}setCol(e,t){this.setTrait(e,t)}onStartConsuming(){super.onStartConsuming(),this.cols.consumeTraits(this)}onStopConsuming(){super.onStopConsuming(),this.cols.unconsumeTraits(this)}},(()=>{var n;const r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=i[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[u.TraitSet({traitType:re,binds:!0,willAttachTrait(e,t){this.owner.callObservers("traitWillAttachCol",e,t,this.owner)},didAttachTrait(e){this.owner.consuming&&e.consume(this.owner)},willDetachTrait(e){this.owner.consuming&&e.unconsume(this.owner)},didDetachTrait(e){this.owner.callObservers("traitDidDetachCol",e,this.owner)},detectModel:e=>e.getTrait(re)})],w(null,null,t,{kind:"field",name:"cols",static:!1,private:!1,access:{has:e=>"cols"in e,get:e=>e.cols,set:(e,t)=>{e.cols=t}},metadata:r},s,l),r&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),e})(),ve=(()=>{var e;let t,i,l=d.Controller,s=[],n=[],r=[];return e=class extends l{constructor(){super(...arguments),this.header=(v(this,s),v(this,n,void 0)),this.cols=v(this,r,void 0)}getCol(e,t){void 0===t&&(t=he);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateCol(e,t){let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setCol(e,t){this.setChild(e,t)}getColTrait(e,t){const i=this.header.trait;return null!==i?i.getCol(e,t):null}getOrCreateColTrait(e,t){const i=this.header.trait;if(null===i)throw new Error("no header trait");return i.getOrCreateCol(e,t)}setColTrait(e,t){const i=this.header.trait;if(null===i)throw new Error("no header trait");i.setCol(e,t)}getColView(e,t){const i=this.header.view;return null!==i?i.getCol(e,t):null}getOrCreateColView(e,t){let i=this.header.view;if(null===i){if(i=this.header.createView(),null===i)throw new Error("no header view");this.header.setView(i)}return i.getOrCreateCol(e,t)}setColView(e,t){let i=this.header.view;if(null===i){if(i=this.header.createView(),null===i)throw new Error("no header view");this.header.setView(i)}i.setCol(e,t)}},(()=>{var o;const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(o=l[Symbol.metadata])&&void 0!==o?o:null):void 0;t=[d.TraitViewRef({traitType:we,observesTrait:!0,willAttachTrait(e){this.owner.callObservers("controllerWillAttachHeaderTrait",e,this.owner)},didAttachTrait(e){this.owner.cols.addTraits(e.cols.traits)},willDetachTrait(e){this.owner.cols.deleteTraits(e.cols.traits)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachHeaderTrait",e,this.owner)},traitWillAttachCol(e,t){this.owner.cols.addTrait(e,t)},traitDidDetachCol(e){this.owner.cols.deleteTrait(e)},viewType:ue,observesView:!0,initView(e){const t=this.owner.cols.controllers;for(const i in t){const l=t[i],s=l.col.view;if(null!==s&&null===s.parent){const t=l.col.trait;null!==t&&l.col.insertView(e,void 0,void 0,t.key)}}},insertChildView(e,t,i,l){e.prependChild(t,l)},willAttachView(e){this.owner.callObservers("controllerWillAttachHeaderView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachHeaderView",e,this.owner)},viewDidPress(e,t,i){this.owner.callObservers("controllerDidPressHeaderView",e,t,i,this.owner)},viewDidLongPress(e,t){this.owner.callObservers("controllerDidLongPressHeaderView",e,t,this.owner)}})],i=[d.TraitViewControllerSet({controllerType:he,binds:!0,observes:!0,get parentView(){return this.owner.header.view},getTraitViewRef:e=>e.col,willAttachController(e){this.owner.callObservers("controllerWillAttachCol",e,this.owner)},didAttachController(e){const t=e.col.trait;null!==t&&this.attachColTrait(t,e);const i=e.col.view;null!==i&&this.attachColView(i,e)},willDetachController(e){const t=e.col.view;null!==t&&this.detachColView(t,e);const i=e.col.trait;null!==i&&this.detachColTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachCol",e,this.owner)},controllerWillAttachColTrait(e,t){this.owner.callObservers("controllerWillAttachColTrait",e,t,this.owner),this.attachColTrait(e,t)},controllerDidDetachColTrait(e,t){this.detachColTrait(e,t),this.owner.callObservers("controllerDidDetachColTrait",e,t,this.owner)},attachColTrait(e,t){},detachColTrait(e,t){},controllerWillAttachColView(e,t){this.owner.callObservers("controllerWillAttachColView",e,t,this.owner),this.attachColView(e,t)},controllerDidDetachColView(e,t){this.detachColView(e,t),this.owner.callObservers("controllerDidDetachColView",e,t,this.owner)},controllerDidSetColLayout(e,t){this.owner.callObservers("controllerDidSetColLayout",e,t,this.owner)},attachColView(e,t){if(e instanceof le){const i=e.label.view;null!==i&&this.attachColLabelView(i,t)}},detachColView(e,t){if(e instanceof le){const i=e.label.view;null!==i&&this.detachColLabelView(i,t)}e.remove()},controllerDidPressColView(e,t,i,l){this.owner.callObservers("controllerDidPressColView",e,t,i,l,this.owner)},controllerDidLongPressColView(e,t,i){this.owner.callObservers("controllerDidLongPressColView",e,t,i,this.owner)},controllerWillAttachColLabelView(e,t){this.owner.callObservers("controllerWillAttachColLabelView",e,t,this.owner),this.attachColLabelView(e,t)},controllerDidDetachColLabelView(e,t){this.detachColLabelView(e,t),this.owner.callObservers("controllerDidDetachColLabelView",e,t,this.owner)},attachColLabelView(e,t){},detachColLabelView(e,t){},controllerDidSetColIcon(e,t){this.owner.callObservers("controllerDidSetColIcon",e,t,this.owner)},createController(e){return void 0!==e?e.createColController():super.createController()}})],w(null,null,t,{kind:"field",name:"header",static:!1,private:!1,access:{has:e=>"header"in e,get:e=>e.header,set:(e,t)=>{e.header=t}},metadata:a},n,s),w(null,null,i,{kind:"field",name:"cols",static:!1,private:!1,access:{has:e=>"cols"in e,get:e=>e.cols,set:(e,t)=>{e.cols=t}},metadata:a},r,s),a&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),e})(),pe=(()=>{var e;let t,a,h,c,d,u,p,g,b,m,y,f,V,T,S=n.HtmlView,C=[],k=[],L=[],D=[],I=[],O=[],A=[],P=[],x=[],B=[],R=[],W=[],H=[],F=[],M=[];return e=class extends S{constructor(e){super(e),this.layout=(v(this,C),v(this,k,void 0)),this.depth=v(this,L,void 0),this.rowSpacing=v(this,D,void 0),this.rowHeight=v(this,I,void 0),this.hovers=v(this,O,void 0),this.glows=v(this,A,void 0),this.expansion=v(this,P,void 0),this.expanding=v(this,x,void 0),this.disclosure=v(this,B,void 0),this.disclosing=v(this,R,void 0),this.stretch=v(this,W,void 0),this.header=v(this,H,void 0),this.rows=v(this,F,void 0),this.visibleFrame=v(this,M,void 0),this.visibleViews=[],this.initTable()}initTable(){this.setIntrinsic({classList:["table"],style:{position:"relative",backgroundColor:s.Look.backgroundColor,boxSizing:"border-box"}})}getRow(e,t){void 0===t&&(t=_);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateRow(e,t){void 0===t&&(t=_);let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setRow(e,t){this.setChild(e,t)}detectVisibleFrame(){const e=this.rowHeight.getValueOr(l.Length.zero()).pxValue(),t=this.visibleFrame.value;if(null!==t){const i=this.style.left.pxState(),s=this.style.top.pxState();return new l.R2Box(t.xMin-i-0,t.yMin-s-e,t.xMax-i+0,t.yMax-s+e)}{const t=this.node.getBoundingClientRect(),i=-t.x-0,s=-t.y-e,n=window.innerWidth-t.x+0,r=window.innerHeight-t.y+e;return new l.R2Box(i,s,n,r)}}needsProcess(e){return 0!=(e&r.View.NeedsResize)&&(e|=r.View.NeedsScroll),e}onResize(){super.onResize(),this.resizeTable()}resizeTable(){const e=this.layout.derived?null:this.layout.value;if(null!==e){const t=this.layout.inletValue;let i=null;null!=t&&null!==t.width&&(i=t.width.pxValue()),null===i&&(i=this.style.width.pxState());const l=this.edgeInsets.value,s=this.style.paddingLeft.pxState(),n=this.style.paddingRight.pxState();let r=null!==l?l.insetLeft:0;r+=s;let o=null!==l?l.insetRight:0;o+=n;const a=e.resized(i,r,o);this.layout.set(a)}}processVisibleViews(e,t){const i=this.visibleViews;let l=0;for(;l<i.length;){const s=i[l];t.call(this,s,e),0==(s.flags&r.View.RemovingFlag)?l+=1:(s.setFlags(s.flags&~r.View.RemovingFlag),this.removeChild(s))}}processChildren(e,t){this.culled||(0!=(e&r.View.NeedsScroll)?this.scrollChildren(e,t):this.processVisibleViews(e,t))}scrollChildren(e,t){const s=this.rowHeight.getValue().pxValue(),r=this.rowSpacing.getValue().pxValue(s),o=this.expanding.getPhaseOr(1),a=this.disclosing.getPhaseOr(1),h=this.visibleViews;h.length=0;const c=this.detectVisibleFrame();this.visibleFrame.setOutletValue(c);let d=0,u=0,w=0;super.processChildren(e,(function(e,s){let v;if((e instanceof _||e instanceof ue)&&(0!==w&&(d+=e instanceof _?r*a*o:r*a,u+=r),e.style.top.hasAffinity(i.Affinity.Intrinsic)&&e.style.top.setInterpolatedValue(l.Length.px(d),l.Length.px(u))),e instanceof n.HtmlView){const t=e.style.top.state,i=e.style.height.state;if(null!==t&&null!==i){const l=c.yMin,s=c.yMax,n=t.pxValue(),r=n+i.pxValue();v=0!==a&&(e instanceof ue||0!==o)&&l<=r&&n<=s&&n!==r,e.style.display.setIntrinsic(v?"flex":"none"),e.setCulled(!v)}else v=!0}else v=!0;v&&(h.push(e),t.call(this,e,s)),(e instanceof _||e instanceof ue)&&(d+=e instanceof _?e.style.height.pxValue()*a*o:e.style.height.pxValue()*a,u+=e.style.height.pxState(),w+=1)}))}displayVisibleViews(e,t){const i=this.visibleViews;let l=0;for(;l<i.length;){const s=i[l];t.call(this,s,e),0==(s.flags&r.View.RemovingFlag)?l+=1:(s.setFlags(s.flags&~r.View.RemovingFlag),this.removeChild(s))}}displayChildren(e,t){0!=(e&r.View.NeedsLayout)?this.layoutChildren(e,t):this.displayVisibleViews(e,t)}layoutChildren(e,t){this.rowHeight.recohere(this.updateTime),this.resizeTable();const r=this.layout.value,o=null!==r?r.width:null,a=this.rowHeight.getValue().pxValue(),h=this.rowSpacing.getValue().pxValue(a),c=this.expanding.getPhaseOr(1),d=this.disclosure.getPhaseOr(1),u=this.disclosing.getPhaseOr(1),w=this.disclosing.tweening?null:this.getLook(s.Look.timing),v=this.visibleViews;v.length=0;const p=this.detectVisibleFrame();this.visibleFrame.setOutletValue(p);let g=0,b=0,m=0;super.displayChildren(e,(function(e,s){let r;if((e instanceof _||e instanceof ue)&&(0!==m&&(g+=e instanceof _?h*u*c:h*u,b+=h),e.style.top.hasAffinity(i.Affinity.Intrinsic)&&(g!==b||"none"===e.style.display.value?e.style.top.setInterpolatedValue(l.Length.px(g),l.Length.px(b)):e.style.top.setIntrinsic(b,w)),e.style.width.setIntrinsic(o)),e instanceof n.HtmlView){const t=e.style.top.state,i=e.style.height.state;if(null!==t&&null!==i){const l=p.yMin,s=p.yMax,n=t.pxValue(),o=n+i.pxValue();r=0!==u&&(e instanceof ue||0!==c)&&l<=o&&n<=s&&n!==o}else r=!0;e instanceof _?e.style.opacity.setIntrinsic(d*c):e.style.opacity.setIntrinsic(d),e.style.display.setIntrinsic(r?"flex":"none"),e.setCulled(!r)}else r=!0;r&&v.push(e),t.call(this,e,s),(e instanceof _||e instanceof ue)&&(g+=e instanceof _?e.style.height.pxValue()*u*c:e.style.height.pxValue()*u,b+=e.style.height.pxState(),m+=1)})),this.style.height.hasAffinity(i.Affinity.Intrinsic)&&this.style.height.setInterpolatedValue(l.Length.px(g),l.Length.px(b))}},(()=>{var n;const v="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=S[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[i.Property({valueType:N,value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],a=[i.Property({valueType:Number,value:0,inherits:!0,updateFlags:r.View.NeedsLayout,didSetValue(e,t){this.owner.modifyTheme(s.Feel.default,[[s.Feel.nested,0!==e?1:void 0]],!1)}})],h=[s.ThemeConstraintAnimator({valueType:l.Length,value:l.Length.zero(),inherits:!0,updateFlags:r.View.NeedsLayout})],c=[s.ThemeConstraintAnimator({valueType:l.Length,value:l.Length.px(24),inherits:!0,updateFlags:r.View.NeedsLayout})],d=[i.Property({valueType:Boolean,value:!1,inherits:!0})],u=[i.Property({valueType:Boolean,value:!0,inherits:!0})],p=[o.ExpansionAnimator({value:o.Expansion.expanded(),get transition(){return this.owner.getLookOr(s.Look.timing,null)},willExpand(){this.owner.callObservers("viewWillExpand",this.owner)},didExpand(){this.owner.callObservers("viewDidExpand",this.owner)},willCollapse(){this.owner.callObservers("viewWillCollapse",this.owner)},didCollapse(){this.owner.callObservers("viewDidCollapse",this.owner)},didSetValue(e,t){1!==e.phase?this.owner.expanding.setIntrinsic(e):this.owner.expanding.setAffinity(i.Affinity.Transient);const l=this.owner.getRoot(pe);null!==l?l.requireUpdate(r.View.NeedsLayout):this.owner.requireUpdate(r.View.NeedsLayout)}})],g=[o.ExpansionAnimator({value:o.Expansion.expanded(),inherits:!0})],b=[o.ExpansionAnimator({value:null,inherits:!0})],m=[o.ExpansionAnimator({value:o.Expansion.expanded(),inherits:!0})],y=[o.ExpansionAnimator({value:null,inherits:!0,updateFlags:r.View.NeedsLayout})],f=[r.ViewRef({viewType:ue,viewKey:!0,binds:!0,initView(e){const t=this.owner.layout.value;e.style.setIntrinsic({display:"none",position:"absolute",left:0,top:null,width:null!==t?t.width:null}),e.setCulled(!0)},willAttachView(e){this.owner.callObservers("viewWillAttachHeader",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachHeader",e,this.owner)},insertChild(e,t,i,l){e.prependChild(t,l)}})],V=[r.ViewSet({viewType:_,binds:!0,observes:!0,initView(e){const t=this.owner.layout.value;e.style.setIntrinsic({display:"none",position:"absolute",left:0,top:null,width:null!==t?t.width:null}),e.setCulled(!0)},willAttachView(e,t){this.owner.callObservers("viewWillAttachRow",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachRow",e,this.owner)},viewWillAttachLeaf(e,t){this.owner.callObservers("viewWillAttachLeaf",e,t)},viewDidDetachLeaf(e,t){this.owner.callObservers("viewDidDetachLeaf",e,t)},viewDidEnterLeaf(e,t){this.owner.callObservers("viewDidEnterLeaf",e,t)},viewDidLeaveLeaf(e,t){this.owner.callObservers("viewDidLeaveLeaf",e,t)},viewDidPressLeaf(e,t,i,l){this.owner.callObservers("viewDidPressLeaf",e,t,i,l)},viewDidLongPressLeaf(e,t,i){this.owner.callObservers("viewDidLongPressLeaf",e,t,i)},viewWillAttachTree(e,t){this.owner.callObservers("viewWillAttachTree",e,t)},viewDidDetachTree(e,t){this.owner.callObservers("viewDidDetachTree",e,t)},viewWillHighlightLeaf(e,t){this.owner.callObservers("viewWillHighlightLeaf",e,t)},viewDidHighlightLeaf(e,t){this.owner.callObservers("viewDidHighlightLeaf",e,t)},viewWillUnhighlightLeaf(e,t){this.owner.callObservers("viewWillUnhighlightLeaf",e,t)},viewDidUnhighlightLeaf(e,t){this.owner.callObservers("viewDidUnhighlightLeaf",e,t)},viewWillExpand(e){this.owner.callObservers("viewWillExpandRow",e)},viewDidExpand(e){this.owner.callObservers("viewDidExpandRow",e)},viewWillCollapse(e){this.owner.callObservers("viewWillCollapseRow",e)},viewDidCollapse(e){this.owner.callObservers("viewDidCollapseRow",e)}})],T=[i.Property({valueType:l.R2Box,value:null,inherits:!0,init(){this.outletValue=null},getOutletValue(e){return this.outletValue},setOutletValue(e){const t=this.outletValue;this.equalValues(e,t)||(this.outletValue=e,this.decohereOutlets())}})],w(null,null,t,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}},metadata:v},k,C),w(null,null,a,{kind:"field",name:"depth",static:!1,private:!1,access:{has:e=>"depth"in e,get:e=>e.depth,set:(e,t)=>{e.depth=t}},metadata:v},L,C),w(null,null,h,{kind:"field",name:"rowSpacing",static:!1,private:!1,access:{has:e=>"rowSpacing"in e,get:e=>e.rowSpacing,set:(e,t)=>{e.rowSpacing=t}},metadata:v},D,C),w(null,null,c,{kind:"field",name:"rowHeight",static:!1,private:!1,access:{has:e=>"rowHeight"in e,get:e=>e.rowHeight,set:(e,t)=>{e.rowHeight=t}},metadata:v},I,C),w(null,null,d,{kind:"field",name:"hovers",static:!1,private:!1,access:{has:e=>"hovers"in e,get:e=>e.hovers,set:(e,t)=>{e.hovers=t}},metadata:v},O,C),w(null,null,u,{kind:"field",name:"glows",static:!1,private:!1,access:{has:e=>"glows"in e,get:e=>e.glows,set:(e,t)=>{e.glows=t}},metadata:v},A,C),w(null,null,p,{kind:"field",name:"expansion",static:!1,private:!1,access:{has:e=>"expansion"in e,get:e=>e.expansion,set:(e,t)=>{e.expansion=t}},metadata:v},P,C),w(null,null,g,{kind:"field",name:"expanding",static:!1,private:!1,access:{has:e=>"expanding"in e,get:e=>e.expanding,set:(e,t)=>{e.expanding=t}},metadata:v},x,C),w(null,null,b,{kind:"field",name:"disclosure",static:!1,private:!1,access:{has:e=>"disclosure"in e,get:e=>e.disclosure,set:(e,t)=>{e.disclosure=t}},metadata:v},B,C),w(null,null,m,{kind:"field",name:"disclosing",static:!1,private:!1,access:{has:e=>"disclosing"in e,get:e=>e.disclosing,set:(e,t)=>{e.disclosing=t}},metadata:v},R,C),w(null,null,y,{kind:"field",name:"stretch",static:!1,private:!1,access:{has:e=>"stretch"in e,get:e=>e.stretch,set:(e,t)=>{e.stretch=t}},metadata:v},W,C),w(null,null,f,{kind:"field",name:"header",static:!1,private:!1,access:{has:e=>"header"in e,get:e=>e.header,set:(e,t)=>{e.header=t}},metadata:v},H,C),w(null,null,V,{kind:"field",name:"rows",static:!1,private:!1,access:{has:e=>"rows"in e,get:e=>e.rows,set:(e,t)=>{e.rows=t}},metadata:v},F,C),w(null,null,T,{kind:"field",name:"visibleFrame",static:!1,private:!1,access:{has:e=>"visibleFrame"in e,get:e=>e.visibleFrame,set:(e,t)=>{e.visibleFrame=t}},metadata:v},M,C),v&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:v})})(),e})(),ge=(()=>{var e;let t,s,n,r,o,a=u.Trait,h=[],c=[],d=[],p=[],g=[],b=[];return e=class extends a{constructor(){super(...arguments),this.layout=(v(this,h),v(this,c,void 0)),this.colSpacing=v(this,d,void 0),this.header=v(this,p,void 0),this.cols=v(this,g,void 0),this.rows=v(this,b,void 0)}createLayout(){const e=[],t=this.cols.traits;for(const i in t){const l=t[i].layout.value;null!==l&&e.push(l)}const i=this.colSpacing.value;return new N(null,null,null,i,e)}updateLayout(){const e=this.createLayout();this.layout.setIntrinsic(e)}onStartConsuming(){super.onStartConsuming(),this.cols.consumeTraits(this),this.rows.consumeTraits(this)}onStopConsuming(){super.onStopConsuming(),this.rows.unconsumeTraits(this),this.cols.unconsumeTraits(this)}},(()=>{var v;const m="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=a[Symbol.metadata])&&void 0!==v?v:null):void 0;t=[i.Property({valueType:N,value:null,didSetValue(e){this.owner.callObservers("traitDidSetTableLayout",e,this.owner)}})],s=[i.Property({valueType:l.Length,value:null,didSetValue(e,t){this.owner.updateLayout()}})],n=[u.TraitRef({traitType:we,binds:!0,willAttachTrait(e){this.owner.callObservers("traitWillAttachHeader",e,this.owner)},didDetachTrait(e){this.owner.callObservers("traitDidDetachHeader",e,this.owner)},detectTrait:e=>e instanceof we?e:null})],r=[u.TraitSet({traitType:re,binds:!0,observes:!0,willAttachTrait(e,t){this.owner.callObservers("traitWillAttachCol",e,t,this.owner)},didAttachTrait(e){this.owner.updateLayout(),this.owner.consuming&&e.consume(this.owner)},willDetachTrait(e){this.owner.consuming&&e.unconsume(this.owner)},didDetachTrait(e){this.owner.updateLayout(),this.owner.callObservers("traitDidDetachCol",e,this.owner)},traitDidSetLayout(e){this.owner.updateLayout()},detectModel:e=>e.getTrait(re)})],o=[u.TraitSet({traitType:ee,binds:!0,willAttachTrait(e,t){this.owner.callObservers("traitWillAttachRow",e,t,this.owner)},didAttachTrait(e){this.owner.consuming&&e.consume(this.owner)},willDetachTrait(e){this.owner.consuming&&e.unconsume(this.owner)},didDetachTrait(e){this.owner.callObservers("traitDidDetachRow",e,this.owner)},detectModel:e=>e.getTrait(ee),detectTrait:e=>null})],w(null,null,t,{kind:"field",name:"layout",static:!1,private:!1,access:{has:e=>"layout"in e,get:e=>e.layout,set:(e,t)=>{e.layout=t}},metadata:m},c,h),w(null,null,s,{kind:"field",name:"colSpacing",static:!1,private:!1,access:{has:e=>"colSpacing"in e,get:e=>e.colSpacing,set:(e,t)=>{e.colSpacing=t}},metadata:m},d,h),w(null,null,n,{kind:"field",name:"header",static:!1,private:!1,access:{has:e=>"header"in e,get:e=>e.header,set:(e,t)=>{e.header=t}},metadata:m},p,h),w(null,null,r,{kind:"field",name:"cols",static:!1,private:!1,access:{has:e=>"cols"in e,get:e=>e.cols,set:(e,t)=>{e.cols=t}},metadata:m},g,h),w(null,null,o,{kind:"field",name:"rows",static:!1,private:!1,access:{has:e=>"rows"in e,get:e=>e.rows,set:(e,t)=>{e.rows=t}},metadata:m},b,h),m&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})})(),e})(),be=(()=>{var e;let t,i,l,s,n=d.Controller,r=[],o=[],a=[],h=[],c=[];return e=class extends n{constructor(){super(...arguments),this.table=(v(this,r),v(this,o,void 0)),this.header=v(this,a,void 0),this.cols=v(this,h,void 0),this.rows=v(this,c,void 0)}layoutTable(e,t){t.layout.setIntrinsic(e)}},(()=>{var u;const v="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(u=n[Symbol.metadata])&&void 0!==u?u:null):void 0;t=[d.TraitViewRef({traitType:ge,observesTrait:!0,willAttachTrait(e){this.owner.callObservers("controllerWillAttachTableTrait",e,this.owner)},didAttachTrait(e){const t=e.header.trait;null!==t&&this.owner.header.setTrait(t);const i=e.cols.traits;for(const e in i){const t=i[e];this.owner.cols.addTrait(t,null,t.key)}this.owner.rows.addTraits(e.rows.traits);const l=this.view;if(null!==l){const t=e.layout.value;null!==t&&this.owner.layoutTable(t,l)}},willDetachTrait(e){this.owner.rows.deleteTraits(e.rows.traits),this.owner.cols.deleteTraits(e.cols.traits);const t=e.header.trait;null!==t&&this.owner.header.deleteTrait(t)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachTableTrait",e,this.owner)},traitDidSetTableLayout(e){this.owner.callObservers("controllerDidSetTableLayout",e,this.owner)},traitWillAttachHeader(e){this.owner.header.setTrait(e)},traitDidDetachHeader(e){this.owner.header.deleteTrait(e)},traitWillAttachCol(e,t){this.owner.cols.addTrait(e,t,e.key)},traitDidDetachCol(e){this.owner.cols.deleteTrait(e)},traitWillAttachRow(e,t){this.owner.rows.addTrait(e,t)},traitDidDetachRow(e){this.owner.rows.deleteTrait(e)},viewType:pe,observesView:!0,initView(e){const t=this.owner.header.controller;null!==t&&(t.header.insertView(e),null===e.header.view&&e.header.setView(t.header.view));const i=this.owner.rows.controllers;for(const t in i){const l=i[t],s=l.row.view;if(null!==s&&null===s.parent){const t=this.owner.rows.getTargetView(l);l.row.insertView(e,void 0,t)}}const l=this.trait;if(null!==l){const t=l.layout.value;null!==t&&this.owner.layoutTable(t,e)}},willAttachView(e){this.owner.callObservers("controllerWillAttachTableView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachTableView",e,this.owner)},viewWillAttachHeader(e){const t=this.owner.header.controller;null!==t&&t.header.setView(e)},viewDidDetachHeader(e){const t=this.owner.header.controller;null!==t&&t.header.setView(null)},viewWillExpand(e){this.owner.callObservers("controllerWillExpandTableView",e,this.owner)},viewDidExpand(e){this.owner.callObservers("controllerDidExpandTableView",e,this.owner)},viewWillCollapse(e){this.owner.callObservers("controllerWillCollapseTableView",e,this.owner)},viewDidCollapse(e){this.owner.callObservers("controllerDidCollapseTableView",e,this.owner)}})],i=[d.TraitViewControllerRef({controllerType:ve,binds:!0,observes:!0,get parentView(){return this.owner.table.view},getTraitViewRef:e=>e.header,initController(e){const t=this.owner.table.trait;if(null!==t){const i=t.header.trait;null!==i&&e.header.setTrait(i)}},willAttachController(e){this.owner.callObservers("controllerWillAttachHeader",e,this.owner)},didAttachController(e){const t=e.header.trait;null!==t&&this.attachHeaderTrait(t,e);const i=e.header.view;null!==i&&this.attachHeaderView(i,e)},willDetachController(e){const t=e.header.view;null!==t&&this.detachHeaderView(t,e);const i=e.header.trait;null!==i&&this.detachHeaderTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachHeader",e,this.owner)},controllerWillAttachHeaderTrait(e,t){this.owner.callObservers("controllerWillAttachHeaderTrait",e,this.owner),this.attachHeaderTrait(e,t)},controllerDidDetachHeaderTrait(e,t){this.detachHeaderTrait(e,t),this.owner.callObservers("controllerDidDetachHeaderTrait",e,this.owner)},attachHeaderTrait(e,t){},detachHeaderTrait(e,t){},controllerWillAttachHeaderView(e,t){this.owner.callObservers("controllerWillAttachHeaderView",e,this.owner),this.attachHeaderView(e,t)},controllerDidDetachHeaderView(e,t){this.detachHeaderView(e,t),this.owner.callObservers("controllerDidDetachHeaderView",e,this.owner)},attachHeaderView(e,t){const i=this.owner.table.view;null!==i&&null===i.header.view&&i.header.setView(e)},detachHeaderView(e,t){e.remove()},controllerDidPressHeaderView(e,t,i){this.owner.callObservers("controllerDidPressHeaderView",e,t,i,this.owner)},controllerDidLongPressHeaderView(e,t){this.owner.callObservers("controllerDidLongPressHeaderView",e,t,this.owner)},detectController:e=>e instanceof ve?e:null})],l=[d.TraitViewControllerSet({controllerType:he,binds:!0,observes:!0,getTraitViewRef:e=>e.col,willAttachController(e){this.owner.callObservers("controllerWillAttachCol",e,this.owner)},didAttachController(e){const t=e.col.trait;null!==t&&this.attachColTrait(t,e);const i=e.col.view;null!==i&&this.attachColView(i,e)},willDetachController(e){const t=e.col.trait;null!==t&&this.detachColTrait(t,e);const i=e.col.view;null!==i&&this.detachColView(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachCol",e,this.owner)},controllerWillAttachColTrait(e,t){this.owner.callObservers("controllerWillAttachColTrait",e,t,this.owner),this.attachColTrait(e,t)},controllerDidDetachColTrait(e,t){this.detachColTrait(e,t),this.owner.callObservers("controllerDidDetachColTrait",e,t,this.owner)},attachColTrait(e,t){},detachColTrait(e,t){},controllerDidSetColLayout(e,t){this.owner.callObservers("controllerDidSetColLayout",e,t,this.owner)},controllerWillAttachColView(e,t){this.owner.callObservers("controllerWillAttachColView",e,t,this.owner),this.attachColView(e,t)},controllerDidDetachColView(e,t){this.detachColView(e,t),this.owner.callObservers("controllerDidDetachColView",e,t,this.owner)},attachColView(e,t){if(e instanceof le){const i=e.label.view;null!==i&&this.attachColLabelView(i,t)}},detachColView(e,t){if(e instanceof le){const i=e.label.view;null!==i&&this.detachColLabelView(i,t)}e.remove()},controllerDidPressColView(e,t,i,l){this.owner.callObservers("controllerDidPressColView",e,t,i,l,this.owner)},controllerDidLongPressColView(e,t,i){this.owner.callObservers("controllerDidLongPressColView",e,t,i,this.owner)},controllerWillAttachColLabelView(e,t){this.owner.callObservers("controllerWillAttachColLabelView",e,t,this.owner),this.attachColLabelView(e,t)},controllerDidDetachColLabelView(e,t){this.detachColLabelView(e,t),this.owner.callObservers("controllerDidDetachColLabelView",e,t,this.owner)},attachColLabelView(e,t){},detachColLabelView(e,t){},controllerDidSetColIcon(e,t){this.owner.callObservers("controllerDidSetColIcon",e,t,this.owner)}})],s=[d.TraitViewControllerSet({controllerType:te,binds:!0,observes:!0,get parentView(){return this.owner.table.view},getTraitViewRef:e=>e.row,willAttachController(e){this.owner.callObservers("controllerWillAttachRow",e,this.owner)},didAttachController(e){const t=e.row.trait;null!==t&&this.attachRowTrait(t,e);const i=e.row.view;null!==i&&this.attachRowView(i,e)},willDetachController(e){const t=e.row.view;null!==t&&this.detachRowView(t,e);const i=e.row.trait;null!==i&&this.detachRowTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachRow",e,this.owner)},controllerDidAttachParent(e,t){const i=this.owner.table.view,l=t.row.view;if(null!==i&&null!==l){const e=t.getNextSibling(te),s=null!==e?e.row.view:null;i.reinsertChild(l,s)}},controllerWillAttachRowTrait(e,t){this.owner.callObservers("controllerWillAttachRowTrait",e,t,this.owner),this.attachRowTrait(e,t)},controllerDidDetachRowTrait(e,t){this.detachRowTrait(e,t),this.owner.callObservers("controllerDidDetachRowTrait",e,t,this.owner)},attachRowTrait(e,t){},detachRowTrait(e,t){},controllerWillAttachRowView(e,t){this.owner.callObservers("controllerWillAttachRowView",e,t,this.owner),this.attachRowView(e,t)},controllerDidDetachRowView(e,t){this.detachRowView(e,t),this.owner.callObservers("controllerDidDetachRowView",e,t,this.owner)},attachRowView(e,t){},detachRowView(e,t){e.remove()},controllerWillAttachLeafTrait(e,t){this.owner.callObservers("controllerWillAttachLeafTrait",e,t,this.owner),this.attachLeafTrait(e,t)},controllerDidDetachLeafTrait(e,t){this.detachLeafTrait(e,t),this.owner.callObservers("controllerDidDetachLeafTrait",e,t,this.owner)},attachLeafTrait(e,t){},detachLeafTrait(e,t){},controllerWillAttachLeafView(e,t){this.owner.callObservers("controllerWillAttachLeafView",e,t,this.owner),this.attachLeafView(e,t)},controllerDidDetachLeafView(e,t){this.detachLeafView(e,t),this.owner.callObservers("controllerDidDetachLeafView",e,t,this.owner)},attachLeafView(e,t){},detachLeafView(e,t){},controllerWillAttachCell(e,t){this.owner.callObservers("controllerWillAttachCell",e,t,this.owner),this.attachCell(e,t)},controllerDidDetachCell(e,t){this.detachCell(e,t),this.owner.callObservers("controllerDidDetachCell",e,t,this.owner)},attachCell(e,t){const i=e.cell.trait;null!==i&&this.attachCellTrait(i,e,t);const l=e.cell.view;null!==l&&this.attachCellView(l,e,t)},detachCell(e,t){const i=e.cell.trait;null!==i&&this.detachCellTrait(i,e,t);const l=e.cell.view;null!==l&&this.detachCellView(l,e,t)},controllerWillAttachCellTrait(e,t,i){this.owner.callObservers("controllerWillAttachCellTrait",e,t,i,this.owner),this.attachCellTrait(e,t,i)},controllerDidDetachCellTrait(e,t,i){this.detachCellTrait(e,t,i),this.owner.callObservers("controllerDidDetachCellTrait",e,t,i,this.owner)},attachCellTrait(e,t,i){},detachCellTrait(e,t,i){},controllerWillAttachCellView(e,t,i){this.owner.callObservers("controllerWillAttachCellView",e,t,i,this.owner),this.attachCellView(e,t,i)},controllerDidDetachCellView(e,t,i){this.detachCellView(e,t,i),this.owner.callObservers("controllerDidDetachCellView",e,t,i,this.owner)},attachCellView(e,t,i){if(e instanceof z){const l=e.content.view;null!==l&&this.attachCellContentView(l,t,i)}},detachCellView(e,t,i){if(e instanceof z){const l=e.content.view;null!==l&&this.detachCellContentView(l,t,i)}},controllerWillAttachCellContentView(e,t,i){this.owner.callObservers("controllerWillAttachCellContentView",e,t,i,this.owner),this.attachCellContentView(e,t,i)},controllerDidDetachCellContentView(e,t,i){this.detachCellContentView(e,t,i),this.owner.callObservers("controllerDidDetachCellContentView",e,t,i,this.owner)},attachCellContentView(e,t,i){},detachCellContentView(e,t,i){},controllerDidSetCellIcon(e,t,i){this.owner.callObservers("controllerDidSetCellIcon",e,t,i,this.owner)},controllerWillAttachTree(e,t){this.owner.callObservers("controllerWillAttachTree",e,t,this.owner),this.attachTree(e,t)},controllerDidDetachTree(e,t){this.detachTree(e,t),this.owner.callObservers("controllerDidDetachTree",e,t,this.owner)},attachTree(e,t){const i=e.table.trait;null!==i&&this.attachTreeTrait(i,e,t);const l=e.table.view;null!==l&&this.attachTreeView(l,e,t)},detachTree(e,t){const i=e.table.trait;null!==i&&this.detachTreeTrait(i,e,t);const l=e.table.view;null!==l&&this.detachTreeView(l,e,t)},controllerWillAttachTreeTrait(e,t,i){this.owner.callObservers("controllerWillAttachTreeTrait",e,t,i,this.owner),this.attachTreeTrait(e,t,i)},controllerDidDetachTreeTrait(e,t,i){this.detachTreeTrait(e,t,i),this.owner.callObservers("controllerDidDetachTreeTrait",e,t,i,this.owner)},attachTreeTrait(e,t,i){},detachTreeTrait(e,t,i){},controllerWillAttachTreeView(e,t,i){this.owner.callObservers("controllerWillAttachTreeView",e,t,i,this.owner),this.attachTreeView(e,t,i)},controllerDidDetachTreeView(e,t,i){this.detachTreeView(e,t,i),this.owner.callObservers("controllerDidDetachTreeView",e,t,i,this.owner)},attachTreeView(e,t,i){},detachTreeView(e,t,i){},controllerWillExpandRowView(e,t){this.owner.callObservers("controllerWillExpandRowView",e,t,this.owner)},controllerDidExpandRowView(e,t){this.owner.callObservers("controllerDidExpandRowView",e,t,this.owner)},controllerWillCollapseRowView(e,t){this.owner.callObservers("controllerWillCollapseRowView",e,t,this.owner)},controllerDidCollapseRowView(e,t){this.owner.callObservers("controllerDidCollapseRowView",e,t,this.owner)}})],w(null,null,t,{kind:"field",name:"table",static:!1,private:!1,access:{has:e=>"table"in e,get:e=>e.table,set:(e,t)=>{e.table=t}},metadata:v},o,r),w(null,null,i,{kind:"field",name:"header",static:!1,private:!1,access:{has:e=>"header"in e,get:e=>e.header,set:(e,t)=>{e.header=t}},metadata:v},a,r),w(null,null,l,{kind:"field",name:"cols",static:!1,private:!1,access:{has:e=>"cols"in e,get:e=>e.cols,set:(e,t)=>{e.cols=t}},metadata:v},h,r),w(null,null,s,{kind:"field",name:"rows",static:!1,private:!1,access:{has:e=>"rows"in e,get:e=>e.rows,set:(e,t)=>{e.rows=t}},metadata:v},c,r),v&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:v})})(),e})(),me=(()=>{var e;let l,r,a,h,c=n.HtmlView,d=[],u=[],p=[],g=[];return e=class extends c{constructor(t){super(t),this.displayState=void v(this,d),this.backgroundColor=v(this,u,void 0),this.click=v(this,p,void 0),this.syntheticClick=v(this,g,void 0),this.displayState=e.HiddenState,this.initScrim()}initScrim(){this.setIntrinsic({classList:["scrim"],style:{display:"none",position:"absolute",top:0,right:0,bottom:0,left:0,pointerEvents:"auto",cursor:"pointer",backgroundColor:o.Color.black(0)}})}setDisplayState(e){this.displayState=e}isShown(){switch(this.displayState){case e.ShownState:case e.ShowingState:case e.ShowState:return!0;default:return!1}}isHidden(){switch(this.displayState){case e.HiddenState:case e.HidingState:case e.HideState:return!0;default:return!1}}show(i,l){this.isHidden()&&(l=void 0===l||!0===l?this.getLookOr(s.Look.timing,!1):t.Timing.fromLike(l),this.setDisplayState(e.ShowState),!1!==l?(this.style.backgroundColor.setIntrinsic(o.Color.black(0)),this.style.backgroundColor.setIntrinsic(o.Color.black(i),l)):(this.willShowScrim(),this.style.backgroundColor.setIntrinsic(o.Color.black(i)),this.didShowScrim()))}willShowScrim(){this.setDisplayState(e.ShowingState),this.style.display.setIntrinsic("block")}didShowScrim(){this.setDisplayState(e.ShownState)}hide(i){this.isShown()&&(i=void 0===i||!0===i?this.getLookOr(s.Look.timing,!1):t.Timing.fromLike(i),this.setDisplayState(e.HideState),!1!==i?this.style.backgroundColor.setIntrinsic(o.Color.black(0),i):(this.willHideScrim(),this.style.backgroundColor.setIntrinsic(o.Color.black(0)),this.didHideScrim()))}willHideScrim(){this.setDisplayState(e.HidingState)}didHideScrim(){this.setDisplayState(e.HiddenState),this.style.display.setIntrinsic("none")}get modal(){return i.Provider.getter()}serviceDidSetModality(t,i,l){if(0!==t){const l=.5*t;0===i?this.show(l):(this.style.backgroundColor.setIntrinsic(o.Color.black(l)),this.displayState===e.ShowingState&&this.didShowScrim())}else this.hide()}},(()=>{var t;const s="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(t=c[Symbol.metadata])&&void 0!==t?t:null):void 0;l=[i.Animator({inherits:!0,get parent(){return this.owner.style.backgroundColor},willTransition(){const e=this.owner.displayState;e===me.ShowState?this.owner.willShowScrim():e===me.HideState&&this.owner.willHideScrim()},didTransition(){const e=this.owner.displayState;e===me.ShowingState?this.owner.didShowScrim():e===me.HidingState&&this.owner.didHideScrim()}})],r=[i.Provider({extends:!0,observes:!0,didAttachService(e,t){this.owner.serviceDidSetModality(e.modality.value,0,e),super.didAttachService(e,t)},willDetachService(e){super.willDetachService(e),this.owner.hide(!1)}})],a=[i.EventHandler({initEventType:()=>"undefined"!=typeof PointerEvent?"pointerup":"undefined"!=typeof TouchEvent?"touchend":"click",handle(e){const t=this.owner.modal.service;null!==t&&t.displaceModals()}})],h=[i.EventHandler({eventType:"click",enabled:"undefined"!=typeof PointerEvent||"undefined"!=typeof TouchEvent,handle(e){e.preventDefault(),e.stopPropagation()}})],w(e,null,r,{kind:"getter",name:"modal",static:!1,private:!1,access:{has:e=>"modal"in e,get:e=>e.modal},metadata:s},null,d),w(null,null,l,{kind:"field",name:"backgroundColor",static:!1,private:!1,access:{has:e=>"backgroundColor"in e,get:e=>e.backgroundColor,set:(e,t)=>{e.backgroundColor=t}},metadata:s},u,d),w(null,null,a,{kind:"field",name:"click",static:!1,private:!1,access:{has:e=>"click"in e,get:e=>e.click,set:(e,t)=>{e.click=t}},metadata:s},p,d),w(null,null,h,{kind:"field",name:"syntheticClick",static:!1,private:!1,access:{has:e=>"syntheticClick"in e,get:e=>e.syntheticClick,set:(e,t)=>{e.syntheticClick=t}},metadata:s},g,d),s&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})})(),e.HiddenState=0,e.HidingState=1,e.HideState=2,e.ShownState=3,e.ShowingState=4,e.ShowState=5,e})(),ye=(()=>{var e;let a,h,c,d,u,p,g,b,m,y,f,V=n.HtmlView,T=[],S=[],C=[],k=[],L=[],D=[],I=[],O=[],A=[],P=[],x=[],B=[];return e=class extends V{constructor(e){super(e),this.backgroundColor=(v(this,T),v(this,S,void 0)),this.placementGap=v(this,C,void 0),this.arrowWidth=v(this,k,void 0),this.arrowHeight=v(this,L,void 0),this.source=v(this,D,void 0),this.presence=v(this,I,void 0),this.modality=v(this,O,void 0),this.placement=v(this,A,void 0),this.placementFrame=v(this,P,void 0),this.dropdown=v(this,x,void 0),this.click=v(this,B,void 0),this.sourceFrame=null,this.currentPlacement="none",this.initArrow()}initArrow(){const e=this.createArrow();null!==e&&this.prependChild(e,"arrow")}createArrow(){return n.HtmlView.fromTag("div").setIntrinsic({classList:["popover-arrow"],style:{display:"none",position:"absolute",width:0,height:0}})}needsProcess(e){return 0!=(e&(r.View.NeedsScroll|r.View.NeedsAnimate))&&this.requireUpdate(r.View.NeedsLayout),e}onLayout(){super.onLayout(),this.place()}place(e=!1){const t=this.source.view,i=this.sourceFrame,l=null!==t?t.popoverFrame:null;if(null===l||0===this.placement.value.length||!e&&l.equals(i))return"none";this.sourceFrame=null;const s=this.placePopover(t,l),r=this.getChild("arrow");return r instanceof n.HtmlView&&this.placeArrow(t,l,r,s),s}placePopover(e,t){const l=this.node,s=l.offsetParent;if(null===s)return"none";const n=l.clientWidth,r=l.clientHeight,o=s.getBoundingClientRect(),a=o.left,h=o.top,c=t.left-window.pageXOffset-a,d=t.right-window.pageXOffset-a,u=t.top-window.pageYOffset-h,w=t.bottom-window.pageYOffset-h,v=t.width,p=t.height,g=c+v/2,b=u+p/2,m=this.placementFrame.value,y=null!==m?m.left:0,f=(null!==m?m.right:window.innerWidth)-a,V=null!==m?m.top:0,T=(null!==m?m.bottom:window.innerHeight)-h,S=c-y-window.pageXOffset,C=f-c-v,k=u-V-window.pageYOffset,L=T-u-p,D=this.dropdown.value,I=this.arrowHeight.getValue().pxValue(),O=this.placementGap.getValue().pxValue();let A;const P=this.placement.value;for(let e=0;e<P.length;e+=1){const t=P[e];if("above"===t||"below"===t||"over"===t){A=t;break}if("top"===t&&r+I+O<=k){A=t;break}if("bottom"===t&&r+I+O<=L){A=t;break}if("left"===t&&n+I+O<=S){A=t;break}if("right"===t&&n+I+O<=C){A=t;break}}if(void 0===A){A="none";for(let e=0;e<P.length;e+=1){const t=P[e];if("top"===t&&k>=L){A=t;break}if("bottom"===t&&L>=k){A=t;break}if("left"===t&&S>=C){A=t;break}if("right"===t&&C>=S){A=t;break}}}let x=l.offsetLeft,B=l.offsetTop,R=null,W=null;const H=this.style.width.pxValue(),F=this.style.height.pxValue();let M=H,N=F;const E=this.style.maxWidth.pxState(),z=this.style.maxHeight.pxState();let j=E,q=z;return"above"===A?(x=Math.round(y),B=Math.round(V),R=Math.round((null!==m?m.width:window.innerWidth)-f),M=Math.round(Math.max(0,f-y)),N=null,j=null,q=Math.round(Math.max(0,T-V))):"below"===A?(x=Math.round(y),B=Math.round(T-r),R=Math.round(f-(null!==m?m.width:window.innerWidth)),M=Math.round(Math.max(0,f-y)),N=null,j=null,q=Math.round(Math.max(0,T-V))):"over"===A?(x=Math.round(y),B=Math.round(V),R=Math.round(f-(null!==m?m.width:window.innerWidth)),W=Math.round(T-(null!==m?m.height:window.innerHeight)),M=Math.round(Math.max(0,f-y)),N=Math.round(Math.max(0,T-V)),j=null,q=null):"top"!==A||D?"bottom"!==A||D?"left"!==A||D?"right"!==A||D?"top"===A&&D?(x=Math.max(y,c),B=Math.round(Math.max(V,u-(r+O))),M=Math.round(Math.max(0,Math.min(v,f-c))),N=null,j=Math.round(Math.max(0,f-y)),q=Math.round(Math.max(0,w-V))):"bottom"===A&&D?(x=Math.max(y,c),B=Math.round(Math.max(V,w+O)),M=Math.round(Math.max(0,Math.min(v,f-c))),N=null,j=Math.round(Math.max(0,f-y)),q=Math.round(Math.max(0,T-u))):"left"===A&&D?(x=Math.round(Math.max(y,c-(n+O))),B=Math.max(V,u),M=null,N=Math.round(Math.max(0,Math.min(p,T-u))),j=Math.round(Math.max(0,d-y)),q=Math.round(Math.max(0,T-V))):"right"===A&&D&&(x=Math.round(Math.max(y,d+O)),B=Math.max(V,u),M=null,N=Math.round(Math.max(0,Math.min(p,T-u))),j=Math.round(Math.max(0,f-c)),q=Math.round(Math.max(0,T-V))):(x=Math.round(Math.max(y,d+I+O)),B=b-r/2<=V?Math.round(V):b+r/2>=T?Math.round(T-r):Math.round(b-r/2),j=Math.round(Math.max(0,f-c)),q=Math.round(Math.max(0,T-V))):(x=Math.round(Math.max(y,c-(n+I+O))),B=b-r/2<=V?Math.round(V):b+r/2>=T?Math.round(T-r):Math.round(b-r/2),j=Math.round(Math.max(0,d-y)),q=Math.round(Math.max(0,T-V))):(x=g-n/2<=y?Math.round(y):g+n/2>=f?Math.round(f-n):Math.round(g-n/2),B=Math.round(Math.max(V,w+I+O)),j=Math.round(Math.max(0,f-y)),q=Math.round(Math.max(0,T-u))):(x=g-n/2<=y?Math.round(y):g+n/2>=f?Math.round(f-n):Math.round(g-n/2),B=Math.round(Math.max(V,u-(r+I+O))),j=Math.round(Math.max(0,f-y)),q=Math.round(Math.max(0,w-V))),"none"!==A&&(x!==l.offsetLeft&&this.style.left.hasAffinity(i.Affinity.Intrinsic)||B!==l.offsetTop&&this.style.top.hasAffinity(i.Affinity.Intrinsic)||M!==H&&this.style.width.hasAffinity(i.Affinity.Intrinsic)||N!==F&&this.style.height.hasAffinity(i.Affinity.Intrinsic)||j!==E&&this.style.maxWidth.hasAffinity(i.Affinity.Intrinsic)||q!==z&&this.style.maxHeight.hasAffinity(i.Affinity.Intrinsic))&&(this.willPlacePopover(A),this.style.setIntrinsic({position:"absolute",left:x,right:R,top:B,bottom:W,width:M,height:N,maxWidth:j,maxHeight:q}),this.onPlacePopover(A),this.didPlacePopover(A)),this.currentPlacement=A,A}willPlacePopover(e){this.callObservers("popoverWillPlace",e,this)}onPlacePopover(e){}didPlacePopover(e){this.callObservers("popoverDidPlace",e,this)}placeArrow(e,t,i,s){const n=this.node,r=n.offsetParent;if(null===r)return;const a=r.getBoundingClientRect(),h=a.left,c=a.top,d=t.left-window.pageXOffset-h,u=t.top-window.pageYOffset-c,w=d+t.width/2,v=u+t.height/2,p=n.offsetLeft,g=p+n.clientWidth,b=n.offsetTop,m=b+n.clientHeight;let y=this.style.backgroundColor.value;null===y&&(y=o.Color.transparent());const f=this.style.borderRadius.get(),V=f instanceof l.Length?f.pxValue():0,T=this.arrowWidth.getValue().pxValue(),S=this.arrowHeight.getValue().pxValue(),C=p+V+T/2,k=g-V-T/2,L=b+V+T/2,D=m-V-T/2;i.style.setIntrinsic({top:null,right:null,bottom:null,left:null,borderWidth:null,borderStyle:void 0,borderColor:null,borderLeftWidth:null,borderLeftStyle:void 0,borderLeftColor:null,borderRightWidth:null,borderRightStyle:void 0,borderRightColor:null,borderTopWidth:null,borderTopStyle:void 0,borderTopColor:null,borderBottomWidth:null,borderBottomStyle:void 0,borderBottomColor:null,zIndex:100}),"none"===s||"above"===s||"below"===s||"over"===s?i.style.display.setIntrinsic("none"):Math.round(v)<=Math.round(b-S)&&C<=w&&w<=k?i.style.setIntrinsic({display:"block",top:Math.round(-S),left:Math.round(w-p-T/2),borderLeftWidth:Math.round(T/2),borderLeftStyle:"solid",borderLeftColor:o.Color.transparent(),borderRightWidth:Math.round(T/2),borderRightStyle:"solid",borderRightColor:o.Color.transparent(),borderBottomWidth:Math.round(S),borderBottomStyle:"solid",borderBottomColor:y}):Math.round(m+S)<=Math.round(v)&&C<=w&&w<=k?i.style.setIntrinsic({display:"block",bottom:Math.round(-S),left:Math.round(w-p-T/2),borderLeftWidth:Math.round(T/2),borderLeftStyle:"solid",borderLeftColor:o.Color.transparent(),borderRightWidth:Math.round(T/2),borderRightStyle:"solid",borderRightColor:o.Color.transparent(),borderTopWidth:Math.round(S),borderTopStyle:"solid",borderTopColor:y}):Math.round(w)<=Math.round(p-S)&&L<=v&&v<=D?i.style.setIntrinsic({display:"block",left:Math.round(-S),top:Math.round(v-b-T/2),borderTopWidth:Math.round(T/2),borderTopStyle:"solid",borderTopColor:o.Color.transparent(),borderBottomWidth:Math.round(T/2),borderBottomStyle:"solid",borderBottomColor:o.Color.transparent(),borderRightWidth:Math.round(S),borderRightStyle:"solid",borderRightColor:y}):Math.round(g+S)<=Math.round(w)&&L<=v&&v<=D?i.style.setIntrinsic({display:"block",right:Math.round(-S),top:Math.round(v-b-T/2),borderTopWidth:Math.round(T/2),borderTopStyle:"solid",borderTopColor:o.Color.transparent(),borderBottomWidth:Math.round(T/2),borderBottomStyle:"solid",borderBottomColor:o.Color.transparent(),borderLeftWidth:Math.round(S),borderLeftStyle:"solid",borderLeftColor:y}):i.style.display.setIntrinsic("none")}},(()=>{var n;const v="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=V[Symbol.metadata])&&void 0!==n?n:null):void 0;a=[i.Animator({inherits:!0,get parent(){return this.owner.style.backgroundColor},didSetValue(e){this.owner.place()}})],h=[s.ThemeAnimator({valueType:l.Length,value:l.Length.zero()})],c=[s.ThemeAnimator({valueType:l.Length,value:l.Length.px(10)})],d=[s.ThemeAnimator({valueType:l.Length,value:l.Length.px(8)})],u=[r.ViewRef({observes:!0,willAttachView(e){this.owner.callObservers("popoverWillAttachSource",e,this.owner)},didAttachView(e){this.owner.requireUpdate(r.View.NeedsLayout)},didDetachView(e){this.owner.callObservers("popoverDidDetachSource",e,this.owner)},viewDidMount(e){this.owner.place()},viewDidResize(e){this.owner.place()},viewDidScroll(e){this.owner.place()},viewDidAnimate(e){this.owner.place()},viewDidLayout(e){this.owner.place()},viewDidProject(e){this.owner.place()},viewDidSetAttribute(e,t,i){this.owner.place()},viewDidSetStyle(e,t,i,l){this.owner.place()}})],p=[o.PresenceAnimator({value:o.Presence.dismissed(),updateFlags:r.View.NeedsLayout,get transition(){return this.owner.getLookOr(s.Look.timing,null)},didSetValue(e){const t=e.phase,i=this.owner.currentPlacement;"above"===i?this.owner.style.setIntrinsic({marginTop:(1-t)*-this.owner.node.clientHeight,opacity:void 0}):"below"===i?this.owner.style.setIntrinsic({marginTop:(1-t)*this.owner.node.clientHeight,opacity:void 0}):this.owner.style.setIntrinsic({marginTop:null,opacity:t}),this.owner.callObservers("viewDidSetPresence",e,this.owner)},willPresent(){this.owner.callObservers("viewWillPresent",this.owner),this.owner.place(),this.owner.style.visibility.setIntrinsic("visible")},didPresent(){this.owner.style.setIntrinsic({marginTop:null,opacity:void 0,pointerEvents:"auto"}),this.owner.callObservers("viewDidPresent",this.owner)},willDismiss(){this.owner.callObservers("viewWillDismiss",this.owner),this.owner.style.pointerEvents.setIntrinsic("none")},didDismiss(){this.owner.style.setIntrinsic({marginTop:null,opacity:void 0,visibility:"hidden"}),this.owner.callObservers("viewDidDismiss",this.owner)}})],g=[i.Property({valueType:Number,value:0,didSetValue(e){this.owner.callObservers("viewDidSetModality",e,this.owner)}})],b=[i.Property({value:["top","bottom","right","left"],didSetValue(e){this.owner.place()},equalValues:(e,i)=>t.Arrays.equal(e,i)})],m=[i.Property({valueType:l.R2Box,value:null,didSetValue(e){this.owner.place()},fromLike:e=>null!==e?l.R2Box.fromLike(e):null})],y=[i.Property({valueType:Boolean,value:!1,didSetValue(e){this.owner.place()}})],f=[i.EventHandler({eventType:"click",bindsOwner:!0,handle(e){e.stopPropagation()}})],w(null,null,a,{kind:"field",name:"backgroundColor",static:!1,private:!1,access:{has:e=>"backgroundColor"in e,get:e=>e.backgroundColor,set:(e,t)=>{e.backgroundColor=t}},metadata:v},S,T),w(null,null,h,{kind:"field",name:"placementGap",static:!1,private:!1,access:{has:e=>"placementGap"in e,get:e=>e.placementGap,set:(e,t)=>{e.placementGap=t}},metadata:v},C,T),w(null,null,c,{kind:"field",name:"arrowWidth",static:!1,private:!1,access:{has:e=>"arrowWidth"in e,get:e=>e.arrowWidth,set:(e,t)=>{e.arrowWidth=t}},metadata:v},k,T),w(null,null,d,{kind:"field",name:"arrowHeight",static:!1,private:!1,access:{has:e=>"arrowHeight"in e,get:e=>e.arrowHeight,set:(e,t)=>{e.arrowHeight=t}},metadata:v},L,T),w(null,null,u,{kind:"field",name:"source",static:!1,private:!1,access:{has:e=>"source"in e,get:e=>e.source,set:(e,t)=>{e.source=t}},metadata:v},D,T),w(null,null,p,{kind:"field",name:"presence",static:!1,private:!1,access:{has:e=>"presence"in e,get:e=>e.presence,set:(e,t)=>{e.presence=t}},metadata:v},I,T),w(null,null,g,{kind:"field",name:"modality",static:!1,private:!1,access:{has:e=>"modality"in e,get:e=>e.modality,set:(e,t)=>{e.modality=t}},metadata:v},O,T),w(null,null,b,{kind:"field",name:"placement",static:!1,private:!1,access:{has:e=>"placement"in e,get:e=>e.placement,set:(e,t)=>{e.placement=t}},metadata:v},A,T),w(null,null,m,{kind:"field",name:"placementFrame",static:!1,private:!1,access:{has:e=>"placementFrame"in e,get:e=>e.placementFrame,set:(e,t)=>{e.placementFrame=t}},metadata:v},P,T),w(null,null,y,{kind:"field",name:"dropdown",static:!1,private:!1,access:{has:e=>"dropdown"in e,get:e=>e.dropdown,set:(e,t)=>{e.dropdown=t}},metadata:v},x,T),w(null,null,f,{kind:"field",name:"click",static:!1,private:!1,access:{has:e=>"click"in e,get:e=>e.click,set:(e,t)=>{e.click=t}},metadata:v},B,T),v&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:v})})(),e.HiddenState=0,e.HidingState=1,e.HideState=2,e.ShownState=3,e.ShowingState=4,e.ShowState=5,e})(),fe=(()=>{var e;let a,h,d,u,p,g,b,m,y,f=n.HtmlView,V=[],T=[],S=[],C=[],k=[],L=[],D=[],I=[],O=[];return e=class extends f{constructor(e){super(e),this.collapsedWidth=(v(this,V),v(this,T,void 0)),this.expandedWidth=v(this,S,void 0),this.effectiveWidth=v(this,C,void 0),this.effectiveHeight=v(this,k,void 0),this.placement=v(this,L,void 0),this.presence=v(this,D,void 0),this.stretch=v(this,I,void 0),this.modality=v(this,O,void 0),this.initDrawer()}initDrawer(){this.setIntrinsic({classList:["drawer"],style:{display:"flex",overflowX:"hidden",overflowY:"auto",overscrollBehaviorY:"contain",overflowScrolling:"touch"}})}isHorizontal(){return"top"===this.placement.value||"bottom"===this.placement.value}isVertical(){return"left"===this.placement.value||"right"===this.placement.value}get edgeInsets(){return i.Property.getter()}onLayout(){super.onLayout(),this.style.display.setIntrinsic(this.presence.dismissed?"none":"flex"),this.layoutDrawer(),"mobile"===this.viewIdiom?this.style.boxShadow.setIntrinsic(this.getLookOr(s.Look.shadow,s.Mood.floating,null)):this.style.boxShadow.setIntrinsic(this.getLookOr(s.Look.shadow,null))}layoutDrawer(){const e=this.placement.value;"top"===e?this.layoutDrawerTop():"right"===e?this.layoutDrawerRight():"bottom"===e?this.layoutDrawerBottom():"left"===e&&this.layoutDrawerLeft()}layoutDrawerTop(){const e=this.presence.getPhase();this.classList.add("drawer-top"),this.classList.remove("drawer-right"),this.classList.remove("drawer-bottom"),this.classList.remove("drawer-left"),this.style.setIntrinsic({position:"fixed",width:null,height:null,left:l.Length.zero(),right:l.Length.zero(),bottom:null});const t=this.style.height.getCssValue();this.style.top.setIntrinsic(t.times(e-1)),this.effectiveWidth.setIntrinsic(this.style.width.value),this.effectiveHeight.setIntrinsic(t.times(e)),this.stretch.collapsed&&this.expand()}layoutDrawerRight(){const e=this.stretch.getPhase(),t=this.presence.getPhase();let s;if(this.classList.remove("drawer-top"),this.classList.add("drawer-right"),this.classList.remove("drawer-bottom"),this.classList.remove("drawer-left"),this.style.setIntrinsic({position:"fixed",height:null,top:l.Length.zero(),bottom:l.Length.zero(),left:null}),this.style.width.hasAffinity(i.Affinity.Intrinsic)){const t=this.collapsedWidth.getValue(),i=this.expandedWidth.getValue();s=t.times(1-e).plus(i.times(e))}else s=this.style.width.getCssValue();this.style.width.setIntrinsic(s),this.style.right.setIntrinsic(s.times(t-1)),this.effectiveWidth.setIntrinsic(s.times(t)),this.effectiveHeight.setIntrinsic(this.style.height.value)}layoutDrawerBottom(){const e=this.presence.getPhase();this.classList.remove("drawer-top"),this.classList.remove("drawer-right"),this.classList.add("drawer-bottom"),this.classList.remove("drawer-left"),this.style.setIntrinsic({position:"fixed",width:null,height:null,left:l.Length.zero(),right:l.Length.zero(),top:null});const t=this.style.height.getCssValue();this.style.bottom.setIntrinsic(t.times(e-1)),this.effectiveWidth.setIntrinsic(this.style.width.value),this.effectiveHeight.setIntrinsic(t.times(e)),this.stretch.collapsed&&this.expand()}layoutDrawerLeft(){const e=this.stretch.getPhase(),t=this.presence.getPhase();let s;if(this.classList.remove("drawer-top"),this.classList.remove("drawer-right"),this.classList.remove("drawer-bottom"),this.classList.add("drawer-left"),this.style.setIntrinsic({position:"fixed",height:null,top:l.Length.zero(),bottom:l.Length.zero(),right:null}),this.style.width.hasAffinity(i.Affinity.Intrinsic)){const t=this.collapsedWidth.getValue(),i=this.expandedWidth.getValue();s=t.times(1-e).plus(i.times(e))}else s=this.style.width.getCssValue();this.style.width.setIntrinsic(s),this.style.left.setIntrinsic(s.times(t-1)),this.effectiveWidth.setIntrinsic(s.times(t)),this.effectiveHeight.setIntrinsic(this.style.height.value)}present(e){e=void 0===e||!0===e?this.getLookOr(s.Look.timing,!1):t.Timing.fromLike(e),this.presence.present(e)}dismiss(e){e=void 0===e||!0===e?this.getLookOr(s.Look.timing,!1):t.Timing.fromLike(e),this.presence.dismiss(e)}expand(e){e=void 0===e||!0===e?this.getLookOr(s.Look.timing,!1):t.Timing.fromLike(e),this.stretch.expand(e)}collapse(e){e=void 0===e||!0===e?this.getLookOr(s.Look.timing,!1):t.Timing.fromLike(e),this.stretch.collapse(e)}toggle(e){e=void 0===e||!0===e?this.getLookOr(s.Look.timing,!1):t.Timing.fromLike(e),"mobile"===this.viewIdiom||this.isHorizontal()?this.presence.presented?this.presence.dismiss(e):(this.stretch.expand(e),this.presence.present(e),this.modal.present(this,{modal:!0})):(this.stretch.toggle(e),this.presence.present(e))}},(()=>{var t;const n="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(t=f[Symbol.metadata])&&void 0!==t?t:null):void 0;a=[s.ThemeConstraintAnimator({valueType:l.Length,value:l.Length.px(60)})],h=[s.ThemeConstraintAnimator({valueType:l.Length,value:l.Length.px(200)})],d=[c.ConstraintProperty({valueType:l.Length,value:null,didSetValue(e,t){this.owner.callObservers("viewDidSetEffectiveWidth",e,this.owner)},toNumber:e=>null!==e?e.pxValue():0})],u=[c.ConstraintProperty({valueType:l.Length,value:null,didSetValue(e,t){this.owner.callObservers("viewDidSetEffectiveHeight",e,this.owner)},toNumber:e=>null!==e?e.pxValue():0})],p=[i.Property({valueType:String,value:"left",updateFlags:r.View.NeedsResize|r.View.NeedsLayout,didSetValue(e){this.owner.callObservers("viewDidSetPlacement",e,this.owner),this.owner.edgeInsets.decohereOutlets()}})],g=[o.PresenceAnimator({value:o.Presence.presented(),updateFlags:r.View.NeedsLayout,get transition(){return this.owner.getLookOr(s.Look.timing,null)},didSetValue(e){this.owner.callObservers("viewDidSetPresence",e,this.owner)},willPresent(){this.owner.callObservers("viewWillPresent",this.owner)},didPresent(){this.owner.callObservers("viewDidPresent",this.owner)},willDismiss(){this.owner.callObservers("viewWillDismiss",this.owner)},didDismiss(){this.owner.callObservers("viewDidDismiss",this.owner)}})],b=[o.ExpansionAnimator({value:o.Expansion.expanded(),updateFlags:r.View.NeedsResize|r.View.NeedsLayout,get transition(){return this.owner.getLookOr(s.Look.timing,null)},willExpand(){this.owner.modal.dismiss(),this.owner.callObservers("viewWillExpand",this.owner)},didExpand(){this.owner.callObservers("viewDidExpand",this.owner)},willCollapse(){this.owner.modal.dismiss(),this.owner.callObservers("viewWillCollapse",this.owner)},didCollapse(){this.owner.callObservers("viewDidCollapse",this.owner)}})],m=[i.Property({extends:!0,getOutletValue(e){let t=this.value,i=t.insetTop,l=t.insetRight,s=t.insetBottom,n=t.insetLeft;const r=this.owner.placement.value;return"top"===r&&0!==s?(s=0,t={insetTop:i,insetRight:l,insetBottom:s,insetLeft:n}):"right"===r&&0!==n?(n=0,t={insetTop:i,insetRight:l,insetBottom:s,insetLeft:n}):"bottom"===r&&0!==i?(i=0,t={insetTop:i,insetRight:l,insetBottom:s,insetLeft:n}):"left"===r&&0!==l&&(l=0,t={insetTop:i,insetRight:l,insetBottom:s,insetLeft:n}),t}})],y=[i.Property({valueType:Number,value:0,didSetValue(e){this.owner.callObservers("viewDidSetModality",e,this.owner)}})],w(e,null,m,{kind:"getter",name:"edgeInsets",static:!1,private:!1,access:{has:e=>"edgeInsets"in e,get:e=>e.edgeInsets},metadata:n},null,V),w(null,null,a,{kind:"field",name:"collapsedWidth",static:!1,private:!1,access:{has:e=>"collapsedWidth"in e,get:e=>e.collapsedWidth,set:(e,t)=>{e.collapsedWidth=t}},metadata:n},T,V),w(null,null,h,{kind:"field",name:"expandedWidth",static:!1,private:!1,access:{has:e=>"expandedWidth"in e,get:e=>e.expandedWidth,set:(e,t)=>{e.expandedWidth=t}},metadata:n},S,V),w(null,null,d,{kind:"field",name:"effectiveWidth",static:!1,private:!1,access:{has:e=>"effectiveWidth"in e,get:e=>e.effectiveWidth,set:(e,t)=>{e.effectiveWidth=t}},metadata:n},C,V),w(null,null,u,{kind:"field",name:"effectiveHeight",static:!1,private:!1,access:{has:e=>"effectiveHeight"in e,get:e=>e.effectiveHeight,set:(e,t)=>{e.effectiveHeight=t}},metadata:n},k,V),w(null,null,p,{kind:"field",name:"placement",static:!1,private:!1,access:{has:e=>"placement"in e,get:e=>e.placement,set:(e,t)=>{e.placement=t}},metadata:n},L,V),w(null,null,g,{kind:"field",name:"presence",static:!1,private:!1,access:{has:e=>"presence"in e,get:e=>e.presence,set:(e,t)=>{e.presence=t}},metadata:n},D,V),w(null,null,b,{kind:"field",name:"stretch",static:!1,private:!1,access:{has:e=>"stretch"in e,get:e=>e.stretch,set:(e,t)=>{e.stretch=t}},metadata:n},I,V),w(null,null,y,{kind:"field",name:"modality",static:!1,private:!1,access:{has:e=>"modality"in e,get:e=>e.modality,set:(e,t)=>{e.modality=t}},metadata:n},O,V),n&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})})(),e})(),Ve=(()=>{var e;let l,s,n=f,r=[],o=[],h=[];return e=class extends n{constructor(e){super(e),this.drawerView=void v(this,o),this.click=v(this,h,void 0),this.drawerView=null,this.initIcon()}initButton(){super.initButton(),this.classList.add("drawer-button")}initIcon(){this.icon.push(e.hamburgerIcon)}setDrawerView(e){this.drawerView=e}static get hamburgerIcon(){return a.VectorIcon.create(24,24,"M21,17L21,19L3,19L3,17L21,17ZM21,11L21,13L3,13L3,11L21,11ZM3,5L3,7L21,7L21,5L3,5Z")}},(()=>{var a;const c="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(a=n[Symbol.metadata])&&void 0!==a?a:null):void 0;s=[i.EventHandler({extends:!0,handle(e){super.handle(e);const t=this.owner.drawerView;null!==t&&t.toggle()}})],l=[t.Lazy],w(e,null,l,{kind:"getter",name:"hamburgerIcon",static:!0,private:!1,access:{has:e=>"hamburgerIcon"in e,get:e=>e.hamburgerIcon},metadata:c},null,r),w(null,null,s,{kind:"field",name:"click",static:!1,private:!1,access:{has:e=>"click"in e,get:e=>e.click,set:(e,t)=>{e.click=t}},metadata:c},h,o),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c}),v(e,r)})(),e})(),Te=(()=>{var e;let t,l,a,h,c=n.HtmlView,d=[],u=[],p=[],g=[],b=[];return e=class extends c{constructor(e){super(e),this.fullBleed=(v(this,d),v(this,u,void 0)),this.sheetAlign=v(this,p,void 0),this.presence=v(this,g,void 0),this.scroll=v(this,b,void 0),this.initSheet()}initSheet(){this.setIntrinsic({classList:["sheet"],style:{position:"relative",boxSizing:"border-box",overflowX:"hidden",overflowY:"auto",overscrollBehaviorY:"contain",overflowScrolling:"touch",backgroundColor:s.Look.backgroundColor}})}present(e){this.presence.present(e)}dismiss(e){this.presence.dismiss(e)}layoutSheet(){const e=this.style.width.pxState(),t=this.sheetAlign.value,i=this.presence.value.phase;this.style.left.setIntrinsic(e*t*(1-i))}},(()=>{var n;const v="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=c[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[i.Property({valueType:Boolean,value:!1,didSetValue(e){this.owner.callObservers("viewDidSetFullBleed",e,this.owner)}})],l=[i.Property({valueType:Number,value:1})],a=[o.PresenceAnimator({value:o.Presence.presented(),updateFlags:r.View.NeedsLayout,init(){this.pointerEvents=void 0,this.overflowX=void 0,this.overflowY=void 0},get transition(){return this.owner.getLookOr(s.Look.timing,s.Mood.navigating,null)},willPresent(){this.owner.callObservers("viewWillPresent",this.owner)},didPresent(){this.owner.style.pointerEvents.setState(void 0,i.Affinity.Transient),this.owner.callObservers("viewDidPresent",this.owner)},willDismiss(){this.owner.callObservers("viewWillDismiss",this.owner),this.pointerEvents=this.owner.style.pointerEvents.state,this.overflowX=this.owner.style.overflowX.state,this.overflowY=this.owner.style.overflowY.state,this.owner.style.pointerEvents.setState("none",i.Affinity.Transient),this.owner.style.overflowX.setIntrinsic("hidden"),this.owner.style.overflowY.setIntrinsic("hidden")},didDismiss(){this.owner.style.pointerEvents.setState(this.pointerEvents,i.Affinity.Transient),this.owner.style.overflowX.setIntrinsic(this.overflowX),this.owner.style.overflowY.setIntrinsic(this.overflowY),this.pointerEvents=void 0,this.overflowX=void 0,this.overflowY=void 0,this.owner.callObservers("viewDidDismiss",this.owner)}})],h=[i.EventHandler({eventType:"scroll",bindsOwner:!0,handle(e){this.owner.requireUpdate(r.View.NeedsScroll)}})],w(null,null,t,{kind:"field",name:"fullBleed",static:!1,private:!1,access:{has:e=>"fullBleed"in e,get:e=>e.fullBleed,set:(e,t)=>{e.fullBleed=t}},metadata:v},u,d),w(null,null,l,{kind:"field",name:"sheetAlign",static:!1,private:!1,access:{has:e=>"sheetAlign"in e,get:e=>e.sheetAlign,set:(e,t)=>{e.sheetAlign=t}},metadata:v},p,d),w(null,null,a,{kind:"field",name:"presence",static:!1,private:!1,access:{has:e=>"presence"in e,get:e=>e.presence,set:(e,t)=>{e.presence=t}},metadata:v},g,d),w(null,null,h,{kind:"field",name:"scroll",static:!1,private:!1,access:{has:e=>"scroll"in e,get:e=>e.scroll,set:(e,t)=>{e.scroll=t}},metadata:v},b,d),v&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:v})})(),e})(),Se=(()=>{var e;let l,n,r,o,a,h,c,u,p,g=d.Controller,b=[],m=[],y=[],f=[],V=[],S=[],C=[],k=[],L=[],O=[];return e=class extends g{constructor(){super(...arguments),this.fullBleed=(v(this,b),v(this,m,void 0)),this.searchable=v(this,y,void 0),this.searching=v(this,f,void 0),this.sheet=v(this,V,void 0),this.back=v(this,S,void 0),this.forward=v(this,C,void 0),this.title=v(this,k,void 0),this.handle=v(this,L,void 0),this.modeTools=v(this,O,void 0)}updateSearch(e,t){}submitSearch(e,t){}},(()=>{var v;const B="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=g[Symbol.metadata])&&void 0!==v?v:null):void 0;l=[i.Property({valueType:Boolean,value:!1,didSetValue(e){this.owner.callObservers("controllerDidSetFullBleed",e,this.owner);const t=this.owner.sheet.view;null!==t&&t.fullBleed.setValue(e,i.Affinity.Inherited)}})],n=[i.Property({valueType:Boolean,value:!1,didSetValue(e){this.owner.callObservers("controllerDidSetSearchable",e,this.owner)}})],r=[i.Property({valueType:Boolean,value:!1,didSetValue(e){this.owner.callObservers("controllerDidSetSearching",e,this.owner)}})],o=[d.TraitViewRef({willAttachTrait(e){this.owner.callObservers("controllerWillAttachSheetTrait",e,this.owner)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachSheetTrait",e,this.owner)},viewType:Te,observesView:!0,willAttachView(e){this.owner.callObservers("controllerWillAttachSheetView",e,this.owner)},didAttachView(e){this.owner.fullBleed.setIntrinsic(e.fullBleed.value)},didDetachView(e){this.owner.callObservers("controllerDidDetachSheetView",e,this.owner)},viewDidScroll(e){this.owner.callObservers("controllerDidScrollSheetView",e,this.owner)},viewDidSetFullBleed(e,t){this.owner.fullBleed.setIntrinsic(e)},viewWillPresent(e){this.owner.callObservers("controllerWillPresentSheetView",e,this.owner)},viewDidPresent(e){this.owner.callObservers("controllerDidPresentSheetView",e,this.owner)},viewWillDismiss(e){this.owner.callObservers("controllerWillDismissSheetView",e,this.owner)},viewDidDismiss(e){this.owner.callObservers("controllerDidDismissSheetView",e,this.owner)}})],a=[d.ControllerRef({get controllerType(){return Se},binds:!1,willAttachController(e){this.owner.callObservers("controllerWillAttachBack",e,this.owner)},didDetachController(e){this.owner.callObservers("controllerDidDetachBack",e,this.owner)}})],h=[d.ControllerRef({get controllerType(){return Se},binds:!1,willAttachController(e){this.owner.callObservers("controllerWillAttachForward",e,this.owner)},didDetachController(e){this.owner.callObservers("controllerDidDetachForward",e,this.owner)}})],c=[d.TraitViewControllerRef({controllerType:A,binds:!0,observes:!0,getTraitViewRef:e=>e.tool,willAttachController(e){this.owner.callObservers("controllerWillAttachTitle",e,this.owner)},didAttachController(e){const t=e.tool.attachView();this.attachToolView(t,e)},willDetachController(e){const t=e.tool.view;null!==t&&this.detachToolView(t,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachTitle",e,this.owner)},controllerWillAttachToolView(e,t){this.attachToolView(e,t)},controllerDidDetachToolView(e,t){this.detachToolView(e,t)},attachToolView(e,t){},detachToolView(e,t){},controllerDidPressToolView(e,t){this.owner.callObservers("controllerDidPressTitle",e,t,this.owner)},controllerDidLongPressToolView(e){this.owner.callObservers("controllerDidLongPressTitle",e,this.owner)},fromLike(e){if(void 0===e||"string"==typeof e){let t=this.controller;null===t&&(t=this.createController());const i=t.tool.attachView();return i instanceof D&&i.content.set(e),t}return super.fromLike(e)},createController(){const e=P.create();return e.tool.attachView().style.fontSize.setIntrinsic(14),e}})],u=[d.TraitViewControllerRef({controllerType:A,binds:!0,observes:!0,getTraitViewRef:e=>e.tool,init(){this.active=!1},initController(e){const t=this.view;null!==t&&this.updateActive(this.active,t)},willAttachController(e){this.owner.callObservers("controllerWillAttachHandle",e,this.owner)},didAttachController(e){const t=e.tool.attachView();this.attachToolView(t,e)},willDetachController(e){const t=e.tool.view;null!==t&&this.detachToolView(t,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachHandle",e,this.owner)},controllerWillAttachToolView(e,t){this.attachToolView(e,t),this.updateActive(this.active,e)},controllerDidDetachToolView(e,t){this.detachToolView(e,t)},attachToolView(e,t){},detachToolView(e,t){},controllerDidPressToolView(e,t){this.owner.callObservers("controllerDidPressHandle",e,t,this.owner)},controllerDidLongPressToolView(e){this.owner.callObservers("controllerDidLongPressHandle",e,this.owner)},setActive(e){this.active=e;const t=this.view;null!==t&&this.updateActive(e,t)},updateActive(e,t){if(t instanceof I){const i=!t.inserting&&t.getLook(s.Look.timing);e?t.iconColor.setIntrinsic(s.Look.accentColor,i):t.iconColor.setIntrinsic(s.Look.iconColor,i)}},setIcon(e){this.insertController().tool.attachView().graphics.setIntrinsic(e)},createController(){const e=x.create(),t=T.create("",0,0,36);e.layout.set(t);return e.tool.attachView().iconLayout.setIntrinsic({width:24,height:24}),e}})],p=[d.TraitViewControllerSet({controllerType:A,binds:!1,ordered:!0,observes:!0,getTraitViewRef:e=>e.tool,willAttachController(e){let i=t.Objects.getNextValue(this.controllers,e.uid);void 0===i&&(i=null),this.owner.callObservers("controllerWillAttachModeTool",e,i,this.owner)},didAttachController(e){const t=e.tool.attachView();this.attachToolView(t,e)},willDetachController(e){const t=e.tool.view;null!==t&&this.detachToolView(t,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachModeTool",e,this.owner)},controllerWillAttachToolView(e,t){this.owner.callObservers("controllerWillAttachModeToolView",e,t,this.owner),this.attachToolView(e,t)},controllerDidDetachToolView(e,t){this.detachToolView(e,t),this.owner.callObservers("controllerDidDetachModeToolView",e,t,this.owner)},attachToolView(e,t){},detachToolView(e,t){}})],w(null,null,l,{kind:"field",name:"fullBleed",static:!1,private:!1,access:{has:e=>"fullBleed"in e,get:e=>e.fullBleed,set:(e,t)=>{e.fullBleed=t}},metadata:B},m,b),w(null,null,n,{kind:"field",name:"searchable",static:!1,private:!1,access:{has:e=>"searchable"in e,get:e=>e.searchable,set:(e,t)=>{e.searchable=t}},metadata:B},y,b),w(null,null,r,{kind:"field",name:"searching",static:!1,private:!1,access:{has:e=>"searching"in e,get:e=>e.searching,set:(e,t)=>{e.searching=t}},metadata:B},f,b),w(null,null,o,{kind:"field",name:"sheet",static:!1,private:!1,access:{has:e=>"sheet"in e,get:e=>e.sheet,set:(e,t)=>{e.sheet=t}},metadata:B},V,b),w(null,null,a,{kind:"field",name:"back",static:!1,private:!1,access:{has:e=>"back"in e,get:e=>e.back,set:(e,t)=>{e.back=t}},metadata:B},S,b),w(null,null,h,{kind:"field",name:"forward",static:!1,private:!1,access:{has:e=>"forward"in e,get:e=>e.forward,set:(e,t)=>{e.forward=t}},metadata:B},C,b),w(null,null,c,{kind:"field",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title,set:(e,t)=>{e.title=t}},metadata:B},k,b),w(null,null,u,{kind:"field",name:"handle",static:!1,private:!1,access:{has:e=>"handle"in e,get:e=>e.handle,set:(e,t)=>{e.handle=t}},metadata:B},L,b),w(null,null,p,{kind:"field",name:"modeTools",static:!1,private:!1,access:{has:e=>"modeTools"in e,get:e=>e.modeTools,set:(e,t)=>{e.modeTools=t}},metadata:B},O,b),B&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:B})})(),e})(),Ce=(()=>{var e;let l,n,r,h,c,u,p,g,b,m,y=W,f=[],V=[],S=[],k=[],L=[],D=[],I=[],R=[],H=[];return e=class extends y{constructor(){super(...arguments),this.showBackTitle=(v(this,V),v(this,S,void 0)),this.closeButton=v(this,k,void 0),this.backButton=v(this,L,void 0),this.searchButton=v(this,D,void 0),this.searchInput=v(this,I,void 0),this.cancelSearch=v(this,R,void 0),this.front=v(this,H,void 0)}createLayout(){const e=this.front.controller;return null!==e&&e.searching.value?this.createSearchLayout():this.createNavLayout()}createNavLayout(){const e=new Array,t=this.front.controller,i=null!==t?"title"+t.uid:"",l=null!==t?t.back.controller:null,n=null!==l?"title"+l.uid:void 0,r=this.showBackTitle.value;if(null===t||null===l){const t=this.closeButton.controller;if(null!==t){const i=t.layout.value;null!==i&&e.push(i);const l=t.tool.view;null!==l&&(this.closeButton.insertView(),l.style.zIndex.setIntrinsic(2))}}else{const t=this.backButton.controller;if(null!==t){let i=t.layout.value;null!==i&&(r&&(i=i.withOverlap(n).withOverpad(16)),e.push(i));this.backButton.insertView().style.zIndex.setIntrinsic(2)}}if(r){if(null!==l){const t=T.create(n,0,0,0,0,-1,-1);e.push(t);const i=l.title.insertView(this.bar.view,void 0,void 0,n);if(null!==i){const e=i.getLookOr(s.Look.timing,s.Mood.navigating,!1);i.style.color.setIntrinsic(s.Look.accentColor,e),i.style.zIndex.setIntrinsic(3),i.style.pointerEvents.setIntrinsic("none")}}const r=T.create(i,1,0,0,.5,1,1);if(e.push(r),null!==t){const e=t.title.insertView(this.bar.view,void 0,void 0,i);if(null!==e){const t=e.getLookOr(s.Look.timing,s.Mood.navigating,!1);e.style.color.setIntrinsic(s.Look.textColor,t),e.style.zIndex.setIntrinsic(1),e.style.pointerEvents.setIntrinsic("auto")}}}else{const r=this.bar.view,a=null!==r?r.layout.value:null,h=null!==a&&void 0!==n?a.getTool(n):null;if(null!==l&&null!==h){const t=T.create(n,0,0,0,0,-1,-1).withPresence(o.Presence.dismissed());e.push(t)}let c;if(c=null===h?T.create(i,1,0,0,.5,0,1):T.create(i,1,0,0,.5,1,1),e.push(c),null!==t){const e=t.title.insertView(this.bar.view,void 0,void 0,i);if(null!==e){const t=e.getLookOr(s.Look.timing,s.Mood.navigating,!1);e.style.color.setIntrinsic(s.Look.textColor,t),e.style.zIndex.setIntrinsic(1),e.style.pointerEvents.setIntrinsic("auto")}}}const a=this.searchButton.controller;if(null!==a){const i=null!==t&&t.searchable.value;let l=a.layout.value;null!==l&&(i||(l=l.withKey("")),e.push(l)),i&&this.searchButton.insertView()}return C.create(e)}createSearchLayout(){const e=new Array,t=this.searchInput.controller;if(null!==t){const i=t.layout.value;null!==i&&e.push(i),this.searchInput.insertView()}const i=this.cancelSearch.controller;if(null!==i){const t=i.layout.value;null!==t&&e.push(t),null!==i.tool.view&&this.cancelSearch.insertView()}return C.create(e)}get closeIcon(){return e.closeIcon}get backIcon(){return e.backIcon}get searchIcon(){return e.searchIcon}static get closeIcon(){return a.VectorIcon.create(24,24,"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12Z")}static get backIcon(){return a.VectorIcon.create(24,24,"M17.77,3.77L16,2L6,12L16,22L17.77,20.23L9.54,12Z").withFillLook(s.Look.accentColor)}static get searchIcon(){return a.VectorIcon.create(24,24,"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z")}},(()=>{var o;const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(o=y[Symbol.metadata])&&void 0!==o?o:null):void 0;h=[i.Property({valueType:Boolean,value:!0,updateFlags:d.Controller.NeedsAssemble})],c=[d.TraitViewControllerRef({controllerType:A,binds:!0,viewKey:"closeButton",observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,controllerDidPressToolView(e,t){this.owner.callObservers("controllerDidPressCloseButton",e,t,this.owner)},createController(){const e=new x,t=T.create(this.viewKey,0,0,48);e.layout.set(t);const i=e.tool.attachView();return i.iconLayout.setIntrinsic({width:24,height:24}),i.graphics.setIntrinsic(this.owner.closeIcon),e}})],u=[d.TraitViewControllerRef({controllerType:A,binds:!0,viewKey:"backButton",observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,controllerDidPressToolView(e,t){this.owner.callObservers("controllerDidPressBackButton",e,t,this.owner)},createController(){const e=new x,t=T.create(this.viewKey,0,0,48);e.layout.set(t);const i=e.tool.attachView();return i.iconLayout.setIntrinsic({width:24,height:24}),i.graphics.setIntrinsic(this.owner.backIcon),e}})],p=[d.TraitViewControllerRef({controllerType:A,binds:!0,viewKey:"searchButton",observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,controllerDidPressToolView(e,t){this.owner.callObservers("controllerDidPressSearchButton",e,t,this.owner)},createController(){const e=new x,t=T.create(this.viewKey,0,0,48);e.layout.set(t);const i=e.tool.attachView();return i.iconLayout.setIntrinsic({width:24,height:24}),i.graphics.setIntrinsic(this.owner.searchIcon),e}})],g=[d.TraitViewControllerRef({controllerType:A,binds:!0,viewKey:"searchInput",observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,controllerDidUpdateSearch(e,t){this.owner.callObservers("controllerDidUpdateSearch",e,t,this.owner)},controllerDidSubmitSearch(e,t){this.owner.callObservers("controllerDidSubmitSearch",e,t,this.owner)},controllerDidCancelSearch(e){this.owner.callObservers("controllerDidCancelSearch",e,this.owner)},createController(){const e=new B,t=T.create(this.viewKey,1,0,0,.5);e.layout.set(t);const i=e.tool.attachView();return i.stylesheet.insertView(),i.input.insertView().setIntrinsic({attributes:{placeholder:"Search"},style:{marginLeft:8,marginRight:8}}),e}})],b=[d.TraitViewControllerRef({controllerType:A,binds:!0,viewKey:"cancelSearch",observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,controllerDidPressToolView(e,t){const i=this.owner.searchInput.view,l=i instanceof O?i.input.view:null;this.owner.callObservers("controllerDidCancelSearch",l,this.owner)},createController(){const e=new P,t=T.create(this.viewKey,0,0,72,.5);return e.layout.set(t),e.tool.attachView().setIntrinsic({style:{color:s.Look.accentColor,cursor:"pointer"},content:"Cancel"}),e}})],m=[d.TraitViewControllerRef({controllerType:Se,inherits:!0,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},didDetachController(e){null===e.back.controller&&null===e.forward.controller&&this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerWillAttachBack(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidDetachBack(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerWillAttachForward(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidDetachForward(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidSetSearchable(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidSetSearching(e,t){e?this.owner.updateLayout():this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerWillAttachTitle(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidDetachTitle(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)}})],l=[t.Lazy],n=[t.Lazy],r=[t.Lazy],w(e,null,l,{kind:"getter",name:"closeIcon",static:!0,private:!1,access:{has:e=>"closeIcon"in e,get:e=>e.closeIcon},metadata:a},null,f),w(e,null,n,{kind:"getter",name:"backIcon",static:!0,private:!1,access:{has:e=>"backIcon"in e,get:e=>e.backIcon},metadata:a},null,f),w(e,null,r,{kind:"getter",name:"searchIcon",static:!0,private:!1,access:{has:e=>"searchIcon"in e,get:e=>e.searchIcon},metadata:a},null,f),w(null,null,h,{kind:"field",name:"showBackTitle",static:!1,private:!1,access:{has:e=>"showBackTitle"in e,get:e=>e.showBackTitle,set:(e,t)=>{e.showBackTitle=t}},metadata:a},S,V),w(null,null,c,{kind:"field",name:"closeButton",static:!1,private:!1,access:{has:e=>"closeButton"in e,get:e=>e.closeButton,set:(e,t)=>{e.closeButton=t}},metadata:a},k,V),w(null,null,u,{kind:"field",name:"backButton",static:!1,private:!1,access:{has:e=>"backButton"in e,get:e=>e.backButton,set:(e,t)=>{e.backButton=t}},metadata:a},L,V),w(null,null,p,{kind:"field",name:"searchButton",static:!1,private:!1,access:{has:e=>"searchButton"in e,get:e=>e.searchButton,set:(e,t)=>{e.searchButton=t}},metadata:a},D,V),w(null,null,g,{kind:"field",name:"searchInput",static:!1,private:!1,access:{has:e=>"searchInput"in e,get:e=>e.searchInput,set:(e,t)=>{e.searchInput=t}},metadata:a},I,V),w(null,null,b,{kind:"field",name:"cancelSearch",static:!1,private:!1,access:{has:e=>"cancelSearch"in e,get:e=>e.cancelSearch,set:(e,t)=>{e.cancelSearch=t}},metadata:a},R,V),w(null,null,m,{kind:"field",name:"front",static:!1,private:!1,access:{has:e=>"front"in e,get:e=>e.front,set:(e,t)=>{e.front=t}},metadata:a},H,V),a&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),v(e,f)})(),e})(),ke=(()=>{var e;let t,l,s,o,a=n.HtmlView,h=[],c=[],d=[],u=[];return e=class extends a{constructor(e){super(e),this.navBar=(v(this,h),v(this,c,void 0)),this.sheets=v(this,d,void 0),this.front=v(this,u,void 0),this.initStack()}initStack(){this.setIntrinsic({classList:["stack"],style:{position:"relative",overflow:"hidden"}})}get edgeInsets(){return i.Property.getter()}onResize(){super.onResize(),this.resizeStack()}resizeStack(){const e=this.style.width.cssState,t=this.style.height.cssState,i=this.navBar.view;let l=null;null!==i&&i.mounted&&(i.style.width.setIntrinsic(e),l=i.style.height.cssState);const s=this.sheets.views;for(const i in s){s[i].style.setIntrinsic({width:e,height:t,paddingTop:l})}}},(()=>{var n;const v="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=a[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[r.ViewRef({viewType:R,binds:!0,observes:!0,initView(e){e.placement.setIntrinsic("top"),e.style.setIntrinsic({position:"absolute",left:0,top:0,width:this.owner.style.width.cssState,zIndex:1})},willAttachView(e,t){this.owner.callObservers("viewWillAttachNavBar",e,t,this.owner)},didAttachView(e,t){this.owner.edgeInsets.decohereOutlets()},willDetachView(e){this.owner.edgeInsets.decohereOutlets()},didDetachView(e){this.owner.callObservers("viewDidDetachNavBar",e,this.owner)},viewDidSetBarHeight(e){this.owner.requireUpdate(r.View.NeedsResize)},viewDidMount(){this.owner.edgeInsets.decohereOutlets()},viewWillUnmount(){this.owner.edgeInsets.decohereOutlets()}})],l=[r.ViewSet({viewType:Te,binds:!0,observes:!0,initView(e){const t=this.owner.style.width.cssState,i=this.owner.style.height.cssState,l=this.owner.navBar.view,s=null!==l&&l.mounted?l.style.height.cssState:null;e.style.setIntrinsic({position:"absolute",left:t,top:0,width:t,height:i,paddingTop:s,boxSizing:"border-box",zIndex:0})},willAttachView(e,t){this.owner.callObservers("viewWillAttachSheet",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachSheet",e,this.owner)},viewWillPresent(e){this.owner.callObservers("viewWillPresentSheet",e,this.owner)},viewDidPresent(e){this.owner.callObservers("viewDidPresentSheet",e,this.owner)},viewWillDismiss(e){this.owner.callObservers("viewWillDismissSheet",e,this.owner)},viewDidDismiss(e){this.owner.callObservers("viewDidDismissSheet",e,this.owner)},viewWillLayout(e){e.layoutSheet()}})],s=[r.ViewRef({viewType:Te,binds:!1,willAttachView(e,t){this.owner.callObservers("viewWillAttachFront",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachFront",e,this.owner)}})],o=[i.Property({extends:!0,getOutletValue(e){let t,i=this.value;return e.owner instanceof Te&&null!==(t=this.owner.navBar.view)&&t.mounted&&(i={insetTop:0,insetRight:i.insetRight,insetBottom:i.insetBottom,insetLeft:i.insetLeft}),i}})],w(e,null,o,{kind:"getter",name:"edgeInsets",static:!1,private:!1,access:{has:e=>"edgeInsets"in e,get:e=>e.edgeInsets},metadata:v},null,h),w(null,null,t,{kind:"field",name:"navBar",static:!1,private:!1,access:{has:e=>"navBar"in e,get:e=>e.navBar,set:(e,t)=>{e.navBar=t}},metadata:v},c,h),w(null,null,l,{kind:"field",name:"sheets",static:!1,private:!1,access:{has:e=>"sheets"in e,get:e=>e.sheets,set:(e,t)=>{e.sheets=t}},metadata:v},d,h),w(null,null,s,{kind:"field",name:"front",static:!1,private:!1,access:{has:e=>"front"in e,get:e=>e.front,set:(e,t)=>{e.front=t}},metadata:v},u,h),v&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:v})})(),e})(),Le=(()=>{var e;let t,l,s,n,r,o,a=d.Controller,h=[],c=[],u=[],p=[],g=[],b=[],m=[];return e=class extends a{constructor(){super(...arguments),this.backAlign=(v(this,h),v(this,c,void 0)),this.stack=v(this,u,void 0),this.navBar=v(this,p,void 0),this.sheets=v(this,g,void 0),this.root=v(this,b,void 0),this.front=v(this,m,void 0)}didPressCloseButton(e,t){this.callObservers("controllerDidPressCloseButton",e,t,this)}didPressBackButton(e,t){this.callObservers("controllerDidPressBackButton",e,t,this),e.defaultPrevented||this.front.dismiss()}didPressSearchButton(e,t){this.callObservers("controllerDidPressSearchButton",e,t,this)}},(()=>{var v;const y="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=a[Symbol.metadata])&&void 0!==v?v:null):void 0;t=[i.Property({valueType:Number,value:-1/3})],l=[d.TraitViewRef({willAttachTrait(e){this.owner.callObservers("controllerWillAttachStackTrait",e,this.owner)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachStackTrait",e,this.owner)},viewType:ke,observesView:!0,initView(e){const t=this.owner.navBar.controller;null!==t&&(t.bar.insertView(e),null===e.navBar.view&&e.navBar.setView(t.bar.view));const i=this.owner.sheets.controllers;for(const t in i){const l=i[t],s=l.sheet.view;if(null!==s&&null===s.parent){const t=l.sheet.trait;null!==t&&l.sheet.insertView(e,void 0,void 0,t.key)}}},willAttachView(e){this.owner.callObservers("controllerWillAttachStackView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachStackView",e,this.owner)},viewWillAttachNavBar(e){const t=this.owner.navBar.controller;null!==t&&t.bar.setView(e)},viewDidDetachNavBar(e){const t=this.owner.navBar.controller;null!==t&&t.bar.setView(null)}})],s=[d.TraitViewControllerRef({controllerType:W,binds:!0,observes:!0,get parentView(){return this.owner.stack.view},getTraitViewRef:e=>e.bar,willAttachController(e){this.owner.callObservers("controllerWillAttachNavBar",e,this.owner)},didAttachController(e){e.bar.insertView()},willDetachController(e){const t=e.bar.view;null!==t&&this.detachNavBarView(t,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachNavBar",e,this.owner)},controllerWillAttachBarView(e,t){this.owner.callObservers("controllerWillAttachNavBarView",e,this.owner),this.attachNavBarView(e,t)},controllerDidDetachBarView(e,t){this.detachNavBarView(e,t),this.owner.callObservers("controllerDidDetachNavBarView",e,this.owner)},attachNavBarView(e,t){const i=this.owner.stack.view;null!==i&&null===i.navBar.view&&i.navBar.setView(e);const l=this.owner.front.view;null!==l&&this.frontViewDidScroll(l,t)},detachNavBarView(e,t){e.remove()},controllerDidPressCloseButton(e,t){this.owner.didPressCloseButton(e,t)},controllerDidPressBackButton(e,t){this.owner.didPressBackButton(e,t)},controllerDidPressSearchButton(e,t){this.owner.didPressSearchButton(e,t)},frontViewDidScroll(e,t){},createController:()=>new Ce})],n=[d.TraitViewControllerSet({controllerType:Se,binds:!1,observes:!0,get parentView(){return this.owner.stack.view},getTraitViewRef:e=>e.sheet,willAttachController(e){const t=this.owner.front.controller;e!==t&&(e.back.setController(t),null!==t&&t.forward.setController(e),null===this.owner.root.controller&&this.owner.root.setController(e),this.owner.front.setController(e)),this.owner.callObservers("controllerWillAttachSheet",e,this.owner)},didAttachController(e){const t=e.sheet.trait;null!==t&&this.attachSheetTrait(t,e);const i=e.sheet.view;null!==i&&this.attachSheetView(i,e)},willDetachController(e){const t=e.sheet.view;null!==t&&this.detachSheetView(t,e);const i=e.sheet.trait;null!==i&&this.detachSheetTrait(i,e)},didDetachController(e){const t=e.back.controller,i=e.forward.controller;e===this.owner.front.controller&&this.owner.front.setController(t,i),null!==t&&(t.forward.setController(i),e.back.setController(null)),null!==i&&(e.forward.setController(null),i.back.setController(t)),this.owner.callObservers("controllerDidDetachSheet",e,this.owner)},controllerWillAttachSheetTrait(e,t){this.owner.callObservers("controllerWillAttachSheetTrait",e,t,this.owner),this.attachSheetTrait(e,t)},controllerDidDetachSheetTrait(e,t){this.detachSheetTrait(e,t),this.owner.callObservers("controllerDidDetachSheetTrait",e,t,this.owner)},attachSheetTrait(e,t){},detachSheetTrait(e,t){},controllerWillAttachSheetView(e,t){this.owner.callObservers("controllerWillAttachSheetView",e,t,this.owner),this.attachSheetView(e,t)},controllerDidDetachSheetView(e,t){this.detachSheetView(e,t),this.owner.callObservers("controllerDidDetachSheetView",e,t,this.owner)},attachSheetView(e,t){const i=t.title.controller;null!==i&&this.attachTitle(i,t);const l=this.owner.stack.view;null!==l&&l.sheets.addView(e)},detachSheetView(e,t){const i=t.title.controller;null!==i&&this.detachTitle(i,t),e.remove()},controllerWillAttachTitle(e,t){this.owner.callObservers("controllerWillAttachSheetTitle",e,t,this.owner),this.attachTitle(e,t)},controllerDidDetachTitle(e,t){this.detachTitle(e,t),this.owner.callObservers("controllerDidDetachSheetTitle",e,t,this.owner)},attachTitle(e,t){},detachTitle(e,t){e.remove()},controllerWillPresentSheetView(e,t){},controllerDidPresentSheetView(e,t){},controllerWillDismissSheetView(e,t){if(t===this.owner.front.controller){this.owner.front.setController(null);const e=t.back.controller;null!==e&&(this.owner.front.setController(e,t),e.forward.setController(null),t.back.setController(null))}},controllerDidDismissSheetView(e,t){const i=this.owner.stack.view;null!==i&&(null!==t.forward.controller?i.sheets.removeView(e):i.sheets.deleteView(e)),null===t.forward.controller&&this.deleteController(t)}})],r=[d.TraitViewControllerRef({controllerType:Se,binds:!1,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e,t){this.owner.callObservers("controllerWillAttachRoot",e,this.owner)},didAttachController(e,t){const i=e.sheet.trait;null!==i&&this.attachRootTrait(i,e);const l=e.sheet.view;null!==l&&this.attachRootView(l,e)},willDetachController(e){const t=e.sheet.view;null!==t&&this.detachRootView(t,e);const i=e.sheet.trait;null!==i&&this.detachRootTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachRoot",e,this.owner)},controllerWillAttachSheetTrait(e,t){this.owner.callObservers("controllerWillAttachRootTrait",e,this.owner),this.attachRootTrait(e,t)},controllerDidDetachSheetTrait(e,t){this.detachRootTrait(e,t),this.owner.callObservers("controllerDidDetachRootTrait",e,this.owner)},attachRootTrait(e,t){},detachRootTrait(e,t){},controllerWillAttachSheetView(e,t){this.owner.callObservers("controllerWillAttachRootView",e,this.owner),this.attachRootView(e,t)},controllerDidDetachSheetView(e,t){this.detachRootView(e,t),this.owner.callObservers("controllerDidDetachRootView",e,this.owner)},attachRootView(e,t){},detachRootView(e,t){}})],o=[d.TraitViewControllerRef({controllerType:Se,binds:!1,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e,t){this.owner.callObservers("controllerWillAttachFront",e,this.owner)},didAttachController(e,t){const i=e.sheet.trait;null!==i&&this.attachFrontTrait(i,e);const l=e.sheet.view;if(null!==l){const i=t instanceof Se?t.sheet.view:null;this.attachFrontView(l,i,e)}},willDetachController(e){const t=e.sheet.view;null!==t&&this.detachFrontView(t,e);const i=e.sheet.trait;null!==i&&this.detachFrontTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachFront",e,this.owner)},controllerWillAttachSheetTrait(e,t){this.owner.callObservers("controllerWillAttachFrontTrait",e,this.owner),this.attachFrontTrait(e,t)},controllerDidDetachSheetTrait(e,t){this.detachFrontTrait(e,t),this.owner.callObservers("controllerDidDetachFrontTrait",e,this.owner)},attachFrontTrait(e,t){},detachFrontTrait(e,t){},controllerWillAttachSheetView(e,t){this.owner.callObservers("controllerWillAttachFrontView",e,this.owner);const i=t.nextSibling,l=i instanceof Se?i.sheet.view:null;this.attachFrontView(e,l,t)},controllerDidDetachSheetView(e,t){this.detachFrontView(e,t),this.owner.callObservers("controllerDidDetachFrontView",e,this.owner)},attachFrontView(e,t,i){const l=this.owner.stack.view;null!==l&&l.front.attachView(e,t),this.presentFrontView(e,t,i);const s=this.owner.navBar.controller;null!==s&&this.owner.navBar.frontViewDidScroll(e,s)},detachFrontView(e,t){const i=this.owner.stack.view;null!==i&&i.front.detachView(),this.dismissFrontView(e,t)},presentFrontView(e,t,i){let l;null===e.parent&&null!==(l=this.owner.stack.view)&&l.insertChild(e,t),null===i.forward.controller?(e.sheetAlign.setIntrinsic(1),e.present(null!==i.back.controller)):(e.sheetAlign.setIntrinsic(this.owner.backAlign.value),e.present())},dismissFrontView(e,t){null!==t.forward.controller?(e.sheetAlign.setIntrinsic(this.owner.backAlign.value),e.dismiss()):(e.sheetAlign.setIntrinsic(1),e.dismiss())},controllerDidScrollSheetView(e,t){const i=this.owner.navBar.controller;null!==i&&this.owner.navBar.frontViewDidScroll(e,i)},dismiss(e){const t=this.view;return null!==t&&t.dismiss(e),t}})],w(null,null,t,{kind:"field",name:"backAlign",static:!1,private:!1,access:{has:e=>"backAlign"in e,get:e=>e.backAlign,set:(e,t)=>{e.backAlign=t}},metadata:y},c,h),w(null,null,l,{kind:"field",name:"stack",static:!1,private:!1,access:{has:e=>"stack"in e,get:e=>e.stack,set:(e,t)=>{e.stack=t}},metadata:y},u,h),w(null,null,s,{kind:"field",name:"navBar",static:!1,private:!1,access:{has:e=>"navBar"in e,get:e=>e.navBar,set:(e,t)=>{e.navBar=t}},metadata:y},p,h),w(null,null,n,{kind:"field",name:"sheets",static:!1,private:!1,access:{has:e=>"sheets"in e,get:e=>e.sheets,set:(e,t)=>{e.sheets=t}},metadata:y},g,h),w(null,null,r,{kind:"field",name:"root",static:!1,private:!1,access:{has:e=>"root"in e,get:e=>e.root,set:(e,t)=>{e.root=t}},metadata:y},b,h),w(null,null,o,{kind:"field",name:"front",static:!1,private:!1,access:{has:e=>"front"in e,get:e=>e.front,set:(e,t)=>{e.front=t}},metadata:y},m,h),y&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:y})})(),e})(),De=(()=>{var e;let l,n,r,o,h,c,u,p,g=W,b=[],m=[],y=[],f=[],V=[],S=[],k=[];return e=class extends g{constructor(){super(...arguments),this.menuButton=(v(this,m),v(this,y,void 0)),this.actionButton=v(this,f,void 0),this.cover=v(this,V,void 0),this.modeTools=v(this,S,void 0),this.fullScreen=v(this,k,void 0)}createLayout(){const e=new Array,t=this.menuButton.controller;if(null!==t){const i=t.layout.value;null!==i&&e.push(i),null!==t.tool.view&&this.menuButton.insertView()}const i=new Array;for(const e in this.modeTools.controllers)i.push(this.modeTools.controllers[e]);const l=i.length;for(let t=0;t<l;t+=1){const s=i[t];let n=s.layout.value;if(null!==n){const r="mode"+s.uid;if(n=n.withKey(r),n=n.withPresence(void 0,null,null),e.push(n),null!==s.tool.view){const e=null!==(t+1<l?i[t+1]:null)?s.tool.view:null;s.tool.insertView(this.bar.view,void 0,e,r)}}}0!==l&&e.push(T.create("coverPadding",0,0,12));const n=T.create("cover",1,0,0,0);e.push(n);const r=this.cover.controller;if(null!==r){const e=r.title.insertView(this.bar.view,void 0,void 0,"cover");if(null!==e){const t=e.getLookOr(s.Look.timing,s.Mood.navigating,!1);e.style.color.setIntrinsic(s.Look.textColor,t),e.style.zIndex.setIntrinsic(1)}}const o=this.actionButton.controller;if(null!==o){const t=o.layout.value;null!==t&&e.push(t),null!==o.tool.view&&this.actionButton.insertView()}return C.create(e)}get menuIcon(){return e.menuIcon}get menuCloseIcon(){return e.menuCloseIcon}get actionIcon(){return e.actionIcon}static get menuIcon(){return a.VectorIcon.create(24,24,"M19,3C20.1,3,21,3.9,21,5L21,19C21,20.1,20.1,21,19,21L5,21C3.9,21,3,20.1,3,19L3,5C3,3.9,3.9,3,5,3L19,3ZM9,5L6,5C5.49,5,5.06,5.39,5.01,5.88L5,6L5,18C5,18.51,5.39,18.94,5.88,18.99L6,19L9,19L9,5ZM18,5L11,5L11,19L18,19C18.51,19,18.94,18.61,18.99,18.12L19,18L19,6C19,5.49,18.61,5.06,18.12,5.01L18,5ZM8,11L8,12L6,12L6,11L8,11ZM8,9L8,10L6,10L6,9L8,9ZM8,7L8,8L6,8L6,7L8,7Z")}static get menuCloseIcon(){return a.VectorIcon.create(24,24,"M19,3C20.1,3,21,3.9,21,5L21,19C21,20.1,20.1,21,19,21L5,21C3.9,21,3,20.1,3,19L3,5C3,3.9,3.9,3,5,3L19,3ZM9,5L6,5C5.49,5,5.06,5.39,5.01,5.88L5,6L5,18C5,18.51,5.39,18.94,5.88,18.99L6,19L9,19L9,5ZM18,5L11,5L11,19L18,19C18.51,19,18.94,18.61,18.99,18.12L19,18L19,6C19,5.49,18.61,5.06,18.12,5.01L18,5ZM8,11L8,12L6,12L6,11L8,11ZM8,9L8,10L6,10L6,9L8,9ZM8,7L8,8L6,8L6,7L8,7Z")}static get actionIcon(){return a.VectorIcon.create(24,24,"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z")}},(()=>{var s;const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(s=g[Symbol.metadata])&&void 0!==s?s:null):void 0;o=[d.TraitViewControllerRef({controllerType:A,binds:!0,viewKey:"menuButton",observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,controllerDidPressToolView(e,t){this.owner.callObservers("controllerDidPressMenuButton",e,t,this.owner)},createController(){const e=new x,t=T.create(this.viewKey,0,0,48);e.layout.set(t);const i=e.tool.attachView();return i.iconLayout.setIntrinsic({width:24,height:24}),this.owner.fullScreen.value?i.graphics.setIntrinsic(this.owner.menuIcon):i.graphics.setIntrinsic(this.owner.menuCloseIcon),e}})],h=[d.TraitViewControllerRef({controllerType:A,binds:!0,viewKey:"actionButton",observes:!0,get parentView(){return this.owner.bar.view},getTraitViewRef:e=>e.tool,controllerDidPressToolView(e,t){this.owner.callObservers("controllerDidPressActionButton",e,t,this.owner)},createController(){const e=new x,t=T.create(this.viewKey,0,0,48);e.layout.set(t);const i=e.tool.attachView();return i.iconLayout.setIntrinsic({width:24,height:24}),i.graphics.setIntrinsic(this.owner.actionIcon),e}})],c=[d.TraitViewControllerRef({controllerType:Se,inherits:!0,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},didDetachController(e){null===e.back.controller&&null===e.forward.controller&&this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerWillAttachTitle(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidDetachTitle(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)}})],u=[d.TraitViewControllerSet({controllerType:A,ordered:!0,inherits:!0,observes:!0,getTraitViewRef:e=>e.tool,willAttachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},didDetachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerWillAttachToolView(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidDetachToolView(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)}})],p=[i.Property({valueType:Boolean,value:!1,inherits:!0,didSetValue(e){const t=this.owner.menuButton.view;t instanceof I&&(e?t.graphics.setIntrinsic(this.owner.menuIcon):t.graphics.setIntrinsic(this.owner.menuCloseIcon))}})],l=[t.Lazy],n=[t.Lazy],r=[t.Lazy],w(e,null,l,{kind:"getter",name:"menuIcon",static:!0,private:!1,access:{has:e=>"menuIcon"in e,get:e=>e.menuIcon},metadata:a},null,b),w(e,null,n,{kind:"getter",name:"menuCloseIcon",static:!0,private:!1,access:{has:e=>"menuCloseIcon"in e,get:e=>e.menuCloseIcon},metadata:a},null,b),w(e,null,r,{kind:"getter",name:"actionIcon",static:!0,private:!1,access:{has:e=>"actionIcon"in e,get:e=>e.actionIcon},metadata:a},null,b),w(null,null,o,{kind:"field",name:"menuButton",static:!1,private:!1,access:{has:e=>"menuButton"in e,get:e=>e.menuButton,set:(e,t)=>{e.menuButton=t}},metadata:a},y,m),w(null,null,h,{kind:"field",name:"actionButton",static:!1,private:!1,access:{has:e=>"actionButton"in e,get:e=>e.actionButton,set:(e,t)=>{e.actionButton=t}},metadata:a},f,m),w(null,null,c,{kind:"field",name:"cover",static:!1,private:!1,access:{has:e=>"cover"in e,get:e=>e.cover,set:(e,t)=>{e.cover=t}},metadata:a},V,m),w(null,null,u,{kind:"field",name:"modeTools",static:!1,private:!1,access:{has:e=>"modeTools"in e,get:e=>e.modeTools,set:(e,t)=>{e.modeTools=t}},metadata:a},S,m),w(null,null,p,{kind:"field",name:"fullScreen",static:!1,private:!1,access:{has:e=>"fullScreen"in e,get:e=>e.fullScreen,set:(e,t)=>{e.fullScreen=t}},metadata:a},k,m),a&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),v(e,b)})(),e})(),Ie=(()=>{var e;let t,l,s,o,a,h,c,d=n.HtmlView,u=[],p=[],g=[],b=[],m=[],y=[],f=[];return e=class extends d{constructor(e){super(e),this.folioStyle=(v(this,u),v(this,p,void 0)),this.fullBleed=v(this,g,void 0),this.appBar=v(this,b,void 0),this.drawer=v(this,m,void 0),this.stack=v(this,y,void 0),this.cover=v(this,f,void 0),this.initFolio()}initFolio(){this.setIntrinsic({classList:["folio"],style:{display:"flex",position:"relative",overflow:"hidden"}})}get edgeInsets(){return i.Property.getter()}onResize(){super.onResize(),this.resizeFolio()}resizeFolio(){let e=this.folioStyle.value;this.folioStyle.hasAffinity(i.Affinity.Intrinsic)&&(e="mobile"===this.viewIdiom?"stacked":"unstacked",this.folioStyle.setIntrinsic(e)),"stacked"===e?this.resizeStacked():"unstacked"===e&&this.resizeUnstacked()}resizeStacked(){this.drawer.removeView(),this.appBar.removeView(),this.stack.insertView(this);const e=this.cover.view;null!==e&&(e.parent===this&&e.remove(),e.style.paddingLeft.setIntrinsic(null))}resizeUnstacked(){const e=this.style.width.cssState,t=this.style.height.cssState,i=this.drawer.insertView(),l=i.effectiveWidth.value,s=null!==l?e.minus(l):e,n=this.appBar.view;let r=null;null!==n&&(this.appBar.insertView().style.setIntrinsic({left:l,width:s}),r=n.style.height.cssState),this.stack.insertView(i);const o=this.cover.view;null!==o&&(this.cover.insertView(this),this.fullBleed.value?o.style.setIntrinsic({left:0,top:0,width:e,height:t,paddingTop:r,paddingLeft:l}):o.style.setIntrinsic({left:l,top:0,width:s,height:t,paddingTop:r,paddingLeft:null}),o.present(!1))}didLayout(){this.layoutFolio(),super.didLayout()}layoutFolio(){const e=this.folioStyle.value;"stacked"===e?this.layoutStacked():"unstacked"===e&&this.layoutUnstacked()}layoutStacked(){}layoutUnstacked(){const e=this.style.width.cssState,t=this.drawer.insertView().effectiveWidth.value,i=null!==t?e.minus(t):e,l=this.appBar.view;null!==l&&l.style.setIntrinsic({left:t,width:i});const s=this.cover.view;null!==s&&(this.fullBleed.value?s.style.setIntrinsic({left:0,width:e,paddingLeft:t}):s.style.setIntrinsic({left:t,width:0,paddingLeft:null}))}},(()=>{var n;const v="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=d[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[i.Property({valueType:String,updateFlags:r.View.NeedsResize,didSetValue(e){this.owner.callObservers("viewDidSetFolioStyle",e,this.owner),this.owner.edgeInsets.decohereOutlets()}})],l=[i.Property({valueType:Boolean,value:!1,didSetValue(e){this.owner.requireUpdate(r.View.NeedsResize,!0),this.owner.callObservers("viewDidSetFullBleed",e,this.owner)}})],s=[r.ViewRef({viewType:R,binds:!0,initView(e){const t=this.owner.style.width.cssState,i=this.owner.drawer.view,l=null!==i?i.effectiveWidth.value:null,s=null!==l?t.minus(l):t;e.placement.setIntrinsic("top"),e.style.setIntrinsic({position:"absolute",left:l,top:0,width:s,zIndex:1})},willAttachView(e,t){this.owner.callObservers("viewWillAttachAppBar",e,t,this.owner)},didAttachView(e,t){this.owner.edgeInsets.decohereOutlets()},willDetachView(e){this.owner.edgeInsets.decohereOutlets()},didDetachView(e){this.owner.callObservers("viewDidDetachAppBar",e,this.owner)}})],o=[r.ViewRef({viewType:fe,binds:!0,observes:!0,initView(e){e.style.setIntrinsic({overflow:"hidden",zIndex:2}),e.present(!1)},willAttachView(e,t){this.owner.callObservers("viewWillAttachDrawer",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachDrawer",e,this.owner)},insertChild(e,t,i,l){e.prependChild(t,l)},viewDidSetPresence(e,t){this.owner.edgeInsets.decohereOutlets()},viewDidSetEffectiveWidth(e,t){"unstacked"===this.owner.folioStyle.value&&this.owner.requireUpdate(r.View.NeedsResize)}})],a=[r.ViewRef({viewType:ke,initView(e){e.style.flexGrow.setIntrinsic(1)},willAttachView(e,t){this.owner.callObservers("viewWillAttachStack",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachStack",e,this.owner)}})],h=[r.ViewRef({viewType:Te,binds:!1,observes:!0,initView(e){if("unstacked"===this.owner.folioStyle.value){const t=this.owner.style.width.cssState,i=this.owner.style.height.cssState,l=this.owner.drawer.view,s=null!==l?l.effectiveWidth.value:null,n=null!==s?t.minus(s):t,r=this.owner.appBar.view,o=null!==r?r.style.height.cssState:null;e.style.setIntrinsic({position:"absolute",left:s,top:0,width:n,height:i,paddingTop:o,boxSizing:"border-box",zIndex:0})}},willAttachView(e,t){this.owner.callObservers("viewWillAttachCover",e,t,this.owner)},didAttachView(e,t){this.owner.fullBleed.setIntrinsic(e.fullBleed.value)},willDetachView(e){e.remove()},didDetachView(e){this.owner.callObservers("viewDidDetachCover",e,this.owner)},viewDidSetFullBleed(e,t){this.owner.fullBleed.setIntrinsic(e)}})],c=[i.Property({extends:!0,getOutletValue(e){let t=this.value;if("unstacked"===this.owner.folioStyle.value){let i=t.insetTop;const l=t.insetRight,s=t.insetBottom;let n=t.insetLeft;if(e.owner===this.owner.appBar.view){const e=this.owner.drawer.view;null!==e&&(n*=1-e.presence.value.phase),t={insetTop:i,insetRight:l,insetBottom:s,insetLeft:n}}else if(e.owner===this.owner.cover.view){null!==this.owner.appBar.view&&(i=0);const e=this.owner.drawer.view;null!==e&&(n*=1-e.presence.value.phase),t={insetTop:i,insetRight:l,insetBottom:s,insetLeft:n}}}return t}})],w(e,null,c,{kind:"getter",name:"edgeInsets",static:!1,private:!1,access:{has:e=>"edgeInsets"in e,get:e=>e.edgeInsets},metadata:v},null,u),w(null,null,t,{kind:"field",name:"folioStyle",static:!1,private:!1,access:{has:e=>"folioStyle"in e,get:e=>e.folioStyle,set:(e,t)=>{e.folioStyle=t}},metadata:v},p,u),w(null,null,l,{kind:"field",name:"fullBleed",static:!1,private:!1,access:{has:e=>"fullBleed"in e,get:e=>e.fullBleed,set:(e,t)=>{e.fullBleed=t}},metadata:v},g,u),w(null,null,s,{kind:"field",name:"appBar",static:!1,private:!1,access:{has:e=>"appBar"in e,get:e=>e.appBar,set:(e,t)=>{e.appBar=t}},metadata:v},b,u),w(null,null,o,{kind:"field",name:"drawer",static:!1,private:!1,access:{has:e=>"drawer"in e,get:e=>e.drawer,set:(e,t)=>{e.drawer=t}},metadata:v},m,u),w(null,null,a,{kind:"field",name:"stack",static:!1,private:!1,access:{has:e=>"stack"in e,get:e=>e.stack,set:(e,t)=>{e.stack=t}},metadata:v},y,u),w(null,null,h,{kind:"field",name:"cover",static:!1,private:!1,access:{has:e=>"cover"in e,get:e=>e.cover,set:(e,t)=>{e.cover=t}},metadata:v},f,u),v&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:v})})(),e})(),Oe=(()=>{var e;let t,l,s,n,o,a,h,c,u,p,g,b=Le,m=[],y=[],f=[],V=[],T=[],S=[],C=[],k=[],L=[],D=[],I=[],O=[];return e=class extends b{constructor(){super(...arguments),this.folioStyle=(v(this,m),v(this,y,void 0)),this.fullBleed=v(this,f,void 0),this.fullScreen=v(this,V,void 0),this.folio=v(this,T,void 0),this.stack=v(this,S,void 0),this.sheets=v(this,C,void 0),this.navBar=v(this,k,void 0),this.appBar=v(this,L,void 0),this.drawer=v(this,D,void 0),this.cover=v(this,I,void 0),this.modeTools=v(this,O,void 0)}didPressMenuButton(e,t){this.fullScreen.setIntrinsic(!this.fullScreen.value),this.callObservers("controllerDidPressMenuButton",e,t,this)}didPressActionButton(e,t){this.callObservers("controllerDidPressActionButton",e,t,this)}},(()=>{var v;const P="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=b[Symbol.metadata])&&void 0!==v?v:null):void 0;t=[i.Property({valueType:String,didSetValue(e){const t=this.owner.cover.controller;null!==t&&("stacked"===e?this.owner.sheets.attachController(t):"unstacked"===e&&(null!==this.owner.cover.view&&this.owner.cover.insertView(this.owner.folio.view),this.owner.sheets.detachController(t)));const l=this.owner.stack.view;null!==l&&this.owner.stack.updateFolioStyle(e,l);const s=this.owner.navBar.controller;null!==s&&this.owner.navBar.updateFolioStyle(e,s);const n=this.owner.appBar.controller;null!==n&&this.owner.appBar.updateFolioStyle(e,n);const r=this.owner.sheets.controllers;for(const t in r){const i=r[t],l=i.sheet.view;null!==l&&this.owner.sheets.updateFolioStyle(e,l,i)}this.owner.callObservers("controllerDidSetFolioStyle",e,this.owner);const o=this.owner.folio.view;null!==o&&o.folioStyle.setValue(e,i.Affinity.Inherited)}})],l=[i.Property({valueType:Boolean,value:!1,didSetValue(e){const t=this.owner.drawer.view;null!==t&&this.owner.drawer.updateFullBleed(e,t);const l=this.owner.stack.view;null!==l&&this.owner.stack.updateFullBleed(e,l);const s=this.owner.sheets.controllers;for(const t in s){const i=s[t],l=i.sheet.view;null!==l&&this.owner.sheets.updateFullBleed(e,l,i)}this.owner.callObservers("controllerDidSetFullBleed",e,this.owner);const n=this.owner.folio.view;null!==n&&n.fullBleed.setValue(e,i.Affinity.Inherited)}})],s=[i.Property({valueType:Boolean,value:!1,didSetValue(e){const t=this.owner.drawer.view;null!==t&&(e?t.dismiss():t.present()),this.owner.callObservers("controllerDidSetFullScreen",e,this.owner)}})],n=[d.TraitViewRef({willAttachTrait(e){this.owner.callObservers("controllerWillAttachFolioTrait",e,this.owner)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachFolioTrait",e,this.owner)},viewType:Ie,observesView:!0,initView(e){const t=this.owner.appBar.controller;null!==t&&(t.bar.attachView(),null===e.appBar.view&&e.appBar.setView(t.bar.view));const i=this.owner.cover.controller;null!==i&&e.cover.setView(i.sheet.view)},willAttachView(e){this.owner.callObservers("controllerWillAttachFolioView",e,this.owner)},didAttachView(e){this.owner.folioStyle.setIntrinsic(e.folioStyle.value),this.owner.fullBleed.setIntrinsic(e.fullBleed.value),this.owner.drawer.setView(e.drawer.attachView()),this.owner.stack.setView(e.stack.attachView())},willDetachView(e){this.owner.stack.setView(null),this.owner.drawer.setView(null)},didDetachView(e){this.owner.callObservers("controllerDidDetachFolioView",e,this.owner)},viewDidSetFolioStyle(e,t){this.owner.folioStyle.setIntrinsic(e)},viewDidSetFullBleed(e,t){this.owner.fullBleed.setIntrinsic(e)},viewWillAttachDrawer(e){this.owner.drawer.setView(e)},viewDidDetachDrawer(e){this.owner.drawer.setView(null)},viewWillAttachAppBar(e){const t=this.owner.appBar.controller;null!==t&&t.bar.setView(e)},viewDidDetachAppBar(e){const t=this.owner.appBar.controller;null!==t&&t.bar.setView(null)}})],o=[d.TraitViewRef({extends:!0,didAttachView(e,t){super.didAttachView(e,t),this.updateFolioStyle(this.owner.folioStyle.value,e),this.updateFullBleed(this.owner.fullBleed.value,e)},updateFolioStyle(e,t){},updateFullBleed(e,t){}})],a=[d.TraitViewControllerSet({extends:!0,attachSheetView(e,t){super.attachSheetView(e,t),this.updateFolioStyle(this.owner.folioStyle.value,e,t),this.updateFullBleed(this.owner.fullBleed.value,e,t)},updateFolioStyle(e,t,i){},updateFullBleed(e,t,i){}})],h=[d.TraitViewControllerRef({extends:!0,initController(e){super.initController(e),this.updateFolioStyle(this.owner.folioStyle.value,e)},updateFolioStyle(e,t){},controllerDidPressSearchButton(e,t,i){const l=this.owner.front.controller;if(null!==l&&l.searching.set(!0),i instanceof Ce){const e=i.searchInput.controller;if(e instanceof B){const t=e.input.view;null!==t&&t.node.focus()}}},controllerDidUpdateSearch(e,t,i){const l=this.owner.front.controller;null!==l&&l.updateSearch(e,t)},controllerDidSubmitSearch(e,t,i){const l=this.owner.front.controller;null!==l&&l.submitSearch(e,t)},controllerDidCancelSearch(e,t){const i=this.owner.front.controller;null!==i&&i.searching.set(!1)}})],c=[d.TraitViewControllerRef({controllerType:W,binds:!0,observes:!0,get parentView(){return this.owner.folio.view},getTraitViewRef:e=>e.bar,initController(e){e.bar.attachView()},willAttachController(e){this.owner.callObservers("controllerWillAttachAppBar",e,this.owner)},didAttachController(e){const t=e.bar.view;null!==t&&this.attachAppBarView(t,e)},willDetachController(e){const t=e.bar.view;null!==t&&this.detachAppBarView(t,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachAppBar",e,this.owner)},controllerWillAttachBarView(e,t){this.owner.callObservers("controllerWillAttachAppBarView",e,this.owner),this.attachAppBarView(e,t)},controllerDidDetachBarView(e,t){this.detachAppBarView(e,t),this.owner.callObservers("controllerDidDetachAppBarView",e,this.owner)},attachAppBarView(e,t){const i=this.owner.folio.view;null!==i&&null===i.appBar.view&&i.appBar.setView(e);const l=this.owner.cover.view;null!==l&&this.coverViewDidScroll(l,t)},detachAppBarView(e,t){e.remove()},updateFolioStyle(e,t){t.updateLayout()},coverViewDidScroll(e,t){},controllerDidPressMenuButton(e,t){this.owner.didPressMenuButton(e,t)},controllerDidPressActionButton(e,t){this.owner.didPressActionButton(e,t)},createController:()=>new De})],u=[r.ViewRef({viewType:fe,get parentView(){return this.owner.folio.view},willAttachView(e){this.owner.callObservers("controllerWillAttachDrawerView",e,this.owner)},didAttachView(e){this.updateFullBleed(this.owner.fullBleed.value,e),this.owner.fullScreen.value?e.dismiss():e.present()},didDetachView(e){this.owner.callObservers("controllerDidDetachDrawerView",e,this.owner)},updateFullBleed(e,t){}})],p=[d.TraitViewControllerRef({controllerType:Se,consumed:!0,binds:!1,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e){this.owner.callObservers("controllerWillAttachCover",e,this.owner)},didAttachController(e){this.owner.fullBleed.setIntrinsic(e.fullBleed.value);const t=e.sheet.trait;null!==t&&this.attachCoverTrait(t,e);const i=e.sheet.view;null!==i&&this.attachCoverView(i,e);const l=e.modeTools.controllers;for(const e in l)this.owner.modeTools.attachController(l[e])},willDetachController(e){const t=e.modeTools.controllers;for(const e in t)this.owner.modeTools.detachController(t[e]);const i=e.sheet.view;null!==i&&this.detachCoverView(i,e);const l=e.sheet.trait;null!==l&&this.detachCoverTrait(l,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachCover",e,this.owner)},controllerWillAttachSheetTrait(e,t){this.owner.callObservers("controllerWillAttachCoverTrait",e,this.owner),this.attachCoverTrait(e,t)},controllerDidDetachSheetTrait(e,t){this.detachCoverTrait(e,t),this.owner.callObservers("controllerDidDetachCoverTrait",e,this.owner)},attachCoverTrait(e,t){},detachCoverTrait(e,t){},controllerWillAttachSheetView(e,t){this.owner.callObservers("controllerWillAttachCoverView",e,this.owner),this.attachCoverView(e,t)},controllerDidDetachSheetView(e,t){this.detachCoverView(e,t),this.owner.callObservers("controllerDidDetachCoverView",e,this.owner)},attachCoverView(e,t){const i=this.owner.folio.view;null!==i&&i.cover.attachView(e);const l=this.owner.appBar.controller;null!==l&&this.owner.appBar.coverViewDidScroll(e,l)},detachCoverView(e,t){const i=this.owner.folio.view;null!==i&&i.cover.removeView(),this.detachController()},controllerDidSetFullBleed(e){this.owner.fullBleed.setIntrinsic(e)},controllerWillAttachModeTool(e,t){this.owner.modeTools.attachController(e,t)},controllerDidDetachModeTool(e){this.owner.modeTools.detachController(e)},controllerDidScrollSheetView(e){const t=this.owner.appBar.controller;null!==t&&this.owner.appBar.coverViewDidScroll(e,t)},present(e){const t=this.controller,i=null!==t?t.sheet.view:null;return null!==i&&("stacked"===this.owner.folioStyle.value?(void 0!==this.owner.sheets.controllers[t.uid]&&this.owner.sheets.detachController(t),this.owner.sheets.attachController(t),i.present(e)):this.insertView(this.owner.folio.view)),i}})],g=[d.TraitViewControllerSet({controllerType:A,binds:!1,ordered:!0,observes:!0,getTraitViewRef:e=>e.tool,willAttachController(e){this.owner.callObservers("controllerWillAttachCoverModeTool",e,this.owner)},didAttachController(e){const t=e.tool.view;null!==t&&this.attachToolView(t,e)},willDetachController(e){const t=e.tool.view;null!==t&&this.detachToolView(t,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachCoverModeTool",e,this.owner)},controllerWillAttachToolView(e,t){this.owner.callObservers("controllerWillAttachCoverModeToolView",e,t,this.owner),this.attachToolView(e,t)},controllerDidDetachToolView(e,t){this.detachToolView(e,t),this.owner.callObservers("controllerDidDetachCoverModeToolView",e,t,this.owner)},attachToolView(e,t){},detachToolView(e,t){}})],w(null,null,t,{kind:"field",name:"folioStyle",static:!1,private:!1,access:{has:e=>"folioStyle"in e,get:e=>e.folioStyle,set:(e,t)=>{e.folioStyle=t}},metadata:P},y,m),w(null,null,l,{kind:"field",name:"fullBleed",static:!1,private:!1,access:{has:e=>"fullBleed"in e,get:e=>e.fullBleed,set:(e,t)=>{e.fullBleed=t}},metadata:P},f,m),w(null,null,s,{kind:"field",name:"fullScreen",static:!1,private:!1,access:{has:e=>"fullScreen"in e,get:e=>e.fullScreen,set:(e,t)=>{e.fullScreen=t}},metadata:P},V,m),w(null,null,n,{kind:"field",name:"folio",static:!1,private:!1,access:{has:e=>"folio"in e,get:e=>e.folio,set:(e,t)=>{e.folio=t}},metadata:P},T,m),w(null,null,o,{kind:"field",name:"stack",static:!1,private:!1,access:{has:e=>"stack"in e,get:e=>e.stack,set:(e,t)=>{e.stack=t}},metadata:P},S,m),w(null,null,a,{kind:"field",name:"sheets",static:!1,private:!1,access:{has:e=>"sheets"in e,get:e=>e.sheets,set:(e,t)=>{e.sheets=t}},metadata:P},C,m),w(null,null,h,{kind:"field",name:"navBar",static:!1,private:!1,access:{has:e=>"navBar"in e,get:e=>e.navBar,set:(e,t)=>{e.navBar=t}},metadata:P},k,m),w(null,null,c,{kind:"field",name:"appBar",static:!1,private:!1,access:{has:e=>"appBar"in e,get:e=>e.appBar,set:(e,t)=>{e.appBar=t}},metadata:P},L,m),w(null,null,u,{kind:"field",name:"drawer",static:!1,private:!1,access:{has:e=>"drawer"in e,get:e=>e.drawer,set:(e,t)=>{e.drawer=t}},metadata:P},D,m),w(null,null,p,{kind:"field",name:"cover",static:!1,private:!1,access:{has:e=>"cover"in e,get:e=>e.cover,set:(e,t)=>{e.cover=t}},metadata:P},I,m),w(null,null,g,{kind:"field",name:"modeTools",static:!1,private:!1,access:{has:e=>"modeTools"in e,get:e=>e.modeTools,set:(e,t)=>{e.modeTools=t}},metadata:P},O,m),P&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:P})})(),e})(),Ae=(()=>{var e;let t,l,s,n=W,r=[],o=[],a=[],h=[];return e=class extends n{constructor(){super(...arguments),this.tabs=(v(this,r),v(this,o,void 0)),this.active=v(this,a,void 0),this.tabStyle=v(this,h,void 0)}createLayout(){const e=new Array;e.push(T.create("leftPadding",.5,0,0,0));const t=new Array;for(const e in this.tabs.controllers)t.push(this.tabs.controllers[e]);if("bottom"===this.tabStyle.value)for(let i=0,l=t.length;i<l;i+=1){const s=t[i],n="tab"+s.handle.attachView().uid,r=T.create(n,1,0,0,.5);e.push(r);const o=null!==(i+1<l?t[i+1]:null)?s.handle.view:null;s.handle.insertView(this.bar.view,void 0,o,n)}return e.push(T.create("rightPadding",.5,0,0,1)),C.create(e)}},(()=>{var c;const u="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(c=n[Symbol.metadata])&&void 0!==c?c:null):void 0;t=[d.TraitViewControllerSet({controllerType:Se,ordered:!0,inherits:!0,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},didDetachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerWillAttachHandle(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidDetachHandle(e,t){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidPressHandle(e,t,i){this.owner.callObservers("controllerDidPressTabHandle",e,t,i,this.owner)},controllerDidLongPressHandle(e,t){this.owner.callObservers("controllerDidLongPressTabHandle",e,t,this.owner)}})],l=[d.TraitViewControllerRef({controllerType:Se,inherits:!0,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},didDetachController(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerWillAttachHandle(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)},controllerDidDetachHandle(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)}})],s=[i.Property({valueType:String,value:"none",inherits:!0,didSetValue(e){this.owner.requireUpdate(d.Controller.NeedsAssemble)}})],w(null,null,t,{kind:"field",name:"tabs",static:!1,private:!1,access:{has:e=>"tabs"in e,get:e=>e.tabs,set:(e,t)=>{e.tabs=t}},metadata:u},o,r),w(null,null,l,{kind:"field",name:"active",static:!1,private:!1,access:{has:e=>"active"in e,get:e=>e.active,set:(e,t)=>{e.active=t}},metadata:u},a,r),w(null,null,s,{kind:"field",name:"tabStyle",static:!1,private:!1,access:{has:e=>"tabStyle"in e,get:e=>e.tabStyle,set:(e,t)=>{e.tabStyle=t}},metadata:u},h,r),u&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})})(),e})(),Pe=(()=>{var e;let t,l,s,n,o,a=Te,h=[],c=[],d=[],u=[],p=[];return e=class extends a{constructor(e){super(e),this.tabStyle=(v(this,h),v(this,c,void 0)),this.tabBar=v(this,d,void 0),this.tabs=v(this,u,void 0),this.active=v(this,p,void 0),this.initBinder()}initBinder(){this.setIntrinsic({classList:["binder"],style:{position:"relative",overflow:"hidden"}})}getTab(e,t){void 0===t&&(t=Te);const i=this.getChild(e);return i instanceof t?i:null}getOrCreateTab(e,t){let i=this.getChild(e,t);return null===i&&(i=t.create(),this.setChild(e,i)),i}setTab(e,t){this.setChild(e,t)}get edgeInsets(){return i.Property.getter()}onResize(){super.onResize(),this.resizeBinder()}resizeBinder(){const e=this.style.width.cssState,t=this.style.height.cssState,i=this.style.paddingLeft.value,l=this.style.paddingRight.value,s=this.tabBar.view;let n=null;if(null!==s&&s.mounted){let t=e;n=s.style.height.cssState,null!==i&&(t=t.minus(i)),null!==l&&(t=t.minus(l)),s.style.setIntrinsic({left:i,right:l,width:t})}const r=this.tabs.views;for(const s in r){r[s].style.setIntrinsic({width:e,height:t,paddingTop:this.style.paddingTop.state,paddingRight:l,paddingBottom:n,paddingLeft:i})}}},(()=>{var v;const g="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=a[Symbol.metadata])&&void 0!==v?v:null):void 0;t=[i.Property({valueType:String,value:"none",updateFlags:r.View.NeedsResize,didSetValue(e){this.owner.callObservers("viewDidSetTabStyle",e,this.owner),this.owner.edgeInsets.decohereOutlets()}})],l=[r.ViewRef({viewType:R,binds:!0,observes:!0,initView(e){e.placement.setIntrinsic("bottom"),e.style.setIntrinsic({position:"absolute",left:0,bottom:0,width:this.owner.style.width.cssState,zIndex:1})},willAttachView(e,t){this.owner.callObservers("viewWillAttachTabBar",e,t,this.owner)},didAttachView(e,t){this.owner.edgeInsets.decohereOutlets()},willDetachView(e){this.owner.edgeInsets.decohereOutlets()},didDetachView(e){this.owner.callObservers("viewDidDetachTabBar",e,this.owner)},viewDidSetBarHeight(e){this.owner.requireUpdate(r.View.NeedsResize)},viewDidMount(){this.owner.edgeInsets.decohereOutlets()},viewWillUnmount(){this.owner.edgeInsets.decohereOutlets()}})],s=[r.ViewSet({viewType:Te,binds:!1,observes:!0,initView(e){const t=this.owner.tabBar.view,i=null!==t&&t.mounted?t.style.height.cssState:null;e.style.setIntrinsic({position:"absolute",left:0,top:0,width:this.owner.style.width.cssState,height:this.owner.style.height.cssState,paddingTop:this.owner.style.paddingTop.state,paddingBottom:i,boxSizing:"border-box",zIndex:0})},willAttachView(e,t){this.owner.callObservers("viewWillAttachTab",e,t,this.owner)},willDetachView(e){e===this.owner.active.view&&this.owner.active.setView(null)},didDetachView(e){this.owner.callObservers("viewDidDetachTab",e,this.owner)},detectView:e=>e instanceof Te?e:null})],n=[r.ViewRef({viewType:Te,binds:!1,observes:!0,willAttachView(e,t){this.owner.callObservers("viewWillAttachActive",e,t,this.owner)},didAttachView(e,t){this.owner.fullBleed.setIntrinsic(e.fullBleed.value),null===e.parent&&this.owner.insertChild(e,t)},didDetachView(e){this.owner.callObservers("viewDidDetachActive",e,this.owner)},viewDidSetFullBleed(e,t){this.owner.fullBleed.setIntrinsic(e)}})],o=[i.Property({extends:!0,getOutletValue(e){let t=this.value;if(e.owner instanceof Te){const e=this.owner.tabBar.view;null!==e&&e.mounted&&(t={insetTop:t.insetTop,insetRight:t.insetRight,insetBottom:0,insetLeft:t.insetLeft})}return t}})],w(e,null,o,{kind:"getter",name:"edgeInsets",static:!1,private:!1,access:{has:e=>"edgeInsets"in e,get:e=>e.edgeInsets},metadata:g},null,h),w(null,null,t,{kind:"field",name:"tabStyle",static:!1,private:!1,access:{has:e=>"tabStyle"in e,get:e=>e.tabStyle,set:(e,t)=>{e.tabStyle=t}},metadata:g},c,h),w(null,null,l,{kind:"field",name:"tabBar",static:!1,private:!1,access:{has:e=>"tabBar"in e,get:e=>e.tabBar,set:(e,t)=>{e.tabBar=t}},metadata:g},d,h),w(null,null,s,{kind:"field",name:"tabs",static:!1,private:!1,access:{has:e=>"tabs"in e,get:e=>e.tabs,set:(e,t)=>{e.tabs=t}},metadata:g},u,h),w(null,null,n,{kind:"field",name:"active",static:!1,private:!1,access:{has:e=>"active"in e,get:e=>e.active,set:(e,t)=>{e.active=t}},metadata:g},p,h),g&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:g})})(),e})(),xe=(()=>{var e;let l,s,n,r,o,a,h=Se,c=[],u=[],p=[],g=[],b=[],m=[],y=[];return e=class extends h{constructor(){super(...arguments),this.folioStyle=(v(this,c),v(this,u,void 0)),this.tabStyle=v(this,p,void 0),this.binder=v(this,g,void 0),this.tabBar=v(this,b,void 0),this.tabs=v(this,m,void 0),this.active=v(this,y,void 0)}didPressTabHandle(e,t,i){this.callObservers("controllerDidPressTabHandle",e,t,i,this),e.defaultPrevented||this.active.setController(i)}didLongPressTabHandle(e,t){this.callObservers("controllerDidLongPressTabHandle",e,t,this)}setTab(e,t){const i=this.getChild(e,Se),l=i===this.active.controller;let s;null!==i?(s=i.getNextSibling(Se),this.tabs.deleteController(i)):s=null,null!==t&&(this.tabs.insertController(null,t,s,e),l&&this.active.setController(t))}},(()=>{var v;const f="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=h[Symbol.metadata])&&void 0!==v?v:null):void 0;l=[i.Property({valueType:String,inherits:!0,didSetValue(e){"stacked"===e?this.owner.tabStyle.setIntrinsic("bottom"):"unstacked"===e&&this.owner.tabStyle.setIntrinsic("mode")}})],s=[i.Property({valueType:String,value:"none",didSetValue(e){const t=this.owner.tabBar.controller;null!==t&&this.owner.tabBar.updateTabStyle(e,t);const l=this.owner.tabs.controllers;for(const t in l){const i=l[t];this.owner.tabs.updateTabStyle(e,i)}this.owner.callObservers("controllerDidSetTabStyle",e,this.owner);const s=this.owner.binder.view;null!==s&&s.tabStyle.setValue(e,i.Affinity.Inherited)}})],n=[d.TraitViewRef({willAttachTrait(e){this.owner.callObservers("controllerWillAttachBinderTrait",e,this.owner)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachBinderTrait",e,this.owner)},viewType:Pe,observesView:!0,initView(e){e.tabStyle.setValue(this.owner.tabStyle.value,i.Affinity.Inherited);const t=this.owner.tabBar.controller;null!==t&&e.tabBar.setView(t.bar.view);const l=this.owner.active.controller;null!==l&&e.active.setView(l.sheet.attachView())},willAttachView(e){this.owner.callObservers("controllerWillAttachBinderView",e,this.owner),null===this.owner.sheet.view&&this.owner.sheet.setView(e)},didAttachView(e){const t=this.owner.active.controller;null!==t&&t.sheet.removeView()},willDetachView(e){this.owner.active.setController(null)},didDetachView(e){this.owner.sheet.view===e&&this.owner.sheet.detachView(),this.owner.callObservers("controllerDidDetachBinderView",e,this.owner)},viewWillAttachTabBar(e){const t=this.owner.tabBar.controller;null!==t&&t.bar.setView(e)},viewDidDetachTabBar(e){const t=this.owner.tabBar.controller;null!==t&&t.bar.setView(null)}})],r=[d.TraitViewControllerRef({controllerType:W,binds:!0,observes:!0,get parentView(){return this.owner.binder.view},getTraitViewRef:e=>e.bar,initController(e){this.updateTabStyle(this.owner.tabStyle.value,e)},willAttachController(e){this.owner.callObservers("controllerWillAttachTabBar",e,this.owner)},didAttachController(e){const t=e.bar.view;null!==t&&this.attachTabBarView(t,e)},willDetachController(e){const t=e.bar.view;null!==t&&this.detachTabBarView(t,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachTabBar",e,this.owner)},controllerWillAttachBarView(e,t){this.owner.callObservers("controllerWillAttachTabBarView",e,this.owner),this.attachTabBarView(e,t)},controllerDidDetachBarView(e,t){this.detachTabBarView(e,t),this.owner.callObservers("controllerDidDetachTabBarView",e,this.owner)},attachTabBarView(e,t){const i=this.owner.binder.view;null!==i&&null===i.tabBar.view&&i.tabBar.attachView(e)},detachTabBarView(e,t){e.remove()},controllerDidPressTabHandle(e,t,i){this.owner.didPressTabHandle(e,t,i)},controllerDidLongPressTabHandle(e,t){this.owner.didLongPressTabHandle(e,t)},updateTabStyle(e,t){"bottom"===e?this.insertView():this.removeView()},createController:()=>new Ae})],o=[d.TraitViewControllerSet({controllerType:Se,binds:!1,ordered:!0,observes:!0,get parentView(){return this.owner.binder.view},getTraitViewRef:e=>e.sheet,initController(e){this.updateTabStyle(this.owner.tabStyle.value,e)},willAttachController(e){this.owner.callObservers("controllerWillAttachTab",e,this.owner)},didAttachController(e){const t=e.sheet.trait;null!==t&&this.attachTabTrait(t,e);const i=e.sheet.attachView();this.attachTabView(i,e);const l=e.handle.insertController();this.attachTabHandle(l,e),null===this.owner.active.controller&&this.owner.active.setController(e)},willDetachController(e){e===this.owner.active.controller&&this.owner.active.setController(null);const t=e.handle.controller;null!==t&&this.detachTabHandle(t,e);const i=e.sheet.view;null!==i&&this.detachTabView(i,e);const l=e.sheet.trait;null!==l&&this.detachTabTrait(l,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachTab",e,this.owner)},controllerWillAttachSheetTrait(e,t){this.owner.callObservers("controllerWillAttachTabTrait",e,t,this.owner),this.attachTrait(e,void 0,t),this.attachTabTrait(e,t)},controllerDidDetachSheetTrait(e,t){this.detachTabTrait(e,t),this.detachTrait(e),this.owner.callObservers("controllerDidDetachTabTrait",e,t,this.owner)},attachTabTrait(e,t){},detachTabTrait(e,t){},controllerWillAttachSheetView(e,t){this.owner.callObservers("controllerWillAttachTabView",e,t,this.owner),this.attachTabView(e,t)},controllerDidDetachSheetView(e,t){this.detachTabView(e,t),this.owner.callObservers("controllerDidDetachTabView",e,t,this.owner)},attachTabView(e,t){const i=this.owner.binder.view;null!==i&&i.tabs.attachView(e)},detachTabView(e,t){const i=this.owner.binder.view;null!==i&&i.tabs.deleteView(e)},controllerWillAttachHandle(e,t){this.owner.callObservers("controllerWillAttachTabHandle",e,t,this.owner),this.attachTabHandle(e,t)},controllerDidDetachHandle(e,t){this.detachTabHandle(e,t),this.owner.callObservers("controllerDidDetachTabHandle",e,t,this.owner)},attachTabHandle(e,i){if("mode"===this.owner.tabStyle.value){const l=t.Objects.getNextValue(this.controllers,i.uid),s=void 0!==l?l.handle.controller:null;this.owner.modeTools.attachController(e,s)}},detachTabHandle(e,t){"mode"===this.owner.tabStyle.value&&this.owner.modeTools.deleteController(e),e.remove()},updateTabStyle(e,i){const l=i.handle.controller;if(null!==l)if("mode"===e){const e=t.Objects.getNextValue(this.controllers,i.uid),s=void 0!==e?e.handle.controller:null;this.owner.modeTools.attachController(l,s)}else this.owner.modeTools.detachController(l)}})],a=[d.TraitViewControllerRef({controllerType:Se,consumed:!0,binds:!1,observes:!0,getTraitViewRef:e=>e.sheet,willAttachController(e){this.owner.callObservers("controllerWillAttachActive",e,this.owner)},didAttachController(e){this.owner.fullBleed.setIntrinsic(e.fullBleed.value);const t=e.sheet.trait;null!==t&&this.attachActiveTrait(t,e);const i=e.sheet.attachView();null!==i&&this.attachActiveView(i,e),e.handle.setActive(!0)},willDetachController(e){e.handle.setActive(!1);const t=e.sheet.view;null!==t&&this.detachActiveView(t,e);const i=e.sheet.trait;null!==i&&this.detachActiveTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachActive",e,this.owner)},controllerWillAttachSheetTrait(e,t){this.owner.callObservers("controllerWillAttachActiveTrait",e,this.owner),this.attachActiveTrait(e,t)},controllerDidDetachSheetTrait(e,t){this.detachActiveTrait(e,t),this.owner.callObservers("controllerDidDetachActiveTrait",e,this.owner)},attachActiveTrait(e,t){},detachActiveTrait(e,t){},controllerWillAttachSheetView(e,t){this.owner.callObservers("controllerWillAttachActiveView",e,this.owner),this.attachActiveView(e,t)},controllerDidDetachSheetView(e,t){this.detachActiveView(e,t),this.owner.callObservers("controllerDidDetachActiveView",e,this.owner)},attachActiveView(e,t){const i=this.owner.binder.view;null!==i&&i.active.setView(e)},detachActiveView(e,t){const i=this.owner.binder.view;null!==i&&i.active.deleteView()},controllerDidSetFullBleed(e,t){this.owner.fullBleed.setIntrinsic(e)},controllerDidScrollSheetView(e,t){this.owner.callObservers("controllerDidScrollSheetView",e,this.owner)}})],w(null,null,l,{kind:"field",name:"folioStyle",static:!1,private:!1,access:{has:e=>"folioStyle"in e,get:e=>e.folioStyle,set:(e,t)=>{e.folioStyle=t}},metadata:f},u,c),w(null,null,s,{kind:"field",name:"tabStyle",static:!1,private:!1,access:{has:e=>"tabStyle"in e,get:e=>e.tabStyle,set:(e,t)=>{e.tabStyle=t}},metadata:f},p,c),w(null,null,n,{kind:"field",name:"binder",static:!1,private:!1,access:{has:e=>"binder"in e,get:e=>e.binder,set:(e,t)=>{e.binder=t}},metadata:f},g,c),w(null,null,r,{kind:"field",name:"tabBar",static:!1,private:!1,access:{has:e=>"tabBar"in e,get:e=>e.tabBar,set:(e,t)=>{e.tabBar=t}},metadata:f},b,c),w(null,null,o,{kind:"field",name:"tabs",static:!1,private:!1,access:{has:e=>"tabs"in e,get:e=>e.tabs,set:(e,t)=>{e.tabs=t}},metadata:f},m,c),w(null,null,a,{kind:"field",name:"active",static:!1,private:!1,access:{has:e=>"active"in e,get:e=>e.active,set:(e,t)=>{e.active=t}},metadata:f},y,c),f&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f})})(),e})(),Be=(()=>{var e;let t,o,a,h,c,d,u,p,g,b,m,y,f,V=n.HtmlView,T=[],S=[],C=[],k=[],L=[],D=[],I=[],O=[],A=[],P=[],x=[],B=[],R=[],W=[];return e=class extends V{constructor(e){super(e),this.widthBasis=(v(this,T),v(this,S,void 0)),this.heightBasis=v(this,C,void 0),this.unitWidth=v(this,k,void 0),this.unitHeight=v(this,L,void 0),this.minPanelHeight=v(this,D,void 0),this.panelStyle=v(this,I,void 0),this.paneLayout=v(this,O,void 0),this.minFrameWidth=v(this,A,void 0),this.minFrameHeight=v(this,P,void 0),this.header=v(this,x,void 0),this.headerTitle=v(this,B,void 0),this.headerSubtitle=v(this,R,void 0),this.panes=v(this,W,void 0),this.initPanel(),e.addEventListener("scroll",this.onPanelScroll.bind(this))}initPanel(){this.setIntrinsic({classList:["panel"],style:{position:"relative",boxSizing:"border-box",overflow:"hidden"}}),this.panelStyle.applyPanelStyle(this.panelStyle.value)}onResize(){super.onResize(),this.resizePanel()}resizePanel(){if(!this.paneLayout.derived){const e=this.widthBasis.value,t=this.heightBasis.value,i=void 0!==e?e:this.style.width.pxValue(),l=void 0!==t?t:this.style.height.pxValue();let s;s=i>=this.minFrameWidth.value&&l>=this.minFrameHeight.value?"frame":"stack",this.paneLayout.setIntrinsic(s)}if(0===this.panes.viewCount){const e=this.widthBasis.value;void 0!==e&&this.style.width.setIntrinsic(e);const t=this.heightBasis.value;void 0!==t&&this.style.height.setIntrinsic(t)}}processChildren(e,t){if(0!=(e&r.View.NeedsResize)&&0!==this.panes.viewCount){this.paneLayout.recohere(this.updateTime);"frame"===this.paneLayout.value?this.resizeFrameChildren(e,t):this.resizeStackChildren(e,t)}else super.processChildren(e,t)}resizeFrameChildren(t,i){let l=this.style.paddingLeft.pxValue(),s=this.style.paddingTop.pxValue();const n=this.widthBasis.value,r=this.heightBasis.value,o=(void 0!==n?n:this.style.width.pxValue())-l,a=(void 0!==r?r:this.style.height.pxValue())-s,h=l;let c=0,d=null;super.processChildren(t,(function(t,n){if(t instanceof e){if(null===d){let i=0,l=t;for(;null!==l;){const t=l.unitWidth.value;if(!(null===d||i+t<1.01))break;i+=t,d=l,l=l.getNextSibling(e)}}const i=t.unitWidth.value*o,n=Math.max(t.minPanelHeight.value,t.unitHeight.value*a);t.setIntrinsic({style:{left:l,top:s,visibility:void 0},widthBasis:i-t.style.marginLeft.pxValue()-t.style.marginRight.pxValue(),heightBasis:n-t.style.marginTop.pxValue()-t.style.marginBottom.pxValue()}),l+=i}i.call(this,t,n),t instanceof e&&(c=Math.max(c,t.style.marginTop.pxValue()+t.style.height.pxValue()+t.style.marginBottom.pxValue()),t===d&&(l=h,s+=c,c=0,d=null))})),void 0!==n&&this.style.width.setIntrinsic(o),void 0!==r&&this.style.height.setIntrinsic(s)}resizeStackChildren(t,i){const l=this.style.paddingLeft.pxValue();let s=this.style.paddingTop.pxValue();const n=this.widthBasis.value,r=this.heightBasis.value,o=(void 0!==n?n:this.style.width.pxValue())-l,a=(void 0!==r?r:this.style.height.pxValue())-s;super.processChildren(t,(function(t,n){if(t instanceof e){const e=Math.max(t.minPanelHeight.value,t.unitHeight.value*a);t.setIntrinsic({style:{left:l,top:s},widthBasis:o-t.style.marginLeft.pxValue()-t.style.marginRight.pxValue(),heightBasis:e-t.style.marginTop.pxValue()-t.style.marginBottom.pxValue()})}i.call(this,t,n),t instanceof e&&(t.style.visibility.setIntrinsic(void 0),s+=t.style.marginTop.pxValue()+t.style.height.pxValue()+t.style.marginBottom.pxValue())})),void 0!==n&&this.style.width.setIntrinsic(o),void 0!==r&&this.style.height.setIntrinsic(s+this.style.paddingBottom.pxValue())}onPanelScroll(e){this.requireUpdate(r.View.NeedsScroll)}},(()=>{var v;const H="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=V[Symbol.metadata])&&void 0!==v?v:null):void 0;t=[i.Property({valueType:Number,updateFlags:r.View.NeedsResize})],o=[i.Property({valueType:Number,updateFlags:r.View.NeedsResize})],a=[i.Property({valueType:Number,value:1,didSetValue(e){this.owner.callObservers("viewDidSetUnitWidth",e,this.owner)}})],h=[i.Property({valueType:Number,value:1,didSetValue(e){this.owner.callObservers("viewDidSetUnitHeight",e,this.owner)}})],c=[i.Property({valueType:Number,value:180,inherits:!0,didSetValue(e){this.owner.callObservers("viewDidSetMinPanelHeight",e,this.owner)}})],d=[i.Property({valueType:String,value:"none",updateFlags:r.View.NeedsResize,didSetValue(e){this.applyPanelStyle(e),this.owner.callObservers("viewDidSetPanelStyle",e,this.owner)},applyPanelStyle(e){const t=this.owner;"card"===e?(t.classList.add("panel-card"),t.style.setIntrinsic({margin:6,borderRadius:4,backgroundColor:s.Look.backgroundColor}),t.modifyTheme(s.Feel.default,[[s.Feel.raised,1]])):(t.classList.remove("panel-card"),t.style.setIntrinsic({margin:0,borderRadius:null,backgroundColor:null}),t.modifyTheme(s.Feel.default,[[s.Feel.raised,void 0]]))}})],u=[i.Property({valueType:String,value:"frame",inherits:!0,updateFlags:r.View.NeedsResize,didSetValue(e){this.owner.callObservers("viewDidSetPaneLayout",e,this.owner)}})],p=[i.Property({valueType:Number,value:720,inherits:!0,updateFlags:r.View.NeedsResize})],g=[i.Property({valueType:Number,value:540,inherits:!0,updateFlags:r.View.NeedsResize})],b=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,binds:!0,willAttachView(e){this.owner.callObservers("viewWillAttachHeader",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachHeader",e,this.owner)},insertChild(e,t,i,l){null!==i?e.insertChild(t,i,l):e.prependChild(t,l)},createView(){return super.createView().setIntrinsic({classList:["panel-header"],style:{display:"flex",justifyContent:"space-between",position:"absolute",left:0,top:0,width:l.Length.pct(100),height:30,paddingLeft:12,paddingRight:12,boxSizing:"border-box",userSelect:"none",zIndex:1}})}})],m=[r.ViewRef({viewType:n.HtmlView,viewKey:"panel-title",binds:!0,get parentView(){return this.owner.header.insertView()},willAttachView(e){this.owner.callObservers("viewWillAttachHeaderTitle",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachHeaderTitle",e,this.owner)},insertChild(e,t,i,l){null===i&&(i=this.owner.headerSubtitle.view),e.insertChild(t,i,l)},fromLike(e){if(void 0===e||"string"==typeof e){let t=this.view;return null===t&&(t=this.createView()),t.text.setState(e),t}return super.fromLike(e)},createView(){return super.createView().setIntrinsic({classList:["header-title"],style:{alignSelf:"center",color:s.Look.legendColor}})}})],y=[r.ViewRef({viewType:n.HtmlView,viewKey:"panel-subtitle",binds:!0,get parentView(){return this.owner.header.insertView()},willAttachView(e){this.owner.callObservers("viewWillAttachHeaderSubtitle",e,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachHeaderSubtitle",e,this.owner)},fromLike(e){if(void 0===e||"string"==typeof e){let t=this.view;return null===t&&(t=this.createView()),t.text.setState(e),t}return super.fromLike(e)},createView(){return super.createView().setIntrinsic({classList:["header-subtitle"],style:{alignSelf:"center",color:s.Look.legendColor}})}})],f=[r.ViewSet({get viewType(){return Be},binds:!0,observes:!0,initView(e){e.style.setIntrinsic({position:"absolute",visibility:"hidden"})},willAttachView(e,t){this.owner.callObservers("viewWillAttachPane",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachPane",e,this.owner)},viewDidSetUnitWidth(e,t){this.owner.requireUpdate(r.View.NeedsResize)},viewDidSetUnitHeight(e,t){this.owner.requireUpdate(r.View.NeedsResize)},viewDidSetMinPanelHeight(e,t){this.owner.requireUpdate(r.View.NeedsResize)},viewDidSetPanelStyle(e,t){this.owner.requireUpdate(r.View.NeedsResize)}})],w(null,null,t,{kind:"field",name:"widthBasis",static:!1,private:!1,access:{has:e=>"widthBasis"in e,get:e=>e.widthBasis,set:(e,t)=>{e.widthBasis=t}},metadata:H},S,T),w(null,null,o,{kind:"field",name:"heightBasis",static:!1,private:!1,access:{has:e=>"heightBasis"in e,get:e=>e.heightBasis,set:(e,t)=>{e.heightBasis=t}},metadata:H},C,T),w(null,null,a,{kind:"field",name:"unitWidth",static:!1,private:!1,access:{has:e=>"unitWidth"in e,get:e=>e.unitWidth,set:(e,t)=>{e.unitWidth=t}},metadata:H},k,T),w(null,null,h,{kind:"field",name:"unitHeight",static:!1,private:!1,access:{has:e=>"unitHeight"in e,get:e=>e.unitHeight,set:(e,t)=>{e.unitHeight=t}},metadata:H},L,T),w(null,null,c,{kind:"field",name:"minPanelHeight",static:!1,private:!1,access:{has:e=>"minPanelHeight"in e,get:e=>e.minPanelHeight,set:(e,t)=>{e.minPanelHeight=t}},metadata:H},D,T),w(null,null,d,{kind:"field",name:"panelStyle",static:!1,private:!1,access:{has:e=>"panelStyle"in e,get:e=>e.panelStyle,set:(e,t)=>{e.panelStyle=t}},metadata:H},I,T),w(null,null,u,{kind:"field",name:"paneLayout",static:!1,private:!1,access:{has:e=>"paneLayout"in e,get:e=>e.paneLayout,set:(e,t)=>{e.paneLayout=t}},metadata:H},O,T),w(null,null,p,{kind:"field",name:"minFrameWidth",static:!1,private:!1,access:{has:e=>"minFrameWidth"in e,get:e=>e.minFrameWidth,set:(e,t)=>{e.minFrameWidth=t}},metadata:H},A,T),w(null,null,g,{kind:"field",name:"minFrameHeight",static:!1,private:!1,access:{has:e=>"minFrameHeight"in e,get:e=>e.minFrameHeight,set:(e,t)=>{e.minFrameHeight=t}},metadata:H},P,T),w(null,null,b,{kind:"field",name:"header",static:!1,private:!1,access:{has:e=>"header"in e,get:e=>e.header,set:(e,t)=>{e.header=t}},metadata:H},x,T),w(null,null,m,{kind:"field",name:"headerTitle",static:!1,private:!1,access:{has:e=>"headerTitle"in e,get:e=>e.headerTitle,set:(e,t)=>{e.headerTitle=t}},metadata:H},B,T),w(null,null,y,{kind:"field",name:"headerSubtitle",static:!1,private:!1,access:{has:e=>"headerSubtitle"in e,get:e=>e.headerSubtitle,set:(e,t)=>{e.headerSubtitle=t}},metadata:H},R,T),w(null,null,f,{kind:"field",name:"panes",static:!1,private:!1,access:{has:e=>"panes"in e,get:e=>e.panes,set:(e,t)=>{e.panes=t}},metadata:H},W,T),H&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:H})})(),e.InsertChildFlags=r.View.InsertChildFlags|e.NeedsResize,e.RemoveChildFlags=r.View.RemoveChildFlags|e.NeedsResize,e})(),Re=(()=>{var e;let t,i,l,s,o,a=d.Controller,h=[],c=[],u=[],p=[],g=[],b=[];return e=class extends a{constructor(){super(...arguments),this.panel=(v(this,h),v(this,c,void 0)),this.panelHeader=v(this,u,void 0),this.panelTitle=v(this,p,void 0),this.panelSubtitle=v(this,g,void 0),this.panes=v(this,b,void 0)}},(()=>{var v;const m="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(v=a[Symbol.metadata])&&void 0!==v?v:null):void 0;t=[d.TraitViewRef({willAttachTrait(e){this.owner.callObservers("controllerWillAttachPanelTrait",e,this.owner)},didDetachTrait(e){this.owner.callObservers("controllerDidDetachPanelTrait",e,this.owner)},viewType:Be,observesView:!0,didAttachView(e,t){this.owner.panelHeader.setView(e.header.view),this.owner.panelTitle.setView(e.headerTitle.view),this.owner.panelSubtitle.setView(e.headerSubtitle.view)},willDetachView(e){this.owner.panelHeader.setView(null),this.owner.panelTitle.setView(null),this.owner.panelSubtitle.setView(null)},willAttachView(e){this.owner.callObservers("controllerWillAttachPanelView",e,this.owner)},didDetachView(e){this.owner.callObservers("controllerDidDetachPanelView",e,this.owner)},viewWillAttachHeader(e){this.owner.panelHeader.setView(e)},viewDidDetachHeader(e){this.owner.panelHeader.setView(null)},viewWillAttachHeaderTitle(e){this.owner.panelTitle.setView(e)},viewDidDetachHeaderTitle(e){this.owner.panelTitle.setView(null)},viewWillAttachHeaderSubtitle(e){this.owner.panelSubtitle.setView(e)},viewDidDetachHeaderSubtitle(e){this.owner.panelSubtitle.setView(null)}})],i=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,get parentView(){return this.owner.panel.attachView().header.parentView},initView(e){this.owner.panel.attachView().header.setView(e)},createView(){return this.owner.panel.attachView().header.createView()}})],l=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,get parentView(){return this.owner.panel.attachView().headerTitle.parentView},initView(e){this.owner.panel.attachView().headerTitle.setView(e)},fromLike(e){return void 0===e||"string"==typeof e?this.owner.panel.attachView().headerTitle.fromLike(e):super.fromLike(e)},createView(){return this.owner.panel.attachView().headerTitle.createView()}})],s=[r.ViewRef({viewType:n.HtmlView,viewKey:!0,get parentView(){return this.owner.panel.attachView().headerSubtitle.parentView},initView(e){this.owner.panel.attachView().headerSubtitle.setView(e)},fromLike(e){return void 0===e||"string"==typeof e?this.owner.panel.attachView().headerSubtitle.fromLike(e):super.fromLike(e)},createView(){return this.owner.panel.attachView().headerSubtitle.createView()}})],o=[d.TraitViewControllerSet({get controllerType(){return Re},binds:!0,observes:!0,get parentView(){return this.owner.panel.attachView()},getTraitViewRef:e=>e.panel,willAttachController(e){this.owner.callObservers("controllerWillAttachPane",e,this.owner)},didAttachController(e){const t=e.panel.trait;null!==t&&this.attachPaneTrait(t,e);const i=e.panel.view;null!==i&&this.attachPaneView(i,e)},willDetachController(e){const t=e.panel.view;null!==t&&this.detachPaneView(t,e);const i=e.panel.trait;null!==i&&this.detachPaneTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachPane",e,this.owner)},controllerWillAttachPanelTrait(e,t){this.owner.callObservers("controllerWillAttachPaneTrait",e,t,this.owner),this.attachPaneTrait(e,t)},controllerDidDetachPanelTrait(e,t){this.detachPaneTrait(e,t),this.owner.callObservers("controllerDidDetachPaneTrait",e,t,this.owner)},attachPaneTrait(e,t){},detachPaneTrait(e,t){},controllerWillAttachPanelView(e,t){this.owner.callObservers("controllerWillAttachPaneView",e,t,this.owner),this.attachPaneView(e,t)},controllerDidDetachPanelView(e,t){this.detachPaneView(e,t),this.owner.callObservers("controllerDidDetachPaneView",e,t,this.owner)},attachPaneView(e,t){},detachPaneView(e,t){e.remove()}})],w(null,null,t,{kind:"field",name:"panel",static:!1,private:!1,access:{has:e=>"panel"in e,get:e=>e.panel,set:(e,t)=>{e.panel=t}},metadata:m},c,h),w(null,null,i,{kind:"field",name:"panelHeader",static:!1,private:!1,access:{has:e=>"panelHeader"in e,get:e=>e.panelHeader,set:(e,t)=>{e.panelHeader=t}},metadata:m},u,h),w(null,null,l,{kind:"field",name:"panelTitle",static:!1,private:!1,access:{has:e=>"panelTitle"in e,get:e=>e.panelTitle,set:(e,t)=>{e.panelTitle=t}},metadata:m},p,h),w(null,null,s,{kind:"field",name:"panelSubtitle",static:!1,private:!1,access:{has:e=>"panelSubtitle"in e,get:e=>e.panelSubtitle,set:(e,t)=>{e.panelSubtitle=t}},metadata:m},g,h),w(null,null,o,{kind:"field",name:"panes",static:!1,private:!1,access:{has:e=>"panes"in e,get:e=>e.panes,set:(e,t)=>{e.panes=t}},metadata:m},b,h),m&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})})(),e})(),We=(()=>{var e;let t,l=Te,s=[],o=[];return e=class extends l{constructor(){super(...arguments),this.panels=(v(this,s),v(this,o,void 0))}initSheet(){super.initSheet(),this.classList.add("board")}processChildren(e,t){0!=(e&r.View.NeedsResize)?this.resizeChildren(e,t):super.processChildren(e,t)}resizeChildren(e,t){const l=this.edgeInsets.value,s=Math.max(this.style.paddingTop.pxValue(),l.insetTop),r=Math.max(this.style.paddingRight.pxValue(),l.insetRight),o=Math.max(this.style.paddingBottom.pxValue(),l.insetBottom),a=Math.max(this.style.paddingLeft.pxValue(),l.insetLeft),h=this.style.width.pxValue()-this.style.marginLeft.pxValue()-a-r-this.style.marginRight.pxValue(),c=this.style.height.pxValue()-this.style.marginTop.pxValue()-s-o-this.style.marginBottom.pxValue(),d=a;let u=s;super.processChildren(e,(function(e,l){if(e instanceof Be){const t=Math.max(e.minPanelHeight.value,e.unitHeight.value*c);e.setIntrinsic({style:{left:d,top:u},widthBasis:h-e.style.marginLeft.pxValue()-e.style.marginRight.pxValue(),heightBasis:t-e.style.marginTop.pxValue()-e.style.marginBottom.pxValue()})}e instanceof n.HtmlView&&e.style.paddingBottom.setState(null===e.nextSibling?this.style.paddingBottom.value:null,i.Affinity.Transient),t.call(this,e,l),e instanceof Be&&(e.style.visibility.setIntrinsic(void 0),u+=e.style.marginTop.pxValue()+e.style.height.pxValue()+e.style.marginBottom.pxValue())}))}},(()=>{var i;const n="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(i=l[Symbol.metadata])&&void 0!==i?i:null):void 0;t=[r.ViewSet({viewType:Be,binds:!0,observes:!0,initView(e){e.style.setIntrinsic({position:"absolute",visibility:"hidden"})},willAttachView(e,t){this.owner.callObservers("viewWillAttachPanel",e,t,this.owner)},didDetachView(e){this.owner.callObservers("viewDidDetachPanel",e,this.owner)},viewDidSetUnitWidth(e,t){this.owner.requireUpdate(r.View.NeedsResize)},viewDidSetUnitHeight(e,t){this.owner.requireUpdate(r.View.NeedsResize)},viewDidSetMinPanelHeight(e,t){this.owner.requireUpdate(r.View.NeedsResize)},viewDidSetPanelStyle(e,t){this.owner.requireUpdate(r.View.NeedsResize)}})],w(null,null,t,{kind:"field",name:"panels",static:!1,private:!1,access:{has:e=>"panels"in e,get:e=>e.panels,set:(e,t)=>{e.panels=t}},metadata:n},o,s),n&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})})(),e.InsertChildFlags=r.View.InsertChildFlags|e.NeedsResize,e.RemoveChildFlags=r.View.RemoveChildFlags|e.NeedsResize,e})(),He=(()=>{var e;let t,i,l=Se,s=[],n=[],r=[];return e=class extends l{constructor(){super(...arguments),this.sheet=(v(this,s),v(this,n,void 0)),this.panels=v(this,r,void 0)}},(()=>{var o;const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(o=l[Symbol.metadata])&&void 0!==o?o:null):void 0;t=[d.TraitViewRef({extends:!0,viewType:We})],i=[d.TraitViewControllerSet({controllerType:Re,binds:!0,observes:!0,get parentView(){return this.owner.sheet.attachView()},getTraitViewRef:e=>e.panel,willAttachController(e){this.owner.callObservers("controllerWillAttachPanel",e,this.owner)},didAttachController(e){const t=e.panel.trait;null!==t&&this.attachPanelTrait(t,e);const i=e.panel.view;null!==i&&this.attachPanelView(i,e)},willDetachController(e){const t=e.panel.view;null!==t&&this.detachPanelView(t,e);const i=e.panel.trait;null!==i&&this.detachPanelTrait(i,e)},didDetachController(e){this.owner.callObservers("controllerDidDetachPanel",e,this.owner)},controllerWillAttachPanelTrait(e,t){this.owner.callObservers("controllerWillAttachPanelTrait",e,t,this.owner),this.attachPanelTrait(e,t)},controllerDidDetachPanelTrait(e,t){this.detachPanelTrait(e,t),this.owner.callObservers("controllerDidDetachPanelTrait",e,t,this.owner)},attachPanelTrait(e,t){},detachPanelTrait(e,t){},controllerWillAttachPanelView(e,t){this.owner.callObservers("controllerWillAttachPanelView",e,t,this.owner),this.attachPanelView(e,t)},controllerDidDetachPanelView(e,t){this.detachPanelView(e,t),this.owner.callObservers("controllerDidDetachPanelView",e,t,this.owner)},attachPanelView(e,t){},detachPanelView(e,t){e.remove()}})],w(null,null,t,{kind:"field",name:"sheet",static:!1,private:!1,access:{has:e=>"sheet"in e,get:e=>e.sheet,set:(e,t)=>{e.sheet=t}},metadata:a},n,s),w(null,null,i,{kind:"field",name:"panels",static:!1,private:!1,access:{has:e=>"panels"in e,get:e=>e.panels,set:(e,t)=>{e.panels=t}},metadata:a},r,s),a&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),e})();e.AppBarController=De,e.BarController=W,e.BarLayout=C,e.BarLayoutInterpolator=k,e.BarView=R,e.BinderController=xe,e.BinderView=Pe,e.BoardController=He,e.BoardView=We,e.ButtonGlow=p,e.ButtonItem=m,e.ButtonMembrane=g,e.ButtonStack=y,e.ButtonToolController=x,e.ButtonToolView=I,e.CellController=Y,e.CellTrait=U,e.CellView=E,e.ColController=he,e.ColLayout=M,e.ColTrait=re,e.ColView=ie,e.DisclosureButton=V,e.DisclosureCellView=q,e.DisclosureColView=ne,e.DrawerButton=Ve,e.DrawerView=fe,e.FloatingButton=b,e.FolioController=Oe,e.FolioView=Ie,e.HeaderController=ve,e.HeaderTrait=we,e.HeaderView=ue,e.IconButton=f,e.IconCellController=X,e.IconCellTrait=K,e.IconCellView=j,e.IconColController=de,e.IconColTrait=ae,e.IconColView=se,e.InputTokenView=F,e.LeafController=$,e.LeafTrait=Q,e.LeafView=J,e.NavBarController=Ce,e.PanelController=Re,e.PanelView=Be,e.PopoverView=ye,e.RowController=te,e.RowTrait=ee,e.RowView=_,e.ScrimView=me,e.SearchToolController=B,e.SearchToolView=O,e.SheetController=Se,e.SheetView=Te,e.StackController=Le,e.StackView=ke,e.TabBarController=Ae,e.TableController=be,e.TableLayout=N,e.TableTrait=ge,e.TableView=pe,e.TextCellController=Z,e.TextCellTrait=G,e.TextCellView=z,e.TextColController=ce,e.TextColTrait=oe,e.TextColView=le,e.TitleToolController=P,e.TitleToolView=D,e.TokenView=H,e.ToolController=A,e.ToolLayout=T,e.ToolLayoutInterpolator=S,e.ToolView=L,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=swim-ux.min.js.map
