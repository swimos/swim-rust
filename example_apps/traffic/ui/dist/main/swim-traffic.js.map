{"version":3,"file":"swim-traffic.js","sources":["../../node_modules/tslib/tslib.es6.js","../../main/map/TrafficMapView.ts","../../main/map/IntersectionMapView.ts","../../main/map/IntersectionPopoverViewController.ts","../../main/map/ApproachMapView.ts","../../main/map/ApproachPopoverViewController.ts","../../main/map/ApproachMapViewController.ts","../../main/map/IntersectionMapViewController.ts","../../main/map/TrafficMapViewController.ts","../../main/map/IntersectionModel.ts","../../main/kpi/TrafficKpiViewController.ts","../../main/kpi/VehicleFlowKpiViewController.ts","../../main/kpi/VehicleBackupKpiViewController.ts","../../main/kpi/PedestrianBackupKpiViewController.ts","../../main/TrafficViewController.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","// Copyright 2015-2022 Swim.inc\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n// @ts-nocheck\n// Adding nocheck to guard for the \"Properties Overriding Accessors\" error sincei we use typescript 4.x and older versions of swim UI libraries\nimport {AnyColor, Color} from \"@swim/color\";\nimport {MemberAnimator} from \"@swim/view\";\nimport {MapGraphicView} from \"@swim/map\";\nimport {TrafficMapViewController} from \"./TrafficMapViewController\";\n\nexport class TrafficMapView extends MapGraphicView {\n  /** @hidden */\n  _viewController: TrafficMapViewController | null;\n\n  constructor() {\n    super();\n    this.intersectionMarkerColor.setState(Color.parse(\"#00a6ed\"));\n    this.pedestrianMarkerColor.setState(Color.parse(\"#c200fa\"));\n    this.redLightColor.setState(Color.parse(\"#a50f21\"));\n    this.yellowLightColor.setState(Color.parse(\"#fccf20\"));\n    this.greenLightColor.setState(Color.parse(\"#54e218\"));\n  }\n\n  get viewController(): TrafficMapViewController | null {\n    return this._viewController;\n  }\n\n  @MemberAnimator(Color)\n  intersectionMarkerColor: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color)\n  pedestrianMarkerColor: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color)\n  redLightColor: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color)\n  yellowLightColor: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color)\n  greenLightColor: MemberAnimator<this, Color, AnyColor>;\n}\n","// Copyright 2015-2022 Swim.inc\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n// @ts-nocheck\n// Adding nocheck to guard for the \"Properties Overriding Accessors\" error sincei we use typescript 4.x and older versions of swim UI libraries\nimport {AnyColor, Color} from \"@swim/color\";\nimport {MemberAnimator} from \"@swim/view\";\nimport {MapGraphicView} from \"@swim/map\";\nimport {IntersectionMapViewController} from \"./IntersectionMapViewController\";\n\nexport class IntersectionMapView extends MapGraphicView {\n  /** @hidden */\n  _viewController: IntersectionMapViewController | null;\n\n  get viewController(): IntersectionMapViewController | null {\n    return this._viewController;\n  }\n\n  @MemberAnimator(Color, \"inherit\")\n  intersectionMarkerColor: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color, \"inherit\")\n  pedestrianMarkerColor: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color, \"inherit\")\n  redLightColor: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color, \"inherit\")\n  yellowLightColor: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color, \"inherit\")\n  greenLightColor: MemberAnimator<this, Color, AnyColor>;\n\n  protected onCull(): void {\n    super.onCull();\n    if (this._hitBounds === null) {\n      this.setCulled(true);\n    }\n  }\n}\n","// Copyright 2015-2022 Swim.inc\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {MapDownlink, NodeRef, ValueDownlink} from \"@swim/client\";\nimport {Color} from \"@swim/color\";\nimport {HtmlView, PopoverView, PopoverViewController} from \"@swim/view\";\nimport {AreaGraphView, ChartView, LineGraphView} from \"@swim/chart\";\nimport {IntersectionInfo} from \"./IntersectionModel\";\n\nexport class IntersectionPopoverViewController extends PopoverViewController {\n  /** @hodden */\n  _info: IntersectionInfo;\n  /** @hidden */\n  _nodeRef: NodeRef;\n\n  /** @hidden */\n  _linkLatency?: ValueDownlink<Value, AnyValue>;\n\n  /** @hidden */\n  _linkMode?: ValueDownlink<Value, AnyValue>;\n\n  /** @hidden */\n  _linkPhase?: MapDownlink<Value, Value, AnyValue, AnyValue>;\n\n  /** @hidden */\n  _linkHistory?: MapDownlink<Value, Value, AnyValue, AnyValue>;\n\n  /** @hidden */\n  _linkFuture?: MapDownlink<Value, Value, AnyValue, AnyValue>;\n\n  /** @hidden */\n  _latencyView?: HtmlView;\n\n  /** @hidden */\n  _modeView?: HtmlView;\n\n  /** @hidden */\n  _contentView?: HtmlView;\n\n  /** @hidden */\n  _chartChildView: { [key: number]: any };\n\n  constructor(info: IntersectionInfo, nodeRef: NodeRef) {\n    super();\n    this._info = info;\n    this._nodeRef = nodeRef;\n\n    this._chartChildView = {};\n  }\n\n  didSetView(view: PopoverView): void {\n    view.width(240)\n        .height(360)\n        .display('flex')\n        .flexDirection('column')\n        .borderRadius(5)\n        .padding(10)\n        .backgroundColor(Color.parse(\"#071013\").alpha(0.9))\n        .backdropFilter(\"blur(2px)\")\n        .color(\"#ffffff\");\n\n    const intersection = this._info;\n\n    const header = view.append(\"header\")\n      .display('flex')\n      .alignItems('center');\n    header.append(\"div\")\n      .borderRadius(20)\n      .backgroundColor('#00a6ed')\n      .padding([3,6,3,6])\n      .marginRight(5)\n      .fontSize(15)\n      .color(\"#000000\")\n      .text(`${intersection.id}`);\n    header.append(\"h2\").key(\"name\")\n      .margin(0)\n      .fontSize(15)\n      .color(\"#00a6ed\")\n      .text(intersection.name);\n\n    const status = view.append('ul')\n      .display('flex')\n      .alignItems('center')\n      .padding(0)\n      .textAlign('center')\n      .color('#000000');\n\n    this._latencyView = status.append('li')\n      .display('inline-block')\n      .width(50)\n      .backgroundColor('#00a6ed')\n      .fontSize(11)\n      .lineHeight('1.5em')\n      .borderRadius('20px')\n      .marginRight(10)\n      .text('746ms');\n    this._latencyView.setStyle('list-style', 'none');\n\n    this._modeView = status.append('li')\n      .display('inline-block')\n      .width(50)\n      .backgroundColor('#00a6ed')\n      .fontSize(11)\n      .lineHeight('1.5em')\n      .borderRadius('20px')\n      .marginRight(10)\n      .text('--');\n    this._modeView.setStyle('list-style', 'none');\n\n    this._contentView = view.append('div')\n      .display('flex')\n      .flexDirection('column')\n      .flexGrow(1)\n      .overflow('auto');\n\n    // const footer = view.append('footer')\n    //   .textAlign('right');\n    // footer.append('span').text('test');\n\n  }\n\n  popoverDidShow(view: any): void {\n    this.linkLatency();\n    this.linkMode();\n    this.linkPhase();\n    this.linkHistory();\n    this.linkFuture();\n  }\n\n  popoverDidHide(view: any): void {\n    this.unlinkLatency();\n    this.unlinkMode();\n    this.unlinkPhase();\n    this.unlinkHistory();\n    this.unlinkFuture();\n  }\n\n  didUpdateLatency(v: Value) {\n    const tsg = v.get('tsg').numberValue() || 0;\n    const tm = v.get('tm').numberValue() || 0;\n    const latency = Math.abs( tsg - tm ) || 0;\n    this._latencyView!.text(`${latency} ms`);\n  }\n\n  protected linkLatency() {\n    if(!this._linkLatency) {\n      this._linkLatency = this._nodeRef.downlinkValue()\n        .laneUri(\"intersection/latency\")\n        .didSet(this.didUpdateLatency.bind(this))\n        .open();\n    }\n  }\n\n  protected unlinkLatency() {\n    if (this._linkLatency) {\n      this._linkLatency.close();\n      this._linkLatency = undefined;\n    }\n  }\n\n  didUpdateMode(v: Value) {\n    this._modeView!.text(`${v.getItem(0).stringValue() || '--' }`);\n  }\n\n  protected linkMode() {\n    if(!this._linkMode) {\n      this._linkMode = this._nodeRef.downlinkValue()\n        .laneUri(\"intersection/mode\")\n        .didSet(this.didUpdateMode.bind(this))\n        .open();\n    }\n  }\n\n  protected unlinkMode() {\n    if (this._linkMode) {\n      this._linkMode.close();\n      this._linkMode = undefined;\n    }\n  }\n\n  didUpdatePhase(k: Value, v: Value) {\n    const key = k.numberValue() as number;\n    if(!this._chartChildView[key]) {\n      this._contentView!.append('h3')\n        .fontWeight('normal')\n        .text(`Phase ${key}`);\n\n      const canvas=  this._contentView!.append('div')\n        .height(50)\n        .append('canvas')\n        .position('relative');\n\n      const chart = new ChartView()\n        .bottomAxis(\"time\")\n        .leftAxis(\"linear\")\n        .bottomGesture(true)\n        .leftDomainPadding([0.1, 0.1])\n        .topGutter(0)\n        .rightGutter(0)\n        .bottomGutter(20)\n        .leftGutter(-1)\n        .domainColor(\"#4a4a4a\")\n        .tickMarkColor(\"#4a4a4a\")\n        .font(\"12px sans-serif\")\n        .textColor(\"#4a4a4a\");\n      canvas.append(chart);\n\n      const futureColor = Color.rgb('#6c6c6c').alpha(0.2);\n      const plot0 = new AreaGraphView()\n        .fill(futureColor);\n      chart.addPlot(plot0);\n\n      const plot1 = new LineGraphView()\n        .stroke(futureColor)\n        .strokeWidth(1);\n      chart.addPlot(plot1);\n\n      const plot2 = new LineGraphView()\n        .stroke(\"#00a6ed\")\n        .strokeWidth(1);\n      chart.addPlot(plot2);\n\n      this._chartChildView[key] = {\n        chartVew: chart,\n        plot0View: plot0,\n        plot1View: plot1,\n        plot2View: plot2,\n      };\n    }\n  }\n\n  protected linkPhase() {\n    if(!this._linkPhase) {\n      this._linkPhase = this._nodeRef.downlinkMap()\n        .laneUri(\"phase/state\")\n        .didUpdate(this.didUpdatePhase.bind(this))\n        .open();\n    }\n  }\n\n  protected unlinkPhase() {\n    if (this._linkPhase) {\n      this._linkPhase.close();\n      this._linkPhase = undefined;\n    }\n  }\n\n  didUpdateHistory(k: Value, v: Value) {\n    for(const id in this._chartChildView) {\n      const phaseSample = v.get('signalPhases').get(+id).get('red').numberValue() || 0;\n      this._chartChildView[id].plot2View.insertDatum({x: k.numberValue(), y: phaseSample});\n    }\n  }\n\n  didRemoveHistory(k: Value, v: Value) {\n    for(const id in this._chartChildView) {\n      this._chartChildView[id].plot2View.removeDatum( k.numberValue() );\n    }\n  }\n\n  protected linkHistory() {\n    if(!this._linkHistory) {\n      this._linkHistory = this._nodeRef.downlinkMap()\n        .laneUri(\"intersection/history\")\n        .didUpdate(this.didUpdateHistory.bind(this))\n        .didRemove(this.didRemoveHistory.bind(this))\n        .open();\n    }\n  }\n\n  protected unlinkHistory() {\n    if (this._linkHistory) {\n      this._linkHistory.close();\n      this._linkHistory = undefined;\n    }\n  }\n\n  didUpdateFuture(k: Value, v: Value) {\n    for(const id in this._chartChildView) {\n      const prediction = v.get('signalPhases').get(+id).get('red').numberValue() || 0;\n      const clamped = Math.round(prediction);\n\n      this._chartChildView[id].plot0View.insertDatum({x: k.numberValue(), y: prediction, dy: clamped});\n      this._chartChildView[id].plot1View.insertDatum({x: k.numberValue(), y: prediction});\n    }\n  }\n\n  didRemoveFuture(k: Value, v: Value) {\n    for(const id in this._chartChildView) {\n      this._chartChildView[id].plot0View.removeDatum( k.numberValue() );\n      this._chartChildView[id].plot1View.removeDatum( k.numberValue() );\n    }\n  }\n\n  protected linkFuture() {\n    if(!this._linkFuture) {\n      this._linkFuture = this._nodeRef.downlinkMap()\n        .laneUri(\"intersection/future\")\n        .didUpdate(this.didUpdateFuture.bind(this))\n        .didRemove(this.didRemoveFuture.bind(this))\n        .open();\n    }\n  }\n\n  protected unlinkFuture() {\n    if (this._linkFuture) {\n      this._linkFuture.close();\n      this._linkFuture = undefined;\n    }\n  }\n\n}\n","// Copyright 2015-2022 Swim.inc\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n// @ts-nocheck\n// Adding nocheck to guard for the \"Properties Overriding Accessors\" error sincei we use typescript 4.x and older versions of swim UI libraries\nimport {AnyColor, Color} from \"@swim/color\";\nimport {MemberAnimator} from \"@swim/view\";\nimport {MapPolygonView} from \"@swim/map\";\nimport {ApproachMapViewController} from \"./ApproachMapViewController\";\n\nexport class ApproachMapView extends MapPolygonView {\n  /** @hidden */\n  _viewController: ApproachMapViewController | null;\n\n  constructor() {\n    super();\n    this.fill.setState(Color.transparent());\n  }\n\n  get viewController(): ApproachMapViewController | null {\n    return this._viewController;\n  }\n\n  @MemberAnimator(Color, \"inherit\")\n  redLightColor: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color, \"inherit\")\n  yellowLightColor: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color, \"inherit\")\n  greenLightColor: MemberAnimator<this, Color, AnyColor>;\n}\n","// Copyright 2015-2022 Swim.inc\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {MapDownlink, NodeRef, ValueDownlink} from \"@swim/client\";\nimport {Color} from \"@swim/color\";\nimport {HtmlView, PopoverView, PopoverViewController} from \"@swim/view\";\n// import {Transition} from '@swim/transition';\nimport {ApproachInfo} from \"./ApproachModel\";\n\nexport class ApproachPopoverViewController extends PopoverViewController {\n  /** @hodden */\n  _info: ApproachInfo;\n  /** @hidden */\n  _nodeRef: NodeRef;\n\n  /** @hidden */\n  _linkphases?: MapDownlink<Value, Value, AnyValue, AnyValue>;\n\n  /** @hidden */\n  _linkLatency?: ValueDownlink<Value, AnyValue>;\n\n  /** @hidden */\n  _linkMode?: ValueDownlink<Value, AnyValue>;\n\n  /** @hidden */\n  _phaseEvent?: MapDownlink<Value, Value, AnyValue, AnyValue>;\n\n  /** @hidden */\n  _latencyView?: HtmlView;\n\n  /** @hidden */\n  _modeView?: HtmlView;\n\n  /** @hidden */\n  _redView?: HtmlView;\n\n  /** @hidden */\n  _yellowView?: HtmlView;\n\n  /** @hidden */\n  _greenView?: HtmlView;\n\n  /** @hidden */\n  _curPhases: number = 0;\n\n  /** @hidden */\n  _countDown?: any;\n\n  constructor(info: ApproachInfo, nodeRef: NodeRef) {\n    super();\n    this._info = info;\n    this._nodeRef = nodeRef;\n  }\n\n  didSetView(view: PopoverView): void {\n    view.width(240)\n        .height(360)\n        .display('flex')\n        .flexDirection('column')\n        .borderRadius(5)\n        .padding(10)\n        .backgroundColor(Color.parse(\"#071013\").alpha(0.9))\n        .backdropFilter(\"blur(2px)\")\n        .color(\"#ffffff\");\n\n    const approach = this._info;\n    const intersection = approach.intersection!;\n\n    const header = view.append(\"header\")\n      .display('flex')\n      .alignItems('center');\n    header.append(\"div\")\n      .borderRadius(20)\n      .backgroundColor('#00a6ed')\n      .padding([3,6,3,6])\n      .marginRight(5)\n      .fontSize(15)\n      .color(\"#000000\")\n      .text(`${intersection.id}`);\n    header.append(\"h2\").key(\"name\")\n      .margin(0)\n      .fontSize(15)\n      .color(\"#00a6ed\")\n      .text(intersection.name);\n\n    const status = view.append('ul')\n      .display('flex')\n      .alignItems('center')\n      .padding(0)\n      .textAlign('center')\n      .color('#000000');\n\n    this._latencyView = status.append('li')\n      .display('inline-block')\n      .width(50)\n      .backgroundColor('#00a6ed')\n      .fontSize(11)\n      .lineHeight('1.5em')\n      .borderRadius('20px')\n      .marginRight(10)\n      .text('-- ms');\n    this._latencyView.setStyle('list-style', 'none');\n\n    this._modeView = status.append('li')\n      .display('inline-block')\n      .width(50)\n      .backgroundColor('#00a6ed')\n      .fontSize(11)\n      .lineHeight('1.5em')\n      .borderRadius('20px')\n      .marginRight(10)\n      .text('--');\n    this._modeView.setStyle('list-style', 'none');\n\n    const content = view.append('div')\n      .display('flex')\n      .flexGrow(1)\n      .flexDirection('column')\n      .alignItems('center')\n      .overflow('auto');\n\n    const boxSide = 80;\n    const boxFontSize = 23;\n    this._redView = content.append('div')\n      .width(boxSide)\n      .height(boxSide)\n      .display('flex')\n      .justifyContent('center')\n      .alignItems('center')\n      .margin(5)\n      .borderRadius(boxSide/2)\n      .fontSize(boxFontSize)\n      .opacity(0.2)\n      .text('')\n      .backgroundColor('#a50f21');\n\n    this._yellowView = content.append('div')\n      .width(boxSide)\n      .height(boxSide)\n      .display('flex')\n      .justifyContent('center')\n      .alignItems('center')\n      .margin(5)\n      .borderRadius(boxSide/2)\n      .fontSize(boxFontSize)\n      .opacity(0.2)\n      .text('')\n      .backgroundColor('#fccf20');\n\n    this._greenView = content.append('div')\n      .width(boxSide)\n      .height(boxSide)\n      .display('flex')\n      .justifyContent('center')\n      .alignItems('center')\n      .margin(5)\n      .borderRadius(boxSide/2)\n      .fontSize(boxFontSize)\n      .opacity(0.2)\n      .text('')\n      .backgroundColor('#54e218');\n\n    // const footer = view.append('footer')\n    //   .textAlign('right');\n    // footer.append('span').text('test');\n  }\n\n  popoverDidShow(view: any): void {\n    this.linkphases();\n    this.linkLatency();\n    this.linkMode();\n    this.linkPhaseEvent();\n  }\n\n  popoverDidHide(view: any): void {\n    this.unlinkphases();\n    this.unlinkLatency();\n    this.unlinkMode();\n    this.unlinkPhaseEvent();\n  }\n\n  didUpdatephases(k: Value, v: Value) {\n    if(k.numberValue() === this._info.phase) {\n      this._curPhases = v.numberValue() as number;\n      this.updateLight();\n    }\n  }\n\n  protected linkphases() {\n    if(!this._linkphases) {\n      this._linkphases = this._nodeRef.downlinkMap()\n        .laneUri(\"phase/state\")\n        .didUpdate(this.didUpdatephases.bind(this))\n        .open();\n    }\n  }\n\n  protected unlinkphases() {\n    if (this._linkphases) {\n      this._linkphases.close();\n      this._linkphases = undefined;\n    }\n  }\n\n  didUpdateLatency(v: Value) {\n    const tsg = v.get('tsg').numberValue() || 0;\n    const tm = v.get('tm').numberValue() || 0;\n    const latency = Math.abs( tsg - tm ) || 0;\n    this._latencyView!.text(`${latency} ms`);\n  }\n\n  protected linkLatency() {\n    if(!this._linkLatency) {\n      this._linkLatency = this._nodeRef.downlinkValue()\n        .laneUri(\"intersection/latency\")\n        .didSet(this.didUpdateLatency.bind(this))\n        .open();\n    }\n  }\n\n  protected unlinkLatency() {\n    if (this._linkLatency) {\n      this._linkLatency.close();\n      this._linkLatency = undefined;\n    }\n  }\n\n  didUpdateMode(v: Value) {\n    this._modeView!.text(`${v.getItem(0).stringValue() || '--' }`);\n  }\n\n  protected linkMode() {\n    if(!this._linkMode) {\n      this._linkMode = this._nodeRef.downlinkValue()\n        .laneUri(\"intersection/mode\")\n        .didSet(this.didUpdateMode.bind(this))\n        .open();\n    }\n  }\n\n  protected unlinkMode() {\n    if (this._linkMode) {\n      this._linkMode.close();\n      this._linkMode = undefined;\n    }\n  }\n\n  countDown(element: HtmlView | null, nextPhase: number): void {\n    const now = new Date(); // computer time\n    const phaseDate = new Date(nextPhase); // downlink time\n    let countdown = Math.round( (phaseDate.getTime() - now.getTime()) / 1000 );\n    if(countdown < 0) { countdown = 0; }\n    element!.text(`${ countdown }`);\n  }\n\n  updateLight(nextPhase?: number) {\n    let element: HtmlView | null = null;\n\n    // Current Light\n    switch( this._curPhases ) {\n      case 1:\n        element = this._redView!;\n        break;\n      case 2:\n        element = this._yellowView!;\n        break;\n      case 3:\n        element = this._greenView!;\n        break;\n    }\n    // Reset\n    this._redView!.opacity(0.2).text('');\n    this._yellowView!.opacity(0.2).text('');\n    this._greenView!.opacity(0.2).text('');\n    clearInterval(this._countDown);\n    this._countDown = undefined;\n\n    element!.opacity(1);\n\n    if(!nextPhase) {\n      element!.text('0');\n    } else {\n      this.countDown(element, nextPhase);\n      this._countDown = setInterval(() => {\n        this.countDown(element, nextPhase);\n      }, 100);\n    }\n  }\n\n  changeLight(nextPhase: number) {\n    this.updateLight(nextPhase);\n  }\n\n  didUpdatePhaseEvent(k: Value, v: Value) {\n    if(this._info.phase === k.numberValue() ) {\n      const nextPhase = v.get('clk').numberValue() as number;\n      this.changeLight(nextPhase);\n    }\n  }\n\n  protected linkPhaseEvent() {\n    if(!this._phaseEvent) {\n      this._phaseEvent = this._nodeRef.downlinkMap()\n        .laneUri(\"phase/event\")\n        .didUpdate(this.didUpdatePhaseEvent.bind(this))\n        .open();\n    }\n  }\n\n  protected unlinkPhaseEvent() {\n    if (this._phaseEvent) {\n      this._phaseEvent.close();\n      this._phaseEvent = undefined;\n    }\n  }\n\n}\n","// Copyright 2015-2022 Swim.inc\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {NodeRef} from \"@swim/client\";\nimport {Color} from \"@swim/color\";\nimport {Transition} from \"@swim/transition\";\nimport {PopoverView} from \"@swim/view\";\nimport {MapGraphicViewController} from \"@swim/map\";\nimport {SignalPhase} from \"./IntersectionModel\";\nimport {ApproachInfo} from \"./ApproachModel\";\nimport {ApproachMapView} from \"./ApproachMapView\";\nimport {ApproachPopoverViewController} from \"./ApproachPopoverViewController\";\n\nexport class ApproachMapViewController extends MapGraphicViewController<ApproachMapView> {\n  /** @hodden */\n  _info: ApproachInfo;\n  /** @hidden */\n  _nodeRef: NodeRef;\n  /** @hidden */\n  _phase: SignalPhase;\n  /** @hidden */\n  _occupied: boolean;\n  /** @hidden */\n  _popoverView: PopoverView | null;\n\n  constructor(info: ApproachInfo, nodeRef: NodeRef) {\n    super();\n    this._info = info;\n    this._nodeRef = nodeRef;\n    this._phase = SignalPhase.Red;\n    this._occupied = true;\n    this._popoverView = null;\n  }\n\n  setInfo(info: ApproachInfo): void {\n    if (info.coords) {\n      this._view!.setCoords(info.coords);\n    }\n  }\n\n  setPhase(phase: SignalPhase): void {\n    //console.log(\"intersection \" + this._info.intersection!.id + \" phase \" + this._info.id + \" changed from \" + this._phase + \" to \" + phase);\n    this._phase = phase;\n    this.updateApproach();\n  }\n\n  setOccupied(occupied: boolean): void {\n    this._occupied = occupied;\n    this.updateApproach();\n  }\n\n  protected updateApproach(): void {\n    const view = this._view!;\n    let signalColor: Color;\n    if (this._phase === SignalPhase.Red) { // red\n      signalColor = view.redLightColor.value!;\n    } else if (this._phase === SignalPhase.Yellow) { // yellow\n      signalColor = view.yellowLightColor.value!;\n    } else if (this._phase === SignalPhase.Green) { // green\n      signalColor = view.greenLightColor.value!;\n    } else {\n      signalColor = Color.transparent();\n    }\n    if (this._occupied === false) {\n      signalColor = signalColor.alpha(0.25);\n    }\n    view.fill(signalColor, Transition.duration(500));\n  }\n\n  didSetView(view: ApproachMapView): void {\n    view.on(\"click\", this.onClick.bind(this));\n  }\n\n  protected onClick(event: MouseEvent): void {\n    event.stopPropagation();\n    if (!this._popoverView) {\n      this._popoverView = new PopoverView();\n      const popoverViewController = new ApproachPopoverViewController(this._info, this._nodeRef);\n      this._popoverView.setViewController(popoverViewController);\n      this._popoverView.setSource(this._view!);\n      this._popoverView.hidePopover();\n    }\n    this.appView!.togglePopover(this._popoverView, {multi: event.altKey});\n  }\n}\n","// Copyright 2015-2022 Swim.inc\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Item, AnyValue, Value} from \"@swim/structure\";\nimport {MapDownlink, ValueDownlink, NodeRef} from \"@swim/client\";\nimport {Length} from \"@swim/length\";\nimport {Color} from \"@swim/color\";\nimport {Transition} from \"@swim/transition\";\nimport {PopoverView} from \"@swim/view\";\nimport {LngLat, MapGraphicViewController, MapCircleView} from \"@swim/map\";\nimport {IntersectionInfo, SignalPhase} from \"./IntersectionModel\";\nimport {IntersectionMapView} from \"./IntersectionMapView\";\nimport {IntersectionPopoverViewController} from \"./IntersectionPopoverViewController\";\nimport {ApproachInfo} from \"./ApproachModel\";\nimport {ApproachMapView} from \"./ApproachMapView\";\nimport {ApproachMapViewController} from \"./ApproachMapViewController\";\n\nconst APPROACH_ZOOM = 14;\n\nexport class IntersectionMapViewController extends MapGraphicViewController<IntersectionMapView> {\n  /** @hodden */\n  _info: IntersectionInfo;\n  /** @hidden */\n  _nodeRef: NodeRef;\n  /** @hidden */\n  _schematicLink: ValueDownlink<Value, AnyValue> | null;\n  /** @hidden */\n  _phasesLink: MapDownlink<Value, Value, AnyValue, AnyValue> | null;\n  /** @hidden */\n  _detectorsLink: MapDownlink<Value, Value, AnyValue, AnyValue> | null;\n  /** @hidden */\n  _pedCallLink: ValueDownlink<Value, AnyValue> | null;\n  /** @hidden */\n  _popoverView: PopoverView | null;\n  /** @hidden */\n  _pedCall: boolean;\n\n  constructor(info: IntersectionInfo, nodeRef: NodeRef) {\n    super();\n    this._info = info;\n    this._nodeRef = nodeRef;\n    this._schematicLink = null;\n    this._phasesLink = null;\n    this._detectorsLink = null;\n    this._pedCallLink = null;\n    this._popoverView = null;\n    this._pedCall = false;\n  }\n\n  protected initMarkerView(): void {\n    let markerView = this.getChildView(\"marker\") as MapCircleView | null;\n    if (!markerView) {\n      markerView = new MapCircleView();\n      markerView.center.setState(new LngLat(this._info.lng, this._info.lat));\n      markerView.radius.setState(Length.px(5));\n      markerView.fill.setState(this._view!.intersectionMarkerColor.value!);\n      markerView.on(\"click\", this.onMarkerClick.bind(this));\n      this.setChildView(\"marker\", markerView);\n    }\n  }\n\n  protected onMarkerClick(event: MouseEvent): void {\n    event.stopPropagation();\n    if (!this._popoverView) {\n      this._popoverView = new PopoverView();\n      const popoverViewController = new IntersectionPopoverViewController(this._info, this._nodeRef);\n      this._popoverView.setViewController(popoverViewController);\n      this._popoverView.setSource(this.getChildView(\"marker\"));\n      this._popoverView.hidePopover();\n    }\n    this.appView!.togglePopover(this._popoverView, {multi: event.altKey});\n  }\n\n  protected didSetSchematic(value: Value): void {\n    value.forEach(function (item: Item): void {\n      if (item.tag() === \"approach\") {\n        this.didUpdateApproach(item.toAny() as unknown as ApproachInfo);\n      }\n    }, this);\n  }\n\n  protected didUpdateApproach(approachInfo: ApproachInfo): void {\n    //console.log(\"intersection \" + this._info.id + \" didUpdateApproach:\", approachInfo);\n    const approachId = \"approach-\" + approachInfo.id;\n    approachInfo.intersection = this._info;\n\n    let approachMapView = this.getChildView(approachId) as ApproachMapView | null;\n    if (!approachMapView) {\n      approachMapView = new ApproachMapView();\n      const intersectionMapViewController = new ApproachMapViewController(approachInfo, this._nodeRef);\n      approachMapView.setViewController(intersectionMapViewController);\n      this.setChildView(approachId, approachMapView);\n    }\n    const approachMapViewController = approachMapView.viewController!;\n    approachMapViewController.setInfo(approachInfo);\n  }\n\n  protected didUpdatePhase(key: Value, value: Value): void {\n    //console.log(\"intersection \" + this._info.id + \" didUpdatePhase \" + key + \": \" + value);\n    const phaseId = key.toAny();\n    const phase = value.numberValue() as SignalPhase;\n\n    const childViews = this.childViews;\n    for (let i = 0, n = childViews.length; i < n ; i += 1) {\n      const childView = childViews[i];\n      if (childView instanceof ApproachMapView) {\n        const approachMapViewController = childView.viewController!;\n        if (approachMapViewController._info.phase === phaseId) {\n          approachMapViewController.setPhase(phase);\n        }\n      }\n    }\n  }\n\n  protected didUpdateDetector(key: Value, value: Value): void {\n    //console.log(\"intersection \" + this._info.id + \" didUpdateDetector \" + key + \": \" + value);\n    const detectorId = key.toAny();\n    const occupied = value.booleanValue(false);\n\n    const childViews = this.childViews;\n    for (let i = 0, n = childViews.length; i < n ; i += 1) {\n      const childView = childViews[i];\n      if (childView instanceof ApproachMapView) {\n        const approachMapViewController = childView.viewController!;\n        if (approachMapViewController._info.detector === detectorId) {\n          approachMapViewController.setOccupied(occupied);\n        }\n      }\n    }\n\n    if (occupied) {\n      this.ripple(this._view!.intersectionMarkerColor.value!);\n    } \n  }\n\n  protected didSetPedCall(key: Value, value: Value): void {\n    //console.log(\"intersection \" + this._info.id + \" didSetPedCall \" + key + \": \" + value);\n    const view = this._view!;\n    this._pedCall = value.isDefined();\n    const marker = this.getChildView(\"marker\") as MapCircleView | null;\n    if (marker) {\n      marker.fill.setState(this._pedCall ? view.pedestrianMarkerColor.value! : view.intersectionMarkerColor.value!,\n                           Transition.duration(500));\n    }\n\n    if (this._pedCall) {\n      this.ripple(view.pedestrianMarkerColor.value!);\n    } \n  }\n\n  protected ripple(color: Color): void {\n    if (document.hidden || this.culled) {\n      return;\n    }\n    const ripple = new MapCircleView()\n        .center(new LngLat(this._info.lng, this._info.lat))\n        .radius(0)\n        .fill(null)\n        .stroke(color.alpha(1))\n        .strokeWidth(1);\n    this.appendChildView(ripple);\n    const radius = Math.min(this.bounds.width, this.bounds.height) / 8;\n    const tween = Transition.duration<any>(5000);\n    ripple.stroke(color.alpha(0), tween)\n          .radius(radius, tween.onEnd(function () { ripple.remove(); }));\n  }\n\n  viewDidMount(view: IntersectionMapView): void {\n    this.initMarkerView();\n    this.linkSchematic();\n  }\n\n  viewWillUnmount(view: IntersectionMapView): void {\n    this.unlinkSchematic();\n    this.unlinkPhases();\n    this.unlinkDetectors();\n    this.unlinkPedCall();\n  }\n\n  viewDidSetZoom(newZoom: number, oldZoom: number, view: IntersectionMapView): void {\n    const childViews = this.childViews;\n    for (let i = 0, n = childViews.length; i < n ; i += 1) {\n      const childView = childViews[i];\n      if (childView instanceof ApproachMapView) {\n        childView.setHidden(newZoom < APPROACH_ZOOM);\n      }\n    }\n  }\n\n  viewDidSetCulled(culled: boolean, view: IntersectionMapView): void {\n    //console.log(\"intersection \" + this._info.id + \" viewDidSetCulled: \" + culled);\n    if (culled || this.zoom < APPROACH_ZOOM) {\n      this.unlinkPhases();\n    } else if (view._hitBounds !== null) {\n      this.linkPhases();\n    }\n    if (culled) {\n      this.unlinkDetectors();\n      this.unlinkPedCall();\n    } else if (view._hitBounds !== null) {\n      this.linkDetectors();\n      this.linkPedCall();\n    }\n  }\n\n  protected linkSchematic(): void {\n    if (!this._schematicLink) {\n      this._schematicLink = this._nodeRef.downlinkValue()\n          .laneUri(\"intersection/schematic\")\n          .didSet(this.didSetSchematic.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkSchematic(): void {\n    if (this._schematicLink) {\n      this._schematicLink.close();\n      this._schematicLink = null;\n    }\n  }\n\n  protected linkPhases(): void {\n    if (!this._phasesLink) {\n      //console.log(\"intersection \" + this._info.id + \" linkPhases\");\n      this._phasesLink = this._nodeRef.downlinkMap()\n          .laneUri(\"phase/state\")\n          .didUpdate(this.didUpdatePhase.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkPhases(): void {\n    if (this._phasesLink) {\n      //console.log(\"intersection \" + this._info.id + \" unlinkPhases\");\n      this._phasesLink.close();\n      this._phasesLink = null;\n    }\n  }\n\n  protected linkDetectors(): void {\n    if (!this._detectorsLink) {\n      this._detectorsLink = this._nodeRef.downlinkMap()\n          .laneUri(\"detector/state\")\n          .didUpdate(this.didUpdateDetector.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkDetectors(): void {\n    if (this._detectorsLink) {\n      this._detectorsLink.close();\n      this._detectorsLink = null;\n    }\n  }\n\n  protected linkPedCall(): void {\n    if (!this._pedCallLink) {\n      this._pedCallLink = this._nodeRef.downlinkValue()\n          .laneUri(\"pedCall\")\n          .didSet(this.didSetPedCall.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkPedCall(): void {\n    if (this._pedCallLink) {\n      this._pedCallLink.close();\n      this._pedCallLink = null;\n    }\n  }\n}\n","// Copyright 2015-2022 Swim.inc\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyValue, Value} from \"@swim/structure\";\nimport {MapDownlink, NodeRef} from \"@swim/client\";\nimport {MapGraphicViewController} from \"@swim/map\";\nimport {TrafficMapView} from \"./TrafficMapView\";\nimport {IntersectionInfo} from \"./IntersectionModel\";\nimport {IntersectionMapView} from \"./IntersectionMapView\";\nimport {IntersectionMapViewController} from \"./IntersectionMapViewController\";\n\nexport class TrafficMapViewController extends MapGraphicViewController<TrafficMapView> {\n  /** @hidden */\n  _nodeRef: NodeRef;\n  /** @hidden */\n  _intersectionsLink: MapDownlink<Value, Value, AnyValue, AnyValue> | null;\n\n  constructor(nodeRef: NodeRef) {\n    super();\n    this._nodeRef = nodeRef;\n    this._intersectionsLink = null;\n  }\n\n  protected didUpdateIntersection(key: Value, value: Value): void {\n    const intersectionInfo = value.toAny() as unknown as IntersectionInfo;\n    const intersectionId = \"\" + intersectionInfo.id;\n    //console.log(\"didUpdateIntersection:\", intersectionInfo);\n\n    let intersectionMapView = this.getChildView(intersectionId);\n    if (!intersectionMapView) {\n      const intersectionNodeUri = key.stringValue()!;\n      const intersectionNodeRef = this._nodeRef.nodeRef(intersectionNodeUri);\n\n      intersectionMapView = new IntersectionMapView();\n      const intersectionMapViewController = new IntersectionMapViewController(intersectionInfo, intersectionNodeRef);\n      intersectionMapView.setViewController(intersectionMapViewController);\n      this.setChildView(intersectionId, intersectionMapView);\n    }\n  }\n\n  viewDidMount(view: TrafficMapView): void {\n    this.linkIntersections();\n  }\n\n  viewWillUnmount(view: TrafficMapView): void {\n    this.unlinkIntersections();\n  }\n\n  protected linkIntersections(): void {\n    if (!this._intersectionsLink) {\n      this._intersectionsLink = this._nodeRef.downlinkMap()\n          .laneUri(\"intersections\")\n          .didUpdate(this.didUpdateIntersection.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkIntersections(): void {\n    if (this._intersectionsLink) {\n      this._intersectionsLink.close();\n      this._intersectionsLink = null;\n    }\n  }\n}\n","// Copyright 2015-2022 Swim.inc\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport interface IntersectionInfo {\n  id: unknown;\n  lng: number;\n  lat: number;\n  name: string;\n  city: string;\n  state: string;\n  country: string;\n  dn: string;\n}\n\nexport const enum SignalPhase {\n  Unknown = 0,\n  Red = 1,\n  Yellow = 2,\n  Green = 3,\n}\n","// Copyright 2015-2022 Swim.inc\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {Length} from \"@swim/length\";\nimport {Color} from \"@swim/color\";\nimport {HtmlView, HtmlViewController} from \"@swim/view\";\nimport {TextRunView} from \"@swim/typeset\";\nimport {GaugeView, DialView} from \"@swim/gauge\";\nimport {PieView, SliceView} from \"@swim/pie\";\n\nexport abstract class TrafficKpiViewController extends HtmlViewController {\n  /** @hidden */\n  _updateTimer: number;\n\n  /** @hidden */\n  _title?: HtmlView;\n\n  /** @hidden */\n  _subtitle?: HtmlView;\n\n  /** @hidden */\n  _meterLegend?: TextRunView;\n\n  /** @hidden */\n  _clearLegend?: TextRunView;\n\n  constructor() {\n    super();\n    this._updateTimer = 0;\n  }\n\n  abstract get primaryColor(): Color;\n\n  abstract updateKpi(): void;\n\n  get title(): HtmlView | undefined {\n    return this._title;\n  }\n\n  get subtitle(): HtmlView | undefined {\n    return this._subtitle;\n  }\n\n  get meterLegend(): TextRunView | undefined {\n    return this._meterLegend;\n  }\n\n  get clearLegend(): TextRunView | undefined {\n    return this._clearLegend;\n  }\n\n  get pieView(): PieView {\n    return this._view!.getChildView(\"body\")!.getChildView(\"canvas\")!.getChildView(\"pie\")! as PieView;\n  }\n\n  get titleView(): TextRunView {\n    return this.pieView.title()! as TextRunView;\n  }\n\n  get meterView(): SliceView {\n    return this.pieView.getChildView(\"meter\")! as SliceView;\n  }\n\n  get emptyView(): SliceView {\n    return this.pieView.getChildView(\"empty\") as SliceView;\n  }\n\n  didSetView(view: HtmlView): void {\n    const primaryColor = this.primaryColor;\n\n    view.display(\"flex\")\n        .flexDirection(\"column\")\n        .padding(8)\n        .fontFamily(\"\\\"Open Sans\\\", sans-serif\")\n        .fontSize(12);\n\n    const header = view.append(\"div\")\n        .display(\"flex\")\n        .justifyContent(\"space-between\")\n        .textTransform(\"uppercase\")\n        .color(primaryColor);\n\n    const headerLeft = header.append(\"div\");\n    this._title = headerLeft.append(\"span\").display(\"block\").text(\"Palo Alto  Pedestrian Backup\");\n    this._subtitle = headerLeft.append(\"span\").display(\"block\").text(\"@ Crosswalks\");\n\n    const headerRight = header.append(\"div\");\n    headerRight.append(\"span\").text(\"Real-Time\");\n\n    const body = view.append(\"div\").key(\"body\").position(\"relative\").flexGrow(1).width(\"100%\");\n    const bodyCanvas = body.append(\"canvas\").key(\"canvas\");\n\n    const gauge = new GaugeView();\n    bodyCanvas.append(gauge);\n\n    const innerDial = new DialView()\n        .arrangement(\"manual\")\n        .innerRadius(Length.pct(34))\n        .outerRadius(Length.pct(37))\n        .dialColor(primaryColor.alpha(0.25));\n    gauge.append(innerDial);\n\n    const outerDial = new DialView()\n        .arrangement(\"manual\")\n        .innerRadius(Length.pct(37))\n        .outerRadius(Length.pct(40))\n        .dialColor(primaryColor.alpha(0.15));\n    gauge.append(outerDial);\n\n    const pie = new PieView()\n        .key(\"pie\")\n        .innerRadius(Length.pct(34))\n        .outerRadius(Length.pct(40))\n        .cornerRadius(Length.pct(50))\n        .tickRadius(Length.pct(45))\n        .font(\"12px \\\"Open Sans\\\", sans-serif\")\n        .textColor(primaryColor);\n    bodyCanvas.append(pie);\n\n    const title = new TextRunView()\n        .font(\"36px \\\"Open Sans\\\", sans-serif\")\n        .textColor(primaryColor);\n    pie.title(title);\n\n    const meter = new SliceView()\n        .key(\"meter\")\n        .sliceColor(primaryColor)\n        .tickColor(primaryColor);\n    pie.append(meter);\n\n    this._meterLegend = new TextRunView(\"Waiting\").textColor(primaryColor);\n    meter.legend(this._meterLegend);\n\n    const empty = new SliceView()\n        .key(\"empty\")\n        .sliceColor(Color.transparent())\n        .tickColor(primaryColor.darker(3));\n    pie.append(empty);\n\n    this._clearLegend = new TextRunView(\"Clear\").textColor(primaryColor.darker(3));\n    empty.legend(this._clearLegend);\n  }\n\n  viewDidMount(view: HtmlView): void {\n    // force resize after flexbox layout\n    requestAnimationFrame(function () { view.cascadeResize(); });\n\n    this._updateTimer = setInterval(this.updateKpi.bind(this), 1000) as any;\n    this.updateKpi();\n  }\n\n  viewWillUnmount(view: HtmlView): void {\n    clearInterval(this._updateTimer);\n    this._updateTimer = 0;\n  }\n}\n","// Copyright 2015-2022 Swim.inc\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {NodeRef} from \"@swim/client\";\nimport {Color} from \"@swim/color\";\nimport {Transition} from \"@swim/transition\";\nimport {MapGraphicView} from \"@swim/map\";\nimport {SignalPhase} from \"../map/IntersectionModel\";\nimport {IntersectionMapView} from \"../map/IntersectionMapView\";\nimport {ApproachMapView} from \"../map/ApproachMapView\";\nimport {TrafficKpiViewController} from \"./TrafficKpiViewController\";\n\nexport class VehicleFlowKpiViewController extends TrafficKpiViewController {\n  /** @hidden */\n  _nodeRef: NodeRef;\n  /** @hidden */\n  _trafficMapView: MapGraphicView;\n\n  constructor(nodeRef: NodeRef, trafficMapView: MapGraphicView) {\n    super();\n    this._nodeRef = nodeRef;\n    this._trafficMapView = trafficMapView;\n  }\n\n  get primaryColor(): Color {\n    return Color.parse(\"#5aff15\");\n  }\n\n  updateKpi(): void {\n    let meterValue = 0;\n    let spaceValue = 0;\n    const intersectionMapViews = this._trafficMapView.childViews;\n    for (let i = 0; i < intersectionMapViews.length; i += 1) {\n      const intersectionMapView = intersectionMapViews[i];\n      if (intersectionMapView instanceof IntersectionMapView && !intersectionMapView.culled) {\n        const approachMapViews = intersectionMapView.childViews;\n        for (let j = 0; j < approachMapViews.length; j += 1) {\n          const approachMapView = approachMapViews[j];\n          if (approachMapView instanceof ApproachMapView) {\n            const approachMapViewController = approachMapView.viewController!;\n            if (approachMapViewController._phase === SignalPhase.Green) {\n              if (approachMapViewController._occupied) {\n                meterValue += 1;\n              } else {\n                spaceValue += 1;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    const title = this.titleView;\n    const meter = this.meterView;\n    const empty = this.emptyView;\n    const tween = Transition.duration<any>(1000);\n\n    this.title!.text('Palo Alto - VEHICLE Flow');\n    this.subtitle!.text('@ GREEN LIGHTS');\n\n    meter.value(meterValue, tween);\n    empty.value(spaceValue, tween);\n    this.meterLegend!.text(\"Flowing (\" + meterValue + \")\");\n    this.clearLegend!.text(\"Clear (\" + spaceValue + \")\");\n    title.text(Math.round(100 * meterValue / ((meterValue + spaceValue) || 1)) + \"%\");\n  }\n}\n","// Copyright 2015-2022 Swim.inc\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {NodeRef} from \"@swim/client\";\nimport {Color} from \"@swim/color\";\nimport {Transition} from \"@swim/transition\";\nimport {MapGraphicView} from \"@swim/map\";\nimport {SignalPhase} from \"../map/IntersectionModel\";\nimport {IntersectionMapView} from \"../map/IntersectionMapView\";\nimport {ApproachMapView} from \"../map/ApproachMapView\";\nimport {TrafficKpiViewController} from \"./TrafficKpiViewController\";\n\nexport class VehicleBackupKpiViewController extends TrafficKpiViewController {\n  /** @hidden */\n  _nodeRef: NodeRef;\n  /** @hidden */\n  _trafficMapView: MapGraphicView;\n\n  constructor(nodeRef: NodeRef, trafficMapView: MapGraphicView) {\n    super();\n    this._nodeRef = nodeRef;\n    this._trafficMapView = trafficMapView;\n  }\n\n  get primaryColor(): Color {\n    return Color.parse(\"#d90c25\");\n  }\n\n  updateKpi(): void {\n    let meterValue = 0;\n    let spaceValue = 0;\n    const intersectionMapViews = this._trafficMapView.childViews;\n    for (let i = 0; i < intersectionMapViews.length; i += 1) {\n      const intersectionMapView = intersectionMapViews[i];\n      if (intersectionMapView instanceof IntersectionMapView && !intersectionMapView.culled) {\n        const approachMapViews = intersectionMapView.childViews;\n        for (let j = 0; j < approachMapViews.length; j += 1) {\n          const approachMapView = approachMapViews[j];\n          if (approachMapView instanceof ApproachMapView) {\n            const approachMapViewController = approachMapView.viewController!;\n            if (approachMapViewController._phase === SignalPhase.Red) {\n              if (approachMapViewController._occupied) {\n                meterValue += 1;\n              } else {\n                spaceValue += 1;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    const title = this.titleView;\n    const meter = this.meterView;\n    const empty = this.emptyView;\n    const tween = Transition.duration<any>(1000);\n\n    this.title!.text('Palo Alto - VEHICLE BACKUP');\n    this.subtitle!.text('@ RED LIGHTS');\n\n    meter.value(meterValue, tween);\n    empty.value(spaceValue, tween);\n    this.meterLegend!.text(\"Waiting (\" + meterValue + \")\");\n    this.clearLegend!.text(\"Clear (\" + spaceValue + \")\");\n    title.text(Math.round(100 * meterValue / ((meterValue + spaceValue) || 1)) + \"%\");\n  }\n}\n","// Copyright 2015-2022 Swim.inc\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {NodeRef} from \"@swim/client\";\nimport {Color} from \"@swim/color\";\nimport {Transition} from \"@swim/transition\";\nimport {MapGraphicView} from \"@swim/map\";\nimport {IntersectionMapView} from \"../map/IntersectionMapView\";\nimport {TrafficKpiViewController} from \"./TrafficKpiViewController\";\n\nexport class PedestrianBackupKpiViewController extends TrafficKpiViewController {\n  /** @hidden */\n  _nodeRef: NodeRef;\n  /** @hidden */\n  _trafficMapView: MapGraphicView;\n\n  constructor(nodeRef: NodeRef, trafficMapView: MapGraphicView) {\n    super();\n    this._nodeRef = nodeRef;\n    this._trafficMapView = trafficMapView;\n  }\n\n  get primaryColor(): Color {\n    return Color.parse(\"#c200fa\");\n  }\n\n  updateKpi(): void {\n    let meterValue = 0;\n    let spaceValue = 0;\n    const intersectionMapViews = this._trafficMapView.childViews;\n    for (let i = 0; i < intersectionMapViews.length; i += 1) {\n      const intersectionMapView = intersectionMapViews[i];\n      if (intersectionMapView instanceof IntersectionMapView && !intersectionMapView.culled) {\n        const intersectionMapViewController = intersectionMapView.viewController!;\n        if (intersectionMapViewController._pedCall) {\n          meterValue += 1;\n        } else {\n          spaceValue += 1;\n        }\n      }\n    }\n\n    const title = this.titleView;\n    const meter = this.meterView;\n    const empty = this.emptyView;\n    const tween = Transition.duration<any>(1000);\n\n    this.title!.text('Palo Alto - PEDESTRIAN BACKUP');\n    this.subtitle!.text('@ CROSSWALKS');\n\n    meter.value(meterValue, tween);\n    empty.value(spaceValue, tween);\n    this.meterLegend!.text(\"Waiting (\" + meterValue + \")\");\n    this.clearLegend!.text(\"Clear (\" + spaceValue + \")\");\n    title.text(Math.round(100 * meterValue / ((meterValue + spaceValue) || 1)) + \"%\");\n  }\n}\n","// Copyright 2015-2022 Swim.inc\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as mapboxgl from \"mapbox-gl\";\nimport {NodeRef} from \"@swim/client\";\nimport {Color} from \"@swim/color\";\nimport {SvgView, HtmlView, HtmlViewController} from \"@swim/view\";\nimport {MapboxView} from \"@swim/mapbox\";\nimport {TrafficMapView} from \"./map/TrafficMapView\";\nimport {TrafficMapViewController} from \"./map/TrafficMapViewController\";\nimport {VehicleFlowKpiViewController} from \"./kpi/VehicleFlowKpiViewController\";\nimport {VehicleBackupKpiViewController} from \"./kpi/VehicleBackupKpiViewController\";\nimport {PedestrianBackupKpiViewController} from \"./kpi/PedestrianBackupKpiViewController\";\n\nexport class TrafficViewController extends HtmlViewController {\n  /** @hidden */\n  _nodeRef: NodeRef;\n  /** @hidden */\n  _map: mapboxgl.Map | null;\n\n  constructor(nodeRef: NodeRef) {\n    super();\n    this._nodeRef = nodeRef;\n    this._map = null;\n  }\n\n  didSetView(view: HtmlView): void {\n    this._map = new mapboxgl.Map({\n      container: view.node,\n      style: \"mapbox://styles/swimit/cjs5h20wh0fyf1gocidkpmcvm\",\n      center: {lng: -122.16, lat: 37.445},\n      pitch: 70,\n      zoom: 15.5,\n    });\n\n    const mapboxView = new MapboxView(this._map);\n    mapboxView.overlayCanvas();\n\n    const trafficMapView = new TrafficMapView();\n    const trafficMapViewController = new TrafficMapViewController(this._nodeRef);\n    trafficMapView.setViewController(trafficMapViewController);\n    mapboxView.setChildView(\"map\", trafficMapView);\n\n    const header = view.append(\"div\")\n        .key(\"header\")\n        .pointerEvents(\"none\")\n        .zIndex(10);\n\n    const logo = header.append(\"div\")\n        .key(\"logo\")\n        .position(\"absolute\")\n        .left(8)\n        .top(8)\n        .width(156)\n        .height(68);\n    logo.append(this.createLogo());\n\n    view.append(this.createKpiStack(trafficMapView));\n    this.layoutKpiStack();\n  }\n\n  viewDidResize(): void {\n    this.layoutKpiStack();\n  }\n\n  protected createKpiStack(trafficMapView: TrafficMapView): HtmlView {\n    const kpiStack = HtmlView.fromTag(\"div\")\n        .key(\"kpiStack\")\n        .position(\"absolute\")\n        .right(0)\n        .top(0)\n        .bottom(0)\n        .zIndex(9)\n        .pointerEvents(\"none\");\n\n    const vehicleFlowKpi = kpiStack.append(\"div\")\n        .key(\"vehicleFlowKpi\")\n        .position(\"absolute\")\n        .borderRadius(8)\n        .boxSizing(\"border-box\")\n        .backgroundColor(Color.parse(\"#070813\").alpha(0.33))\n        .backdropFilter(\"blur(2px)\")\n        .pointerEvents(\"auto\");\n    const vehicleFlowKpiViewController = new VehicleFlowKpiViewController(this._nodeRef, trafficMapView);\n    vehicleFlowKpi.setViewController(vehicleFlowKpiViewController);\n\n    const vehicleBackupKpi = kpiStack.append(\"div\")\n        .key(\"vehicleBackupKpi\")\n        .position(\"absolute\")\n        .borderRadius(8)\n        .boxSizing(\"border-box\")\n        .backgroundColor(Color.parse(\"#070813\").alpha(0.33))\n        .backdropFilter(\"blur(2px)\")\n        .pointerEvents(\"auto\");\n    const vehicleBackupKpiViewController = new VehicleBackupKpiViewController(this._nodeRef, trafficMapView);\n    vehicleBackupKpi.setViewController(vehicleBackupKpiViewController);\n\n    const pedestrianBackupKpi = kpiStack.append(\"div\")\n        .key(\"pedestrianBackupKpi\")\n        .position(\"absolute\")\n        .borderRadius(8)\n        .boxSizing(\"border-box\")\n        .backgroundColor(Color.parse(\"#070813\").alpha(0.33))\n        .backdropFilter(\"blur(2px)\")\n        .pointerEvents(\"auto\");\n    const pedestrianBackupKpiViewController = new PedestrianBackupKpiViewController(this._nodeRef, trafficMapView);\n    pedestrianBackupKpi.setViewController(pedestrianBackupKpiViewController);\n\n    return kpiStack;\n  }\n\n  protected layoutKpiStack(): void {\n    const kpiMargin = 16;\n\n    const view = this._view!;\n    const kpiStack = view.getChildView(\"kpiStack\") as HtmlView;\n\n    const kpiViews = kpiStack.childViews;\n    const kpiViewCount = kpiViews.length;\n    const kpiViewHeight = (view.node.offsetHeight - kpiMargin * (kpiViewCount + 1)) / (kpiViewCount || 1);\n    const kpiViewWidth = 1.5 * kpiViewHeight;\n\n    const kpiStackWidth = kpiViewWidth + 2 * kpiMargin;\n    kpiStack.width(kpiStackWidth);\n    for (let i = 0; i < kpiViewCount; i += 1) {\n      const kpiView = kpiViews[i] as HtmlView;\n      kpiView.right(kpiMargin)\n             .top(kpiViewHeight * i + kpiMargin * (i + 1))\n             .width(kpiViewWidth)\n             .height(kpiViewHeight);\n    }\n\n    if (kpiStackWidth > 240 && view.node.offsetWidth >= 2 * kpiStackWidth) {\n      kpiStack.display(\"block\");\n    } else {\n      kpiStack.display(\"none\");\n    }\n  }\n\n  protected createLogo(): SvgView {\n    const logo = SvgView.fromTag(\"svg\").width(156).height(68).viewBox(\"0 0 156 68\");\n    logo.append(\"polygon\").fill(\"#008ac5\").points(\"38.262415 60.577147 45.7497674 67.9446512 41.4336392 66.3395349\");\n    logo.append(\"polygon\").fill(\"#004868\").points(\"30.6320304 56.7525259 35.7395349 55.9824716 41.4304178 66.3390957\");\n    logo.append(\"polygon\").fill(\"#1db0ef\").points(\"45.8577521 43.5549215 35.7395349 55.9813953 30.895331 54.807418\");\n    logo.append(\"polygon\").fill(\"#008ac5\").points(\"45.8604651 43.5549215 41.760398 48.5902277 50.5169298 42.7788873\");\n    logo.append(\"polygon\").fill(\"#008ac5\").points(\"26.3271825 57.4036063 35.7395349 55.9813953 19.2251161 51.7639132\");\n    logo.append(\"polygon\").fill(\"#008ac5\").points(\"21.8522892 56.6610604 26.3302326 57.4059108 24.8674419 60.4330233\");\n    logo.append(\"polygon\").fill(\"#46c7ff\").points(\"25.8602519 50.1512126 21.9749543 52.4673682 26.296682 53.5765239\");\n    logo.append(\"polygon\").fill(\"#004868\").points(\"8.22304588 54.4 26.3302326 57.4046512 10.7431892 45.0311035\");\n    logo.append(\"polygon\").fill(\"#008ac5\").points(\"13.8293387 33.5634807 4.10372093 35.5972093 8.22325581 54.4\");\n    logo.append(\"polygon\").fill(\"#004868\").points(\"8.22099482 54.4011969 0.0941817913 35.6005706 4.10375191 35.6005706\");\n    logo.append(\"polygon\").fill(\"#004a6a\").points(\"29.0049687 26.1913296 29.4164365 29.8907151 13.8293023 33.5651163 4.10372093 35.5972093\");\n    logo.append(\"polygon\").fill(\"#46c7ff\").points(\"29.0062121 26.1911555 4.10372093 35.5972093 18.5813833 12.4933152\");\n    logo.append(\"polygon\").fill(\"#008ac5\").points(\"11.2792478 19.5948645 18.5832775 12.4930233 4.10372093 35.5972093\");\n    logo.append(\"polygon\").fill(\"#0076a9\").points(\"0.0976972893 35.6005706 11.6715695 18.9158345 4.10403655 35.6005706\");\n    logo.append(\"polygon\").fill(\"#46c7ff\").points(\"24.2487055 31.1058385 29.4139535 29.8876265 26.2195349 45.5916279\");\n    logo.append(\"polygon\").fill(\"#004868\").points(\"34.5718675 26.2202296 36.2830885 37.7346648 31.9099624 28.1109897\");\n    logo.append(\"polygon\").fill(\"#00557a\").points(\"29.0034364 26.1884581 42.3712871 20.6741037 29.4139535 29.8883721\");\n    logo.append(\"polygon\").fill(\"#008ac5\").points(\"26.68 13.7746077 29.0062121 26.1911555 18.5813953 12.4930233\");\n    logo.append(\"polygon\").fill(\"#004868\").points(\"11.6715695 2.42510699 18.5775948 12.4930233 11.083087 19.8858773\");\n    logo.append(\"polygon\").fill(\"#46c7ff\").points(\"9.61188076 0 26.6831512 13.7746077 18.5788496 12.4908901\");\n    logo.append(\"path\").fill(\"#0076a9\").d(\"M26.6778731,13.7746077 L38.8232486,18.8943879 L37.5870837,22.6477526 L29.0035088,26.187907 L26.6778731,13.7746077 Z M35.3244186,20.5976744 C35.7065226,20.5976744 36.0162791,20.2879179 36.0162791,19.905814 C36.0162791,19.52371 35.7065226,19.2139535 35.3244186,19.2139535 C34.9423146,19.2139535 34.6325581,19.52371 34.6325581,19.905814 C34.6325581,20.2879179 34.9423146,20.5976744 35.3244186,20.5976744 Z\");\n    logo.append(\"polygon\").fill(\"#46c7ff\").points(\"38.8232558 18.9003694 64.0007929 11.9315264 37.5863839 22.647813\");\n    const text = logo.append(\"text\").fill(\"#ffffff\").fontFamily(\"Orbitron\").fontSize(32);\n    text.append(\"tspan\").x(58).y(42).text(\"swim\");\n    return logo;\n  }\n}\n"],"names":["Color","MemberAnimator","MapGraphicView","chart","ChartView","AreaGraphView","LineGraphView","PopoverViewController","MapPolygonView","Transition","PopoverView","MapGraphicViewController","MapCircleView","LngLat","Length","SignalPhase","gauge","GaugeView","DialView","pie","PieView","TextRunView","SliceView","HtmlViewController","mapboxgl.Map","MapboxView","HtmlView","SvgView"],"mappings":"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"}