jobs:
  - job: ${{ parameters.name }}
    displayName: Rust format
    pool:
      vmImage: ubuntu-18.04
    steps:
      - template: azure-install-rust.yml
        parameters:
          rust_version: ${{ parameters.rust }}
      - script: |
          rustup component add rustfmt
          cargo fmt --version
        displayName: Install rustfmt
      - script: |
          cargo fmt -- --check
        displayName: cargo fmt check